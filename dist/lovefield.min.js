/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b){var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
function ha(){ha=function(){};ea.Symbol||(ea.Symbol=ia)}function ja(a,b){this.a=a;ca(this,"description",{configurable:!0,writable:!0,value:b})}ja.prototype.toString=function(){return this.a};var ia=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ja("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function ka(){ha();var a=ea.Symbol.iterator;a||(a=ea.Symbol.iterator=ea.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ca(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ma(aa(this))}});ka=function(){}}function ma(a){ka();a={next:a};a[ea.Symbol.iterator]=function(){return this};return a}function na(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(l){this.O=(h+=Math.random()+1).toString();if(l){l=ba(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return"object"===m&&null!==l||"function"===m}function e(l){if(!na(l,g)){var m=new c;ca(l,g,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(p){if(p instanceof c)return p;e(p);return m(p)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),p=new a([[l,2],
[m,3]]);if(2!=p.get(l)||3!=p.get(m))return!1;p.delete(l);p.set(m,4);return!p.has(l)&&4==p.get(m)}catch(B){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!na(l,g))throw Error("WeakMap key fail: "+l);l[g][this.O]=m;return this};b.prototype.get=function(l){return d(l)&&na(l,g)?l[g][this.O]:void 0};b.prototype.has=function(l){return d(l)&&na(l,g)&&na(l[g],
this.O)};b.prototype.delete=function(l){return d(l)&&na(l,g)&&na(l[g],this.O)?delete l[g][this.O]:!1};return b});
fa("Map",function(a){function b(){var h={};return h.Ga=h.next=h.head=h}function c(h,l){var m=h.a;return ma(function(){if(m){for(;m.head!=h.a;)m=m.Ga;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(h,l){var m=l&&typeof l;"object"==m||"function"==m?f.has(l)?m=f.get(l):(m=""+ ++g,f.set(l,m)):m="p_"+l;var p=h.b[m];if(p&&na(h.b,m))for(h=0;h<p.length;h++){var B=p[h];if(l!==l&&B.key!==B.key||l===B.key)return{id:m,list:p,index:h,fa:B}}return{id:m,
list:p,index:-1,fa:void 0}}function e(h){this.b={};this.a=b();this.size=0;if(h){h=ba(h);for(var l;!(l=h.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),l=new a(ba([[h,"s"]]));if("s"!=l.get(h)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var m=l.entries(),p=m.next();if(p.done||p.value[0]!=h||"s"!=p.value[1])return!1;p=m.next();return p.done||4!=p.value[0].x||
"t"!=p.value[1]||!m.next().done?!1:!0}catch(B){return!1}}())return a;ka();var f=new WeakMap;e.prototype.set=function(h,l){h=0===h?0:h;var m=d(this,h);m.list||(m.list=this.b[m.id]=[]);m.fa?m.fa.value=l:(m.fa={next:this.a,Ga:this.a.Ga,head:this.a,key:h,value:l},m.list.push(m.fa),this.a.Ga.next=m.fa,this.a.Ga=m.fa,this.size++);return this};e.prototype.delete=function(h){h=d(this,h);return h.fa&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.b[h.id],h.fa.Ga.next=h.fa.next,h.fa.next.Ga=h.fa.Ga,
h.fa.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.b={};this.a=this.a.Ga=b();this.size=0};e.prototype.has=function(h){return!!d(this,h).fa};e.prototype.get=function(h){return(h=d(this,h).fa)&&h.value};e.prototype.entries=function(){return c(this,function(h){return[h.key,h.value]})};e.prototype.keys=function(){return c(this,function(h){return h.key})};e.prototype.values=function(){return c(this,function(h){return h.value})};e.prototype.forEach=function(h,l){for(var m=this.entries(),
p;!(p=m.next()).done;)p=p.value,h.call(l,p[1],p[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});fa("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});
function pa(a,b){ka();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}fa("Array.prototype.values",function(a){return a?a:function(){return pa(this,function(b,c){return c})}});
fa("Set",function(a){function b(c){this.a=new Map;if(c){c=ba(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.a.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(ba([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;ka();b.prototype.add=function(c){c=0===c?0:c;this.a.set(c,c);this.size=this.a.size;return this};b.prototype.delete=function(c){c=this.a.delete(c);this.size=this.a.size;return c};b.prototype.clear=function(){this.a.clear();this.size=0};b.prototype.has=function(c){return this.a.has(c)};b.prototype.entries=function(){return this.a.entries()};b.prototype.values=function(){return this.a.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.a.forEach(function(f){return c.call(d,f,f,e)})};return b});fa("Array.prototype.entries",function(a){return a?a:function(){return pa(this,function(b,c){return[b,c]})}});var ra=this||self;function sa(a){return"string"==typeof a}function ta(){}
function ua(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function va(a){var b=ua(a);return"array"==b||"object"==b&&"number"==typeof a.length}function wa(a){return"function"==ua(a)}function xa(a){return a[ya]||(a[ya]=++za)}var ya="closure_uid_"+(1E9*Math.random()>>>0),za=0;function Aa(a,b,c){return a.call.apply(a.bind,arguments)}
function Ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function Ca(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ca=Aa:Ca=Ba;return Ca.apply(null,arguments)}
function Da(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function n(a,b){a=a.split(".");var c=ra;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.qa=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ea(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ea);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}q(Ea,Error);Ea.prototype.name="CustomError";var Fa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(sa(a))return sa(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ga=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=sa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ha=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=sa(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Ia=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;Ga(a,function(e,f){d=b.call(void 0,d,e,f,a)});return d},Ja=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=sa(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function Ka(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function La(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ma(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ua(d))for(var e=0;e<d.length;e+=8192)for(var f=Ma.apply(null,Ka(d,e,e+8192)),g=0;g<f.length;g++)b.push(f[g]);else b.push(d)}return b};function Na(a,b){this.a=a===Oa&&b||"";this.b=Pa}Na.prototype.toString=function(){return"Const{"+this.a+"}"};var Pa={},Oa={},Qa=new Na(Oa,"");function Ra(){this.a="";this.b=Sa}var Sa={};var Ta=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Ua(a,b){return-1!=a.indexOf(b)}
function Va(a){var b=0;a=Ta(String(a)).split(".");for(var c=Ta("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",g=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;b=Wa(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Wa(0==f[2].length,0==g[2].length)||Wa(f[2],g[2]);f=f[3];g=g[3]}while(0==b)}return b}function Wa(a,b){return a<b?-1:a>b?1:0};var Xa;a:{var Ya=ra.navigator;if(Ya){var Za=Ya.userAgent;if(Za){Xa=Za;break a}}Xa=""}function r(a){return Ua(Xa,a)};function $a(){return r("Safari")&&!(ab()||r("Coast")||r("Opera")||r("Edge")||r("Edg/")||r("OPR")||r("Firefox")||r("FxiOS")||r("Silk")||r("Android"))}function ab(){return(r("Chrome")||r("CriOS"))&&!r("Edge")};function bb(){this.a="";this.b=cb}function db(){var a=eb;if(a instanceof bb&&a.constructor===bb&&a.b===cb)return a.a;ua(a);return"type_error:SafeHtml"}var cb={};function fb(a){var b=new bb;b.a=a;return b}fb("<!DOCTYPE html>");var eb=fb("");fb("<br>");function gb(a){var b=new Ra;b.a=Qa instanceof Na&&Qa.constructor===Na&&Qa.b===Pa?Qa.a:"type_error:Const";b instanceof Ra&&b.constructor===Ra&&b.b===Sa?b=b.a:(ua(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function hb(a){ra.setTimeout(function(){throw a;},0)}var ib;
function jb(){var a=ra.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!r("Presto")&&(a=function(){var e=document.createElement("IFRAME");e.style.display="none";gb(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(db());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=Ca(function(l){if(("*"==h||l.origin==h)&&l.data==
g)this.port1.onmessage()},this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!r("Trident")&&!r("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Hb;c.Hb=null;e()}};return function(e){d.next={Hb:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var f=document.createElement("SCRIPT");
f.onreadystatechange=function(){f.onreadystatechange=null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){ra.setTimeout(e,0)}};function kb(a,b){this.c=a;this.f=b;this.b=0;this.a=null}kb.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};kb.prototype.put=function(a){this.f(a);100>this.b&&(this.b++,a.next=this.a,this.a=a)};function lb(){this.b=this.a=null}var nb=new kb(function(){return new mb},function(a){a.reset()});lb.prototype.add=function(a,b){var c=nb.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};lb.prototype.remove=function(){var a=null;this.a&&(a=this.a,this.a=this.a.next,this.a||(this.b=null),a.next=null);return a};function mb(){this.next=this.b=this.a=null}mb.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};mb.prototype.reset=function(){this.next=this.b=this.a=null};function ob(a,b){pb||qb();rb||(pb(),rb=!0);sb.add(a,b)}var pb;function qb(){if(ra.Promise&&ra.Promise.resolve){var a=ra.Promise.resolve(void 0);pb=function(){a.then(tb)}}else pb=function(){var b=tb;!wa(ra.setImmediate)||ra.Window&&ra.Window.prototype&&!r("Edge")&&ra.Window.prototype.setImmediate==ra.setImmediate?(ib||(ib=jb()),ib(b)):ra.setImmediate(b)}}var rb=!1,sb=new lb;function tb(){for(var a;a=sb.remove();){try{a.a.call(a.b)}catch(b){hb(b)}nb.put(a)}rb=!1};function ub(a,b,c,d){c=c||function(p,B){return p==B};d=d||function(p){return a[p]};for(var e=a.length,f=b.length,g=[],h=0;h<e+1;h++)g[h]=[],g[h][0]=0;for(var l=0;l<f+1;l++)g[0][l]=0;for(h=1;h<=e;h++)for(l=1;l<=f;l++)c(a[h-1],b[l-1])?g[h][l]=g[h-1][l-1]+1:g[h][l]=Math.max(g[h-1][l],g[h][l-1]);var m=[];h=e;for(l=f;0<h&&0<l;)c(a[h-1],b[l-1])?(m.unshift(d(h-1,l-1)),h--,l--):g[h-1][l]>g[h][l-1]?h--:l--;return m}function vb(a){return Ia(arguments,function(b,c){return b+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,Ha(arguments,function(d){return Math.pow(d-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in ra?ra.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.Ra=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.Ra)return a.Ra(!1);if(va(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(va(a))try{Ga(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==zb)throw c;}}}function Db(a){if(Ja(arguments,function(e){return!e.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=La(c.length);b.next=function(){if(d){for(var e=Ha(d,function(g,h){return c[h][g]}),f=d.length-1;0<=f;f--){if(d[f]<c[f].length-1){d[f]++;break}if(0==f){d=null;break}d[f]=0}return e}throw zb;};return b};function Eb(){return r("iPhone")&&!r("iPod")&&!r("iPad")};function t(a,b){this.a=Fb;this.m=void 0;this.c=this.b=this.w=null;this.f=this.h=!1;if(a!=ta)try{var c=this;a.call(b,function(d){Gb(c,Hb,d)},function(d){Gb(c,Ib,d)})}catch(d){Gb(this,Ib,d)}}var Fb=0,Hb=2,Ib=3;function Jb(){this.next=this.context=this.b=this.c=this.a=null;this.f=!1}Jb.prototype.reset=function(){this.context=this.b=this.c=this.a=null;this.f=!1};var Kb=new kb(function(){return new Jb},function(a){a.reset()});function Lb(a,b,c){var d=Kb.get();d.c=a;d.b=b;d.context=c;return d}
function u(a){if(a instanceof t)return a;var b=new t(ta);Gb(b,Hb,a);return b}function Mb(a){return new t(function(b,c){c(a)})}function Nb(a,b,c){Ob(a,b,c,null)||ob(Da(b,a))}function Pb(a){return new t(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,p){d--;e[m]=p;0==d&&b(e)},g=function(m){c(m)},h=0,l;h<a.length;h++)l=a[h],Nb(l,Da(f,h),g);else b(e)})}function Qb(){var a,b,c=new t(function(d,e){a=d;b=e});return new Rb(c,a,b)}
t.prototype.then=function(a,b,c){return Sb(this,wa(a)?a:null,wa(b)?b:null,c)};t.prototype.$goog_Thenable=!0;k=t.prototype;k.Cb=function(a,b){return Sb(this,null,a,b)};k.cancel=function(a){this.a==Fb&&ob(function(){var b=new Tb(a);Ub(this,b)},this)};
function Ub(a,b){if(a.a==Fb)if(a.w){var c=a.w;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.f||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==Fb&&1==d?Ub(c,b):(f?(d=f,d.next==c.c&&(c.c=d),d.next=d.next.next):Vb(c),Wb(c,e,Ib,b)))}a.w=null}else Gb(a,Ib,b)}function Xb(a,b){a.b||a.a!=Hb&&a.a!=Ib||Yb(a);a.c?a.c.next=b:a.b=b;a.c=b}
function Sb(a,b,c,d){var e=Lb(null,null,null);e.a=new t(function(f,g){e.c=b?function(h){try{var l=b.call(d,h);f(l)}catch(m){g(m)}}:f;e.b=c?function(h){try{var l=c.call(d,h);void 0===l&&h instanceof Tb?g(h):f(l)}catch(m){g(m)}}:g});e.a.w=a;Xb(a,e);return e.a}k.Jc=function(a){this.a=Fb;Gb(this,Hb,a)};k.Kc=function(a){this.a=Fb;Gb(this,Ib,a)};
function Gb(a,b,c){a.a==Fb&&(a===c&&(b=Ib,c=new TypeError("Promise cannot resolve to itself")),a.a=1,Ob(c,a.Jc,a.Kc,a)||(a.m=c,a.a=b,a.w=null,Yb(a),b!=Ib||c instanceof Tb||Zb(a,c)))}function Ob(a,b,c,d){if(a instanceof t)return Xb(a,Lb(b||ta,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(wa(f))return $b(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function $b(a,b,c,d,e){function f(l){h||(h=!0,d.call(e,l))}function g(l){h||(h=!0,c.call(e,l))}var h=!1;try{b.call(a,g,f)}catch(l){f(l)}}function Yb(a){a.h||(a.h=!0,ob(a.ic,a))}function Vb(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.c=null);return b}k.ic=function(){for(var a;a=Vb(this);)Wb(this,a,this.a,this.m);this.h=!1};
function Wb(a,b,c,d){if(c==Ib&&b.b&&!b.f)for(;a&&a.f;a=a.w)a.f=!1;if(b.a)b.a.w=null,ac(b,c,d);else try{b.f?b.c.call(b.context):ac(b,c,d)}catch(e){bc.call(null,e)}Kb.put(b)}function ac(a,b,c){b==Hb?a.c.call(a.context,c):a.b&&a.b.call(a.context,c)}function Zb(a,b){a.f=!0;ob(function(){a.f&&bc.call(null,b)})}var bc=hb;function Tb(a){Ea.call(this,a)}q(Tb,Ea);Tb.prototype.name="cancel";function Rb(a,b,c){this.a=a;this.resolve=b;this.b=c};function cc(a,b){this.a={};this.i=[];this.c=this.b=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof cc)for(c=dc(a),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}k=cc.prototype;k.ba=function(){ec(this);for(var a=[],b=0;b<this.i.length;b++)a.push(this.a[this.i[b]]);return a};function dc(a){ec(a);return a.i.concat()}k.jb=function(){return 0==this.b};
k.clear=function(){this.a={};this.c=this.b=this.i.length=0};k.remove=function(a){return fc(this.a,a)?(delete this.a[a],this.b--,this.c++,this.i.length>2*this.b&&ec(this),!0):!1};function ec(a){if(a.b!=a.i.length){for(var b=0,c=0;b<a.i.length;){var d=a.i[b];fc(a.a,d)&&(a.i[c++]=d);b++}a.i.length=c}if(a.b!=a.i.length){var e={};for(c=b=0;b<a.i.length;)d=a.i[b],fc(e,d)||(a.i[c++]=d,e[d]=1),b++;a.i.length=c}}k.get=function(a,b){return fc(this.a,a)?this.a[a]:b};
k.set=function(a,b){fc(this.a,a)||(this.b++,this.i.push(a),this.c++);this.a[a]=b};k.forEach=function(a,b){for(var c=dc(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};k.clone=function(){return new cc(this)};k.Ra=function(a){ec(this);var b=0,c=this.c,d=this,e=new Ab;e.next=function(){if(c!=d.c)throw Error("The map has changed since the iterator was created");if(b>=d.i.length)throw zb;var f=d.i[b++];return a?f:d.a[f]};return e};
function fc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function gc(a){if(a.ba&&"function"==typeof a.ba)return a.ba();if(sa(a))return a.split("");if(va(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}b=[];c=0;for(d in a)b[c++]=a[d];return b};function hc(a){this.a=new cc;if(a){a=gc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function ic(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+xa(a):b.charAt(0)+a}k=hc.prototype;k.add=function(a){this.a.set(ic(a),a)};k.remove=function(a){return this.a.remove(ic(a))};k.clear=function(){this.a.clear()};k.jb=function(){return this.a.jb()};k.ba=function(){return this.a.ba()};k.clone=function(){return new hc(this)};k.Ra=function(){return this.a.Ra(!1)};function jc(a){var b=kc;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var lc=r("Opera"),mc=r("Trident")||r("MSIE"),nc=r("Edge"),oc=r("Gecko")&&!(Ua(Xa.toLowerCase(),"webkit")&&!r("Edge"))&&!(r("Trident")||r("MSIE"))&&!r("Edge"),pc=Ua(Xa.toLowerCase(),"webkit")&&!r("Edge"),qc=r("Macintosh"),rc=r("Windows"),sc=r("Android"),tc=Eb(),uc=r("iPad"),vc=r("iPod"),wc;
a:{var xc="",yc=function(){var a=Xa;if(oc)return/rv:([^\);]+)(\)|;)/.exec(a);if(nc)return/Edge\/([\d\.]+)/.exec(a);if(mc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(pc)return/WebKit\/(\S+)/.exec(a);if(lc)return/(?:Version)[ \/]?(\S+)/.exec(a)}();yc&&(xc=yc?yc[1]:"");if(mc){var zc,Ac=ra.document;zc=Ac?Ac.documentMode:void 0;if(null!=zc&&zc>parseFloat(xc)){wc=String(zc);break a}}wc=xc}var kc={};function Bc(){return jc(function(){return 0<=Va(wc)})};var Cc=function(){if(rc){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Xa))?a[1]:"0"}return qc?(a=/10[_.][0-9_.]+/,(a=a.exec(Xa))?a[0].replace(/_/g,"."):"10"):sc?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Xa))?a[1]:""):tc||uc||vc?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Xa))?a[1].replace(/_/g,"."):""):""}();var Dc=Eb()||r("iPod"),Ec=r("iPad");
var Fc={};n("lf.ConstraintAction",Fc);Fc.RESTRICT=0;Fc.CASCADE=1;var Gc={};n("lf.ConstraintTiming",Gc);Gc.IMMEDIATE=0;Gc.DEFERRABLE=1;var Hc={};n("lf.Order",Hc);Hc.DESC=0;Hc.ASC=1;var Ic={};n("lf.Type",Ic);Ic.ARRAY_BUFFER=0;Ic.BOOLEAN=1;Ic.DATE_TIME=2;Ic.INTEGER=3;Ic.NUMBER=4;Ic.STRING=5;Ic.OBJECT=6;var Jc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};n("lf.type.DEFAULT_VALUES",Jc);function Kc(a,b){this.O=a;this.u=b||this.a()}var Lc=0;Kc.prototype.id=function(){return this.O};Kc.prototype.a=function(){return{}};Kc.prototype.c=function(){return this.u};function Mc(a){return{id:a.O,value:a.c()}}Kc.prototype.va=function(a){return"#"==a.substr(-1)?this.O:null};function Nc(a){return new Kc(a.id,a.value)}function Oc(a){return new Kc(Lc++,a||{})}
function Pc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};
function v(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}q(v,Error);function Qc(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new v(540,c);this.f=b;this.ya=a.local;this.ma=d[0];this.b=d[1];this.name=b+"."+c;this.c=a.action;this.a=a.timing};function Rc(a,b,c){this.a=a;this.c=b;this.b=c}n("lf.schema.Constraint",Rc);Rc.prototype.mc=function(){return this.a};Rc.prototype.getPrimaryKey=Rc.prototype.mc;Rc.prototype.lc=function(){return this.b};Rc.prototype.getForeignKeys=Rc.prototype.lc;function Sc(){var a;!(a=$a()&&!Bc())&&(a=Ec||Dc)&&(a=!(0<=Va(Cc)));this.a=a;this.b=!(this.a||mc&&!Bc());this.h=ab()||$a();this.c=void 0!==window.Map&&void 0!==window.Map.prototype.values&&void 0!==window.Map.prototype.forEach&&!this.a;this.f=void 0!==window.Set&&void 0!==window.Set.prototype.values&&void 0!==window.Set.prototype.forEach&&!this.a}var Tc;function Uc(){void 0===Tc&&(Tc=new Sc);return Tc};function w(){this.a=new cc;Object.defineProperty(this,"size",{get:function(){return this.a.b}})}w.prototype.clear=function(){this.a.clear()};w.prototype.clear=w.prototype.clear;w.prototype.delete=function(a){return this.a.remove(a)};w.prototype["delete"]=w.prototype.delete;w.prototype.forEach=function(a,b){return this.a.forEach(a,b)};w.prototype.forEach=w.prototype.forEach;w.prototype.get=function(a){return this.a.get(a)};w.prototype.get=w.prototype.get;
w.prototype.has=function(a){return fc(this.a.a,a)};w.prototype.has=w.prototype.has;w.prototype.set=function(a,b){return this.a.set(a,b)};w.prototype.set=w.prototype.set;var Vc=Uc().c;function x(){return Vc?new window.Map:new w}function Wc(a){return a instanceof w?dc(a.a):Array.from(a.keys())}function y(a){return a instanceof w?a.a.ba():Array.from(a.values())};function Xc(a){this.a=new hc(a);Object.defineProperty(this,"size",{get:function(){return this.a.a.b}})}Xc.prototype.add=function(a){this.a.add(a)};Xc.prototype.add=Xc.prototype.add;Xc.prototype.clear=function(){this.a.clear()};Xc.prototype.clear=Xc.prototype.clear;Xc.prototype.delete=function(a){return this.a.remove(a)};Xc.prototype["delete"]=Xc.prototype.delete;Xc.prototype.forEach=function(a,b){this.a.ba().forEach(a,b)};Xc.prototype.has=function(a){a=ic(a);return fc(this.a.a.a,a)};
Xc.prototype.has=Xc.prototype.has;var Yc=Uc().f;function z(a){return Yc?void 0!==a?new window.Set(a):new window.Set:new Xc(a)}function A(a){return a instanceof Xc?a.a.ba():Array.from(a)}function Zc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(d){c=c&&a.has(d)});return c};function $c(){this.a=x();this.size=0}k=$c.prototype;k.has=function(a){return this.a.has(a)};k.set=function(a,b){var c=this.a.get(a)||null;null===c&&(c=z(),this.a.set(a,c));c.has(b)||(c.add(b),this.size++);return this};function ad(a,b,c){var d=a.a.get(b)||null;null===d&&(d=z(),a.a.set(b,d));c.forEach(function(e){d.has(e)||(d.add(e),this.size++)},a)}function bd(a,b){b.keys().forEach(function(c){var d=b.get(c);ad(this,c,d)},a)}
k.delete=function(a,b){var c=this.a.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.a.delete(a);return b};k.get=function(a){a=this.a.get(a)||null;return null===a?null:A(a)};k.clear=function(){this.a.clear();this.size=0};k.keys=function(){return Wc(this.a)};k.values=function(){var a=[];this.a.forEach(function(b){a.push.apply(a,A(b))});return a};function cd(a){this.a=a;this.b=new $c;this.c=new $c;this.s=new $c;this.m=x();this.l=new $c;this.f=new $c;this.K=new $c;this.h=new $c;dd(this)}function dd(a){a.a.W().forEach(function(b){var c=b.g();b.a.b.forEach(function(d){this.s.set(c,this.a.table(d.ma));this.l.set(d.ma,b);0==d.c?(this.c.set(d.ma,d),this.K.set(d.ma,b)):(this.b.set(d.ma,d),this.f.set(d.ma,b));this.m.set(b.g()+"."+d.ya,d.ma);this.h.set(d.ma+"."+d.b,b.g())},this)},a)}
function ed(a,b,c){if(null!=c)return 1==c?a.b.get(b):a.c.get(b);c=a.b.get(b);a=a.c.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function fd(a,b){a=b.get(a);return null===a?[]:a}function gd(a,b){var c=z();b.forEach(function(d){(d=this.m.get(d))&&c.add(d)},a);return A(c).map(function(d){return this.a.table(d)},a)}function hd(a,b,c){return null==c?fd(b,a.l):0==c?fd(b,a.K):fd(b,a.f)}
function id(a,b){var c=z();b.forEach(function(d){(d=this.h.get(d))&&d.forEach(function(e){c.add(e)})},a);return A(c).map(function(d){return this.a.table(d)},a)};var jd={};n("lf.schema.DataStoreType",jd);jd.INDEXED_DB=0;jd.MEMORY=1;jd.LOCAL_STORAGE=2;jd.FIREBASE=3;jd.WEB_SQL=4;jd.OBSERVABLE_STORE=5;function kd(a,b,c,d){this.b=a;this.name=b;this.Ya=c;this.a=d}kd.prototype.o=function(){return this.b+"."+this.name};function ld(a){return a.a.some(function(b){return b.S.Na()})}function C(a,b,c,d){this.b=a;this.h=c;this.f=b;this.m=d;this.ja=null}n("lf.schema.Table",C);C.prototype.g=function(){return this.b};C.prototype.getName=C.prototype.g;
function md(a){return a.ja||a.b}C.prototype.as=function(a){var b=new this.constructor(this.b);b.ja=a;b.Fc=this.Fc;return b};C.prototype.as=C.prototype.as;C.prototype.createRow=C.prototype.Aa;C.prototype.deserializeRow=C.prototype.sa;C.prototype.ga=function(){return this.h};C.prototype.getIndices=C.prototype.ga;C.prototype.ta=function(){return this.f};C.prototype.getColumns=C.prototype.ta;C.prototype.getConstraint=C.prototype.Jb;C.prototype.Fa=function(){return this.m};
C.prototype.persistentIndex=C.prototype.Fa;function nd(a){return a.b+".#"};function E(a,b){this.a=a;this.b=b;this.ja=null}k=E.prototype;k.g=function(){return this.b+"("+this.a.g()+")"};k.o=function(){return this.b+"("+this.a.o()+")"};k.X=function(){return this.a.X()};k.toString=function(){return this.o()};k.D=function(){return this.a.D()};k.Oa=function(){return this.ja};k.ga=function(){return[]};k.$a=function(){return null};k.Na=function(){return!1};k.as=function(a){this.ja=a;return this};E.prototype.as=E.prototype.as;
function od(a){for(var b=[a];a instanceof E;)b.push(a.a),a=a.a;return b}function pd(){this.ja=null;this.a=new C("#UnknownTable",[],[],!1)}k=pd.prototype;k.g=function(){return"*"};k.o=function(){return this.g()};k.toString=function(){return this.o()};k.X=function(){return this.a};k.D=function(){return 4};k.Oa=function(){return this.ja};k.ga=function(){return[]};k.$a=function(){return null};k.Na=function(){return!1};function F(a,b,c,d,e){this.f=a;this.c=b;this.h=c;this.b=d;this.a=e}n("lf.TransactionStats",F);F.prototype.Hc=function(){return this.f};F.prototype.success=F.prototype.Hc;F.prototype.tc=function(){return this.c};F.prototype.insertedRowCount=F.prototype.tc;F.prototype.Lc=function(){return this.h};F.prototype.updatedRowCount=F.prototype.Lc;F.prototype.fc=function(){return this.b};F.prototype.deletedRowCount=F.prototype.fc;F.prototype.bc=function(){return this.a};F.prototype.changedTableCount=F.prototype.bc;var qd={};n("lf.TransactionType",qd);qd.READ_ONLY=0;qd.READ_WRITE=1;function rd(a){this.da=x();this.Y=x();this.ea=x();this.a=a}k=rd.prototype;k.g=function(){return this.a};k.add=function(a){if(this.ea.has(a.id())){var b=[this.ea.get(a.id()),a];this.Y.set(a.id(),b);this.ea.delete(a.id())}else this.da.set(a.id(),a)};k.modify=function(a){var b=a[1],c=a[0].id();this.da.has(c)?this.da.set(c,b):this.Y.has(c)?(a=[this.Y.get(a[0].id())[0],b],this.Y.set(c,a)):this.Y.set(c,a)};
k.delete=function(a){if(this.da.has(a.id()))this.da.delete(a.id());else if(this.Y.has(a.id())){var b=this.Y.get(a.id())[0];this.Y.delete(a.id());this.ea.set(a.id(),b)}else this.ea.set(a.id(),a)};function sd(a){var b=[];a.da.forEach(function(c){b.push([null,c])});a.Y.forEach(function(c){b.push(c)});a.ea.forEach(function(c){b.push([c,null])});return b}k.toString=function(){return"["+Wc(this.da).toString()+"], ["+Wc(this.Y).toString()+"], ["+Wc(this.ea).toString()+"]"};
function td(a){var b=new rd(a.a);a.da.forEach(function(c){b.delete(c)});a.ea.forEach(function(c){b.add(c)});a.Y.forEach(function(c){b.modify([c[1],c[0]])});return b}k.jb=function(){return 0==this.da.size&&0==this.ea.size&&0==this.Y.size};function ud(){this.a=0;this.b=null}ud.prototype.add=function(a,b){this.a+=b;this.b=null===this.b?a:a>this.b?a:this.b};ud.prototype.remove=function(a,b){this.a-=b};ud.prototype.clear=function(){this.a=0};function vd(a,b){a.clear();b.forEach(function(c){this.a+=c.a},a)};function wd(a,b){this.m=a;this.b=b||null;this.J=Qb();this.K=!1;this.h=null}wd.prototype.U=function(){return(0==this.m?this.f():xd(this)).then(function(a){this.K=!0;return a}.bind(this))};function xd(a){try{yd(a.b)}catch(b){return Mb(b)}return zd(a).then(function(b){this.b.U();return b}.bind(a))}function zd(a){Ad(a);Bd(a);return a.f()}
function Ad(a){a.b.b.forEach(function(b,c){c=this.b.f.get(c);c=this.a(c.g(),c.sa.bind(c));var d=y(b.ea).map(function(f){return f.id()});b=y(b.Y).map(function(f){return f[1]}).concat(y(b.da));var e=0<b.length;0<d.length&&c.remove(d,e).Cb(this.s,this);c.put(b).Cb(this.s,this)},a)}function Bd(a){Cd(a.b).forEach(function(b){var c=this.a(b.g(),Nc);c.remove([]);c.put(b.lb())},a)}wd.prototype.s=function(a){this.J.b(a)};
wd.prototype.M=function(){if(null===this.h)if(this.K)if(0==this.m)this.h=new F(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.b.b.forEach(function(e){d++;a+=e.da.size;c+=e.Y.size;b+=e.ea.size});this.h=new F(!0,a,c,b,d)}else this.h=new F(!1,0,0,0,0);return this.h};function Dd(a,b){this.O=a;this.a=b||{}}Dd.prototype.N=function(){return this.O};function Ed(a){return new Dd(a.id,JSON.parse(a.value))};function Fd(a){this.a=a}Fd.prototype.toString=function(){return this.a};var Gd=new Fd("backstore"),Hd=new Fd("cache"),Id=new Fd("indexstore"),Jd=new Fd("engine"),Kd=new Fd("runner"),Ld=new Fd("observerregistry"),Md=new Fd("schema");function Nd(a){this.a=a.j(Hd);this.b=a.j(Id);this.c=a.j(Md)}Nd.prototype.update=function(a){a.forEach(function(b){Od(this,b);Pd(this,b)},this)};function Pd(a,b){var c=b.g();b.ea.forEach(function(d,e){this.a.remove(c,e)},a);b.da.forEach(function(d){this.a.set(c,d)},a);b.Y.forEach(function(d){this.a.set(c,d[1])},a)}function Od(a,b){var c=a.c.table(b.g());sd(b).forEach(function(d){Qd(this,c,d)},a)}
function Qd(a,b,c){var d=a.b.a.get(b.g())||[],e=0;d.forEach(function(f){try{Rd(f,c),e++}catch(g){throw d.slice(0,e).forEach(function(h){Rd(h,[c[1],c[0]])},this),g;}},a)}
function Rd(a,b){var c=null===b[1]?void 0:b[1].va(a.g()),d=null===b[0]?void 0:b[0].va(a.g());if(void 0===d&&void 0!==c)a.add(c,b[1].id());else if(void 0!==d&&void 0!==c){if(null===c||null===d){if(c==d)return}else if(0==a.ra().Qa(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else void 0!==d&&void 0===c&&a.remove(d,b[0].id())};function Sd(a){this.c=a.j(Id);this.b=a.j(Md);this.f=a.j(Hd);this.a=null}function Td(a,b,c){var d=b.a.c;c.forEach(function(e){d.forEach(function(f){if(null==e.u[f.g()])throw new v(202,f.o());},this)},a)}function Ud(a,b,c,d){b.a.b.forEach(function(e){e.a==d&&Vd(this,e,c)},a)}function Vd(a,b,c){var d=Wd(a,b);c.forEach(function(e){if(Xd(e[0],e[1],b.name)&&(e=e[1].va(b.name),null!==e&&!d.Pa(e)))throw new v(203,b.name);},a)}
function Wd(a,b){null===a.a&&(a.a=x());var c=a.a.get(b.name)||null;null===c&&(c=a.b.table(b.ma)[b.b].$a(),c=a.c.get(c.o()),a.a.set(b.name,c));return c}function Xd(a,b,c){return(null===a?null!==b:null===b)||a.va(c)!=b.va(c)}function Yd(a,b,c,d){b=ed(Zd(a.b),b.g(),0);null!==b&&(b=b.filter(function(e){return e.a==d}),0!=b.length&&$d(a,b,c,function(e,f,g){if(f.Pa(g))throw new v(203,e.name);}))}
function ae(a,b,c){b=ed(Zd(a.b),b.g(),1);if(null===b)return null;var d=new $c;$d(a,b,c,function(e,f,g){f=f.get(g);0<f.length&&ad(d,e.f,f)});return d}function be(a,b,c){var d=new $c;$d(a,c,b,function(e,f,g,h){f.get(g).forEach(function(l){d.set(l,{qb:e,Cc:h[1]})})});return d}function $d(a,b,c,d){b.forEach(function(e){var f=this.c.get(e.name),g=Wd(this,e);c.forEach(function(h){if(Xd(h[0],h[1],g.g())){var l=h[0].va(g.g());d(e,f,l,h)}},this)},a)}
function ce(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[null,e]}),Ud(a,b,c,d))}function de(a,b,c,d){0!=c.length&&(Ud(a,b,c,d),Yd(a,b,c,d))}function ee(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[e,null]}),Yd(a,b,c,d))}
function fe(a,b,c){var d={Bb:[],Rb:new $c},e=new $c;ad(e,b.g(),c.map(function(g){return g.id()}));do{var f=new $c;e.keys().forEach(function(g){var h=this.b.table(g);g=e.get(g).map(function(l){return[this.f.get(l),null]},this);h=ae(this,h,g);null!==h&&(d.Bb.unshift.apply(d.Bb,h.keys()),bd(f,h))},a);e=f;bd(d.Rb,e)}while(0<e.size);return d};function ge(a,b){this.f=x();b.forEach(function(c){this.f.set(c.g(),c)},this);this.h=a.j(Md);this.c=a.j(Hd);this.s=a.j(Id);this.a=new Sd(a);this.m=new Nd(a);this.b=x()}function Cd(a){var b=[];Wc(a.b).map(function(c){return this.f.get(c)},a).forEach(function(c){c.Fa()&&(c.ga().forEach(function(d){b.push(this.s.get(d.o()))},this),b.push(this.s.get(c.g()+".#")))},a);return b}k=ge.prototype;k.Ca=function(a,b){he(this,a);Td(this.a,a,b);ce(this.a,a,b,0);for(var c=0;c<b.length;c++)ie(this,a,[null,b[c]])};
function ie(a,b,c){var d=b.g(),e=a.b.get(d)||new rd(d);a.b.set(d,e);try{Qd(a.m,b,c)}catch(g){throw g;}b=c[0];var f=c[1];null===b&&null!==f?(a.c.set(d,f),e.add(f)):null!==b&&null!==f?(a.c.set(d,f),e.modify(c)):null!==b&&null===f&&(a.c.remove(d,b.id()),e.delete(b))}k.update=function(a,b){he(this,a);Td(this.a,a,b);b=b.map(function(c){return[this.c.get(c.id()),c]},this);je(this,a,b);de(this.a,a,b,0);b.forEach(function(c){ie(this,a,c)},this)};
k.rb=function(a,b){he(this,a);Td(this.a,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.a.a;if(null===f)var g=null;else{g=this.a;var h=d;f=f.o();h=h.va(f);g=g.c.get(f).get(h);g=0==g.length?null:g[0]}null!=g?(e=this.c.get(g),d.O=g,de(this.a,a,[[e,d]],0)):ce(this.a,a,[d],0);ie(this,a,[e,d])}};k.remove=function(a,b){he(this,a);ke(this,a,b);ee(this.a,a,b,0);for(var c=0;c<b.length;c++)ie(this,a,[b[c],null])};
function je(a,b,c){b=ed(Zd(a.h),b.g(),1);if(null!==b){var d=be(a.a,c,b);d.keys().forEach(function(e){d.get(e).forEach(function(f){var g=this.h.table(f.qb.f),h=this.c.get(e),l=g.sa(Mc(h));l.u[f.qb.ya]=f.Cc.u[f.qb.b];ie(this,g,[h,l])},this)},a)}}function ke(a,b,c){if(null!==ed(Zd(a.h),b.g(),1)){b=fe(a.a,b,c);var d=b.Rb;b.Bb.forEach(function(e){var f=this.h.table(e);e=d.get(e).map(function(g){return this.c.get(g)},this);ee(this.a,f,e,0);e.forEach(function(g){ie(this,f,[g,null])},this)},a)}}
function yd(a){a.b.forEach(function(b){var c=this.f.get(b.g());ce(this.a,c,y(b.da),1);ee(this.a,c,y(b.ea),1);de(this.a,c,y(b.Y),1)},a)}k.U=function(){};k.La=function(){var a=y(this.b).map(function(b){return td(b)});this.m.update(a)};function he(a,b){if(!a.f.has(b.g()))throw new v(106,b.g());};function le(a,b){this.a=a;this.b=b}le.prototype.na=function(){return this.a};function me(a){var b=z();a.forEach(function(c){c.b.forEach(b.add.bind(b))});return b};n("lf.bind",function(a){return new ne(a)});function ne(a){this.a=a}n("lf.Binder",ne);function oe(){this.b=pe();var a=qe();this.a=x();this.a.set(1,re());this.a.set(2,se());this.a.set(4,a);this.a.set(3,a);this.a.set(5,te());this.a.set(6,ue())}var ve;function we(){null==ve&&(ve=new oe);return ve}function xe(a,b,c){a=a.a.get(b)||null;if(null===a)throw new v(550);c=a.get(c)||null;if(null===c)throw new v(550);return c}
function pe(){function a(c){return c}var b=x();b.set(1,function(c){return null===c?null:c?1:0});b.set(2,function(c){return null===c?null:c.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function re(){var a=x();a.set("eq",function(b,c){return b==c});a.set("neq",function(b,c){return b!=c});return a}
function qe(){var a=re();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b>=c[0]&&b<=c[1]});a.set("gte",function(b,c){return null===b||null===c?!1:b>=c});a.set("gt",function(b,c){return null===b||null===c?!1:b>c});a.set("in",function(b,c){return-1!=c.indexOf(b)});a.set("lte",function(b,c){return null===b||null===c?!1:b<=c});a.set("lt",function(b,c){return null===b||null===c?!1:b<c});return a}
function te(){var a=qe();a.set("match",function(b,c){return null===b||null===c?!1:(new RegExp(c)).test(b)});return a}function ue(){var a=x();a.set("eq",function(b,c){if(null!==c)throw new v(550);return null===b});a.set("neq",function(b,c){if(null!==c)throw new v(550);return null!==b});return a}
function se(){var a=x();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b.getTime()>=c[0].getTime()&&b.getTime()<=c[1].getTime()});a.set("eq",function(b,c){return(null===b?-1:b.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(b,c){return null===b||null===c?!1:b.getTime()>=c.getTime()});a.set("gt",function(b,c){return null===b||null===c?!1:b.getTime()>c.getTime()});a.set("in",function(b,c){return c.some(function(d){return d.getTime()==b.getTime()})});a.set("lte",
function(b,c){return null===b||null===c?!1:b.getTime()<=c.getTime()});a.set("lt",function(b,c){return null===b||null===c?!1:b.getTime()<c.getTime()});a.set("neq",function(b,c){return(null===b?-1:b.getTime())!=(null===c?-1:c.getTime())});return a};function ye(a,b,c,d){this.from=a;this.C=b;this.V=this.from==I?!1:c;this.Z=this.C==I?!1:d}var I=new function(){};ye.prototype.toString=function(){return(this.V?"(":"[")+(this.from==I?"unbound":this.from)+", "+(this.C==I?"unbound":this.C)+(this.Z?")":"]")};function ze(a){if(Ae(a))return[];var b=null,c=null;a.from==I||(b=new ye(I,a.from,!1,!a.V));a.C==I||(c=new ye(a.C,I,!a.Z,!1));return[b,c].filter(function(d){return null!==d})}ye.prototype.reverse=function(){return new ye(this.C,this.from,this.Z,this.V)};
function Be(a,b){var c=Ce(a.from,b.from,!0,a.V,b.V);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.C==I||d.C>a.from||d.C==a.from&&!d.Z&&!a.V}function De(){return new ye(I,I,!1,!1)}function Ae(a){return a.from==I&&a.C==I}function Ee(a){return a.from==a.C&&a.from!=I&&!a.V&&!a.Z}function Ce(a,b,c,d,e){function f(g){return c?g:1==g?-1:1}d=d||!1;e=e||!1;return a==I?b==I?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==I?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}
function Fe(a,b){var c=Ce(a.from,b.from,!0,a.V,b.V);0==c&&(c=Ce(a.C,b.C,!1,a.Z,b.Z));return c}function Ge(a){if(0==a.length)return[];a.sort(Fe);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new ye(I,a[c].from,!1,!0):c==b.length-1?new ye(a[c-1].C,I,!0,!1):new ye(a[c-1].C,a[c].from,!0,!0);return b};function He(a){this.a=[];void 0!==a&&this.add(a)}He.prototype.toString=function(){return this.a.map(function(a){return a.toString()}).join(",")};He.prototype.ba=function(){return this.a};
He.prototype.add=function(a){if(0!=a.length)if(a=this.a.concat(a),1==a.length)this.a=a;else{a.sort(Fe);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Be(c,a[d])){var e=a[d],f=De();if(c.from!=I&&e.from!=I){var g=Ce(c.from,e.from,!0);1!=g?(f.from=c.from,f.V=0!=g?c.V:c.V&&e.V):(f.from=e.from,f.V=e.V)}c.C!=I&&e.C!=I&&(g=Ce(c.C,e.C,!1),-1!=g?(f.C=c.C,f.Z=0!=g?c.Z:c.Z&&e.Z):(f.C=e.C,f.Z=e.Z));c=f}else b.push(c),c=a[d];b.push(c);this.a=b}};
function Ie(a,b){var c=[];a.ba().map(function(d){return b.ba().map(function(e){if(Be(d,e)){var f=De();var g=Ce(d.from,e.from,!0);g=0==g?d.V?d:e:-1!=g?d:e;f.from=g.from;f.V=g.V;d.C==I||e.C==I?e=d.C==I?e:d:(g=Ce(d.C,e.C,!1),e=0==g?d.Z?d:e:-1==g?d:e);f.C=e.C;f.Z=e.Z}else f=null;return f})}).forEach(function(d){c=c.concat(d)});return new He(c.filter(function(d){return null!==d}))};function J(){this.l=this.w=null}var Je=[];J.prototype.getParent=function(){return this.w};J.prototype.na=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Ke(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function K(a){return a.l||Je}function Le(a,b){return K(a)[b]||null}function Me(a,b,c){b.w=a;null===a.l?a.l=[b]:a.l.splice(c,0,b)}function L(a,b){b.w=a;null===a.l?a.l=[b]:a.l.push(b)}
function Ne(a,b){var c=a.l&&a.l[b];return c?(c.w=null,a.l.splice(b,1),0==a.l.length&&(a.l=null),c):null}J.prototype.removeChild=function(a){return Ne(this,K(this).indexOf(a))};function Oe(a,b,c){Le(a,c).w=null;b.w=a;a.l[c]=b}function Pe(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(d){Pe(d,b,c)})};function Qe(){J.call(this);this.O=Re++}q(Qe,J);var Re=0;Qe.prototype.N=function(){return this.O};function M(a,b){this.entries=a;this.b=z(b);this.a=null}M.prototype.A=function(){return A(this.b)};function Se(a){return a.entries.map(function(b){return b.aa.u})}function Te(a){return a.entries.map(function(b){return b.aa.id()})}function Ue(a,b){return a.a.get(b.o())}var Ve=null;function We(){null===Ve&&(Ve=new M([],[]));return Ve}
function Xe(a){if(0==a.length)return We();var b=a.reduce(function(g,h){return g+h.entries.length},0),c=Array(b),d=0;b=a.map(function(g){var h=x();g.entries.forEach(function(l){c[d++]=l;h.set(l.id,l)});return h});for(var e=x(),f=0;f<c.length;f++)b.every(function(g){return g.has(c[f].id)})&&e.set(c[f].id,c[f]);return new M(y(e),A(a[0].b))}function Ye(a){if(0==a.length)return We();var b=x();a.forEach(function(c){c.entries.forEach(function(d){b.set(d.id,d)})});return new M(y(b),A(a[0].b))}
function Ze(a,b){var c=1<b.length;a=a.map(function(d){return new $e(d,c)});return new M(a,b)}function $e(a,b){this.aa=a;this.id=af++;this.tb=b}var af=0;function N(a,b){var c=b.Oa();return null!==c&&a.aa.u.hasOwnProperty(c)?a.aa.u[c]:a.tb?a.aa.u[md(b.X())][b.g()]:a.aa.u[b.g()]}function bf(a,b,c){var d=b.Oa();if(null!=d)a.aa.u[d]=c;else if(a.tb){d=md(b.X());var e=a.aa.u[d];null==e&&(e={},a.aa.u[d]=e);e[b.g()]=c}else a.aa.u[b.g()]=c}
function cf(a,b,c,d){function e(g,h){if(g.tb){g=g.aa.u;for(var l in g)f[l]=g[l]}else f[h[0]]=g.aa.u}var f={};e(a,b);e(c,d);a=new Kc(-1,f);return new $e(a,!0)};function df(a,b,c){Qe.call(this);this.F=a;this.value=b;this.a=c;this.f=xe(we(),this.F.D(),this.a);this.b=!1;this.c=b}q(df,Qe);k=df.prototype;k.Ma=function(){var a=new df(this.F,this.value,this.a);a.c=this.c;a.nb(this.b);var b=this.N();a.O=b;return a};k.ta=function(a){return null!=a?(a.push(this.F),a):[this.F]};k.A=function(a){a=null!=a?a:z();a.add(this.F.X());return a};k.nb=function(a){this.b=a};
function ef(a){var b=!1;a.value instanceof ne||(b="array"==ua(a.value)?!a.value.some(function(c){return c instanceof ne}):!0);if(!b)throw new v(501);}k.eval=function(a){ef(this);if("in"==this.a)return ff(this,a);var b=a.entries.filter(function(c){return this.f(N(c,this.F),this.value)!=this.b},this);return new M(b,a.A())};
k.bind=function(a){if(this.c instanceof ne){var b=this.c.a;if(a.length<=b)throw new v(510);this.value=a[b]}else"array"==ua(this.c)&&(this.value=this.c.map(function(c){if(c instanceof ne){if(a.length<=c.a)throw new v(510);return a[c.a]}return c}))};function ff(a,b){var c=z(a.value),d=function(e){return null===e?!1:c.has(e)!=this.b}.bind(a);a=b.entries.filter(function(e){return d(N(e,this.F))},a);return new M(a,b.A())}
k.toString=function(){return"value_pred("+this.F.o()+" "+this.a+(this.b?"(complement)":"")+" "+this.value+")"};function gf(a){ef(a);return null!==a.value&&("between"==a.a||"in"==a.a||"eq"==a.a||"gt"==a.a||"gte"==a.a||"lt"==a.a||"lte"==a.a)}
k.Db=function(){var a=null;if("between"==this.a)a=new ye(hf(this,this.value[0]),hf(this,this.value[1]),!1,!1);else{if("in"==this.a)return a=this.value.map(function(b){return new ye(b,b,!1,!1)}),new He(this.b?Ge(a):a);a=hf(this,this.value);a="eq"==this.a?new ye(a,a,!1,!1):"gte"==this.a?new ye(a,I,!1,!1):"gt"==this.a?new ye(a,I,!0,!1):"lte"==this.a?new ye(I,a,!1,!1):new ye(I,a,!1,!0)}return new He(this.b?ze(a):[a])};function hf(a,b){return 2==a.F.D()?b.getTime():b};function jf(a){this.S=a;this.h=this.s=null}function kf(a,b){null===a.s&&null!=a.B&&(a.s=mf(a.B));return a.s.get(b)||null}function mf(a){var b=x();Pe(a,function(c){b.set(c.N(),c)});return b}function nf(a,b){b.B&&(a.B=b.B.Ma());a.h=b}jf.prototype.bind=function(){return this};function of(a,b){a=a.B;null!=a&&Pe(a,function(c){c instanceof df&&c.bind(b)})};function pf(a){jf.call(this,a)}q(pf,jf);function qf(a){var b="";a.forEach(function(c,d){b+=c.F.o()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}pf.prototype.m=function(){return z(this.from)};pf.prototype.clone=function(){var a=new pf(this.S);nf(a,this);this.a&&(a.a=this.a.slice());this.from&&(a.from=this.from.slice());a.L=this.L;a.G=this.G;this.H&&(a.H=this.H.slice());this.$&&(a.$=this.$.slice());this.f&&(a.f=this.f);this.c&&(a.c=this.c);a.b=this.b;return a};
pf.prototype.bind=function(a){pf.qa.bind.call(this,a);null!=this.f&&(this.L=a[this.f.a]);null!=this.c&&(this.G=a[this.c.a]);of(this,a);return this};function rf(a,b){this.h=a;this.K=a.j(Gd);this.a=b.map(function(c){return c.context});this.s=b.map(function(c){return c.xb});this.b=me(this.s);this.f=sf(this);this.la=Qb()}function sf(a){return a.a.some(function(b){return!(b instanceof pf)})?1:0}k=rf.prototype;
k.exec=function(){function a(){var f=d.shift();if(f){var g=e[c.length];return f.na().exec(b,g).then(function(h){c.push(h[0]);return a()})}return u()}var b=0==this.f?void 0:new ge(this.h,this.b),c=[],d=this.s.slice(),e=this.a;return a().then(function(){this.c=this.K.Ha(this.f,A(this.b),b);return this.c.U()}.bind(this)).then(function(){this.wb(c);return c}.bind(this),function(f){null!=b&&b.La();throw f;})};k.D=function(){return this.f};k.pa=function(){return this.b};k.Ia=function(){return this.la};
k.N=function(){return xa(this)};k.wb=function(){};k.M=function(){var a=null;null!=this.c&&(a=this.c.M());return null===a?new F(!1,0,0,0,0):a};function tf(a,b){rf.call(this,a,b);this.m=a.j(Ld)}q(tf,rf);tf.prototype.wa=function(){return 0};tf.prototype.wb=function(a){this.a.forEach(function(b,c){uf(this.m,b,a[c])},this)};function vf(a,b){this.c=a;this.h=a.j(Ld);this.s=a.j(Kd);this.f=new Nd(a);this.b=b;var c=a.j(Md);a=this.b.map(function(d){return c.table(d.g())});this.a=z(a);this.m=Qb()}k=vf.prototype;k.exec=function(){this.f.update(this.b);var a=wf(this.h,this.a);0!=a.length&&(a=new tf(this.c,a),xf(this.s,a));return u()};k.D=function(){return 1};k.pa=function(){return this.a};k.Ia=function(){return this.m};k.N=function(){return xa(this)};k.wa=function(){return 1};function yf(a){this.b=a;this.a=a.j(Gd);this.c=a.j(Kd)}yf.prototype.f=function(a){a=new vf(this.b,a);xf(this.c,a)};
function P(a,b){this.f=a;this.a=b;this.b=x()}n("lf.backstore.FirebaseRawBackStore",P);P.prototype.hb=function(){return this.a};P.prototype.ib=function(){throw new v(351);};function zf(a,b){var c=Qb(),d=a;b.length&&(d=a.child(b));d.once("value",function(e){c.resolve(e.val())},function(e){c.b(e)});return c.a}function Af(a,b,c){function d(f){f?e.b(f):e.resolve()}c=c||!1;var e=Qb();c?a.set(b,d):a.update(b,d);return e.a}
P.prototype.ca=function(a){return zf(this.a,"@rev/R").then(function(b){this.c=b;return zf(this.a,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.b.set(d,b[d]),b[d]>c&&(c=b[d]);a.W().forEach(function(e){this.b.has(e.g())||(b[e.g()]=++c)},this);var d=this.a.child("@table");return Af(d,b)}.bind(this))};
function Bf(a,b,c){var d=a.b.get(b);return null==d?u():function(){var e={},f=Qb();this.a.orderByChild("T").equalTo(d).once("value",function(g){g.forEach(function(h){var l=c(h.val());e[parseInt(h.key(),10)]=l});f.resolve(e)});return f.a}.call(a).then(function(e){e["@rev"]={R:++this.c};return Af(this.a,e)}.bind(a))}P.prototype.Ta=function(a){return Bf(this,a,function(){return null}).then(function(){this.b.delete(a);return Af(this.a.child("@table/"+a),null,!0)}.bind(this))};P.prototype.dropTable=P.prototype.Ta;
P.prototype.Sa=function(a,b,c){return Bf(this,a,function(d){var e=d.P;e[b]=c;return{R:this.c+1,T:d.T,P:e}}.bind(this))};P.prototype.addTableColumn=P.prototype.Sa;P.prototype.Ua=function(a,b){return Bf(this,a,function(c){var d=c.P;delete d[b];return{R:this.c+1,T:c.T,P:d}}.bind(this))};P.prototype.dropTableColumn=P.prototype.Ua;P.prototype.bb=function(a,b,c){return Bf(this,a,function(d){var e=d.P;e[c]=e[b];delete e[b];return{R:this.c+1,T:d.T,P:e}}.bind(this))};P.prototype.renameTableColumn=P.prototype.bb;
P.prototype.Aa=function(){throw new v(351);};P.prototype.createRow=P.prototype.Aa;P.prototype.Xa=function(){return this.f};P.prototype.getVersion=P.prototype.Xa;function Cf(a,b){var c=Qb();b=a.b.get(b);a.a.orderByChild("T").equalTo(b).once("value",function(d){var e=[];d.forEach(function(f){e.push(f.val().P)});c.resolve(e)});return c.a}P.prototype.dump=function(){var a={},b=Wc(this.b).map(function(c){return Cf(this,c).then(function(d){a[c]=d})}.bind(this));return Pb(b).then(function(){return a})};
P.prototype.dump=P.prototype.dump;function Df(a,b,c){wd.call(this,b,c);this.c=a}q(Df,wd);Df.prototype.a=function(a){return this.c.Va(a)};
Df.prototype.f=function(){if(0==this.m)return this.J.resolve(),this.J.a;var a=this.b.b;if(0==a.size)this.J.resolve();else{var b=this.c.c+1;this.c.c=b;var c={"@rev":{R:b}};a.forEach(function(d,e){var f=this.c.h.get(e);d.da.forEach(function(g,h){c[h]={R:b,T:f,P:g.u}});d.Y.forEach(function(g,h){c[h]={R:b,T:f,P:g[1].u}});d.ea.forEach(function(g,h){c[h]=null})},this);this.c.a.update(c,function(d){null!==d?(this.c.c=b-1,d=y(a).map(function(e){return Ef(this.c,e.g())},this),Pb(d).then(this.J.b.bind(this.J),
this.J.b.bind(this.J))):this.J.resolve()}.bind(this))}return this.J.a};function Ff(){this.a=x()}function Gf(a,b){if(0==b.length)return y(a.a);var c=[];b.forEach(function(d){d=this.a.get(d)||null;null!==d&&c.push(d)},a);return c}Ff.prototype.getData=function(){return this.a};Ff.prototype.get=function(a){return u(Gf(this,a))};function Hf(a,b){b.forEach(function(c){this.a.set(c.id(),c)},a)}Ff.prototype.put=function(a){Hf(this,a);return u()};function If(a,b){0==b.length||b.length==a.a.size?a.a.clear():b.forEach(function(c){this.a.delete(c)},a)}
Ff.prototype.remove=function(a){If(this,a);return u()};function Jf(a){return 0==a.a.size?0:Wc(a.a).reduce(function(b,c){return b>c?b:c},0)};
function Kf(a,b){this.b=a;this.la=b;this.m=x();this.c=-1;this.f=x();this.h=x();this.s=null}k=Kf.prototype;
k.ca=function(a){this.a=this.la.child(this.b.name());var b=a||function(){return u()};return zf(this.a,"@db/version").then(function(c){return null===c?Af(this.a,Lf(this),!0).then(function(){var d=new P(0,this.a);return b(d)}.bind(this)).then(function(){return this.ca()}.bind(this)):c==this.b.version()?zf(this.a,"@rev/R").then(function(d){this.c=d;return zf(this.a,"@table")}.bind(this)).then(function(d){for(var e in d)this.h.set(e,d[e]);d=this.b.W().map(function(f){return Ef(this,f.g())},this);return Pb(d)}.bind(this)).then(function(){Mf(this);
Nf(this);return u()}.bind(this)):Of(this,c,b).then(function(){return this.ca()}.bind(this))}.bind(this))};function Of(a,b,c){var d=new P(b,a.a);return d.ca(a.b).then(function(){return u()}.bind(a)).then(function(){return c(d)}).then(function(){var e=this.a.child("@db");return Af(e,{version:this.b.version()},!0)}.bind(a))}function Nf(a){a.a.off();a.a.on("child_removed",a.Bc.bind(a));a.K&&(a.K.off(),a.m.clear());a.K=a.a.orderByChild("R").startAt(a.c+1);a.K.on("value",a.xc.bind(a))}
function Mf(a){Lc=y(a.f).map(function(b){return Jf(b)}).reduce(function(b,c){return b>c?b:c},0)+1}k.Bc=function(a){var b=a.val(),c=this.m.get(b.T)||null;null===c&&(c=z(),this.m.set(b.T,c));c.add(parseInt(a.key(),10))};k.xc=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.c&&(this.c=b,a=Pf(this,a),a.forEach(function(c){var d=this.f.get(c.g()),e=Wc(c.ea);0<e.length&&If(d,e);var f=y(c.da);c.Y.forEach(function(g){f.push(g[1])});Hf(d,f)},this),0<a.length&&this.notify(a),Nf(this))};
function Pf(a,b){var c=z(),d=x();a.h.forEach(function(e,f){var g=this.f.get(f),h=new rd(f);this.m.has(e)&&(f=A(this.m.get(e)),f.forEach(function(l){c.add(l)}),Gf(g,f).forEach(function(l){h.delete(l)}));d.set(e,h)}.bind(a));b.forEach(function(e){if("@rev"!=e.key()){var f=parseInt(e.key(),10);if(!c.has(f)){var g=e.val();e=d.get(g.T);var h=this.f.get(e.g());g=this.b.table(e.g()).sa({id:f,value:g.P});h.getData().has(f)?e.modify([Gf(h,[f])[0],g]):e.add(g)}}}.bind(a));return y(d).filter(function(e){return!e.jb()})}
function Ef(a,b){var c=Qb(),d=a.h.get(b),e=a.b.table(b);a.a.orderByChild("T").equalTo(d).once("value",function(f){var g=new Ff,h=[];f.forEach(function(l){h.push(e.sa({id:parseInt(l.key(),10),value:l.val().P}))});Hf(g,h);this.f.set(b,g);c.resolve()}.bind(a));return c.a}function Lf(a){var b={};b["@db"]={version:a.b.version()};b["@rev"]={R:1};a.c=1;b["@table"]={};a.b.W().forEach(function(c,d){c=c.g();b["@table"][c]=d;this.f.set(c,new Ff);this.h.set(c,d)},a);return b}
k.Ha=function(a,b,c){return new Df(this,a,c)};k.Va=function(a){var b=this.f.get(a)||null;if(null!==b)return b;throw new v(101,a);};k.close=function(){};k.Za=function(a){this.s=a};k.notify=function(a){null!=this.s&&this.s(a)};k.cb=function(){return!1};function Q(a,b,c){this.a=b;this.b=c;this.c=a}n("lf.backstore.IndexedDBRawBackStore",Q);Q.prototype.hb=function(){return this.a};Q.prototype.getRawDBInstance=Q.prototype.hb;Q.prototype.ib=function(){return this.b};Q.prototype.getRawTransaction=Q.prototype.ib;Q.prototype.Ta=function(a){return new t(function(b,c){try{this.a.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};Q.prototype.dropTable=Q.prototype.Ta;
function Qf(a,b,c,d){return new t(function(e,f){try{var g=this.b.objectStore(b);var h=g.openCursor()}catch(l){f(l);return}h.onsuccess=function(){var l=h.result;l?(c(l),l.continue()):(d(g),e())};h.onerror=f},a)}function Rf(a){var b=null;a instanceof ArrayBuffer?b=Pc(a):a instanceof Date?b=a.getTime():b=a;return b}function Sf(a,b,c){return Qf(a,b,function(d){var e=Nc(d.value);c(e);d.update(Mc(e))},function(){})}Q.prototype.Sa=function(a,b,c){var d=Rf(c);return Sf(this,a,function(e){e.u[b]=d})};
Q.prototype.addTableColumn=Q.prototype.Sa;Q.prototype.Ua=function(a,b){return Sf(this,a,function(c){delete c.u[b]})};Q.prototype.dropTableColumn=Q.prototype.Ua;Q.prototype.bb=function(a,b,c){return Sf(this,a,function(d){d.u[c]=d.u[b];delete d.u[b]})};Q.prototype.renameTableColumn=Q.prototype.bb;function Tf(a,b){return new t(function(c,d){try{var e=this.b.objectStore(b).getAll()}catch(f){d(f);return}e.onsuccess=function(){c(e.result)}.bind(this);e.onerror=d},a)}
Q.prototype.Aa=function(a){var b={},c;for(c in a)b[c]=Rf(a[c]);return Oc(b)};Q.prototype.createRow=Q.prototype.Aa;Q.prototype.Xa=function(){return this.c};Q.prototype.getVersion=Q.prototype.Xa;Q.prototype.dump=function(){for(var a=this.a.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(Uf(this,d))}return Pb(b).then(function(e){var f={};e.forEach(function(g,h){f[a.item(h)]=g});return f})};Q.prototype.dump=Q.prototype.dump;
function Uf(a,b){return Tf(a,b).then(function(c){return c.map(function(d){return d.value})})};function Vf(a,b){this.a=a;this.b=b}Vf.prototype.get=function(a){if(0==a.length)return Wf(this);a=a.map(function(b){return new t(function(c,d){try{var e=this.a.get(b)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(f){c(this.b(f.target.result))}.bind(this)},this)},this);return Pb(a)};
function Wf(a){return new t(function(b,c){var d=[];try{var e=this.a.getAll()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){for(var f=ba(e.result),g=f.next();!g.done;g=f.next())d.push(this.b(g.value));b(d)}.bind(this)},a)}function Xf(a,b){return new t(function(c,d){try{var e=b()}catch(f){d(f);return}e.onsuccess=c;e.onerror=d},a)}Vf.prototype.put=function(a){if(0==a.length)return u();a=a.map(function(b){return Xf(this,function(){return this.a.put(Mc(b))}.bind(this))},this);return Pb(a)};
Vf.prototype.remove=function(a,b){function c(){var e=a.map(function(f){return Xf(d,function(){return d.a.delete(f)})});return Pb(e)}var d=this;return b?c():new t(function(e,f){var g=d.a.count();g.onsuccess=function(h){0==a.length||h.target.result==a.length?Xf(d,function(){return d.a.clear()}).then(e,f):c().then(e,f)};g.onerror=f})};function Yf(a,b,c,d,e){wd.call(this,c,e);this.c=b;this.c.oncomplete=this.J.resolve.bind(this.J);this.c.onabort=this.J.b.bind(this.J)}q(Yf,wd);Yf.prototype.a=function(a,b){return new Vf(this.c.objectStore(a),b)};Yf.prototype.abort=function(){this.c.abort()};Yf.prototype.f=function(){return this.J.a};function Zf(a,b){this.f=a;this.b=b;this.c=b.b.hc||!1}k=Zf.prototype;
k.ca=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new v(352);var c=a||function(){return u()};return new t(function(d,e){try{var f=b.open(this.b.name(),this.b.version())}catch(g){e(g);return}f.onerror=function(g){g=g.target.error;e(new v(361,g.name,g.message))};f.onupgradeneeded=function(g){$f(this,c,g).then(function(){},e)}.bind(this);f.onsuccess=function(g){this.a=g.target.result;ag(this).then(function(h){Lc=Math.max(Lc,h+1);
d(this.a)}.bind(this))}.bind(this)},this)};function $f(a,b,c){var d=c.target.result;c=new Q(c.oldVersion,d,c.target.transaction,a.c);bg(d);a.b.W().forEach(Da(a.cc,d),a);return b(c)}function bg(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(e){try{a.deleteObjectStore(e)}catch(f){}})}
k.cc=function(a,b){a.objectStoreNames.contains(b.g())||a.createObjectStore(b.g(),{keyPath:"id"});b.Fa()&&(b.ga().forEach(function(c){cg(a,c.o())},this),cg(a,nd(b)))};function cg(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}k.Ha=function(a,b,c){b=this.a.transaction(dg(b),0==a?"readonly":"readwrite");return new Yf(this.f,b,a,this.c,c)};
function dg(a){var b=z();a.forEach(function(c){b.add(c.g());c.Fa()&&(c.ga().forEach(function(d){b.add(d.o())}),b.add(nd(c)))});return A(b)}
function ag(a){function b(){if(0==d.length)return u();var h=d.shift();return c(h).then(b)}function c(h){return new t(function(l,m){try{var p=e.transaction([h]).objectStore(h).openCursor(null,"prev")}catch(B){m(B);return}p.onsuccess=function(B){(B=B.target.result)&&(f=Math.max(f,g(B)));l(f)};p.onerror=function(){l(f)}})}var d=a.b.W().map(function(h){return h.g()}),e=a.a,f=0,g=function(h){return this.c?(h=Ed(h.value),Object.keys(h.a).reduce(function(l,m){return Math.max(l,m)},0)):h.key}.bind(a);return new t(function(h){b().then(function(){h(f)})})}
k.close=function(){this.a.close()};k.Va=function(){throw new v(511);};k.Za=function(){};k.notify=function(){};k.cb=function(){return!0};function eg(a,b,c){wd.call(this,b,c);this.c=a;0==b&&this.J.resolve()}q(eg,wd);eg.prototype.a=function(a){return this.c.Va(a)};eg.prototype.abort=function(){this.J.b(void 0)};eg.prototype.f=function(){this.J.resolve();return this.J.a};function fg(a){this.c=a;this.b=x()}k=fg.prototype;k.ca=function(){this.c.W().forEach(this.rc,this);return u()};k.Va=function(a){var b=this.b.get(a)||null;if(null===b)throw new v(101,a);return b};k.Ha=function(a,b,c){return new eg(this,a,c)};function gg(a,b){if(!a.b.has(b)){var c=new Ff;a.b.set(b,c)}}k.rc=function(a){gg(this,a.g());a.Fa()&&(a.ga().forEach(function(b){gg(this,b.o())},this),gg(this,nd(a)))};k.close=function(){};k.Za=function(){};k.notify=function(){};k.cb=function(){return!0};function hg(a){fg.call(this,a);this.a=null}q(hg,fg);hg.prototype.Za=function(a){null===this.a&&(this.a=a)};hg.prototype.notify=function(a){null!==this.a&&this.a(a)};hg.prototype.cb=function(){return!1};function ig(a,b,c){this.b=a;this.a='"'+b+'"';this.c=c}ig.prototype.get=function(a){var b=this.c;return jg(this.b,"SELECT id, value FROM "+this.a+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(c){for(var d=c.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:c.rows.item(f).id,value:JSON.parse(c.rows.item(f).value)});return e})};
ig.prototype.put=function(a){if(0==a.length)return u();var b="INSERT OR REPLACE INTO "+this.a+"(id, value) VALUES (?, ?)";a.forEach(function(c){jg(this.b,b,[c.id(),JSON.stringify(c.u)])},this);return u()};ig.prototype.remove=function(a){jg(this.b,"DELETE FROM "+this.a+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return u()};function kg(a,b,c){wd.call(this,b,c);this.la=a;this.Ea=x();this.c=[]}q(kg,wd);function lg(a){return a.replace(".","__d__").replace("#","__s__")}kg.prototype.a=function(a,b){var c=this.Ea.get(a)||null;null===c&&(c=new ig(this,lg(a),b),this.Ea.set(a,c));return c};function jg(a,b,c,d){var e=Qb();a.c.push({Gc:b,Dc:c,transform:d,J:e});return e.a}
kg.prototype.f=function(){var a=null,b=this.J.b.bind(this.J),c=function(f,g){this.J.b(g)}.bind(this),d=[],e=function(f,g){if(null!==a){var h=g;null!=a.transform&&null!=g&&(h=a.transform(g));d.push(h);a.J.resolve(h)}0<this.c.length?(a=g=this.c.shift(),f.executeSql(g.Gc,g.Dc,e,c)):this.J.resolve(d)}.bind(this);0==this.m?this.la.readTransaction(e,b):this.la.transaction(e,b);return this.J.a};kg.prototype.abort=function(){this.c=[]};function R(a,b,c){this.a=c;this.b=a;this.c=b}n("lf.backstore.WebSqlRawBackStore",R);R.prototype.hb=function(){return this.a};R.prototype.getRawDBInstance=R.prototype.hb;R.prototype.ib=function(){throw new v(356);};R.prototype.getRawTransaction=R.prototype.ib;function mg(a){return new kg(a.a,1,new ge(a.b,z()))}R.prototype.Ta=function(a){var b=mg(this);jg(b,"DROP TABLE "+a,[]);return b.U()};R.prototype.dropTable=R.prototype.Ta;
function ng(a,b){a=mg(a);jg(a,"SELECT id, value FROM "+b,[]);return a.U().then(function(c){for(var d=c[0].rows.length,e=Array(d),f=0;f<d;++f)e[f]={id:c[0].rows.item(f).id,value:JSON.parse(c[0].rows.item(f).value)};return u(e)})}function og(a,b,c){var d=mg(a),e="UPDATE "+b+" SET value=? WHERE id=?";return ng(a,b).then(function(f){f.forEach(function(g){g=c(g);jg(d,e,[JSON.stringify(g.value),g.id])});return d.U()})}
R.prototype.Sa=function(a,b,c){var d=Rf(c);return og(this,a,function(e){e.value[b]=d;return e})};R.prototype.addTableColumn=R.prototype.Sa;R.prototype.Ua=function(a,b){return og(this,a,function(c){delete c.value[b];return c})};R.prototype.dropTableColumn=R.prototype.Ua;R.prototype.bb=function(a,b,c){return og(this,a,function(d){d.value[c]=d.value[b];delete d.value[b];return d})};R.prototype.renameTableColumn=R.prototype.bb;R.prototype.Aa=function(a){var b={},c;for(c in a)b[c]=Rf(a[c]);return Oc(b)};
R.prototype.createRow=R.prototype.Aa;R.prototype.Xa=function(){return this.c};R.prototype.getVersion=R.prototype.Xa;function pg(a){jg(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(b){for(var c=Array(b.rows.length),d=0;d<c.length;++d)c[d]=b.rows.item(d).tbl_name;return c})}
R.prototype.dump=function(){var a=Qb(),b=mg(this);pg(b);var c={};b.U().then(function(d){d=d[0].filter(function(e){return"__lf_ver"!=e&&"__WebKitDatabaseInfoTable__"!=e}).map(function(e){return ng(this,e).then(function(f){c[e]=f})},this);Pb(d).then(function(){a.resolve(c)})}.bind(this));return a.a};R.prototype.dump=R.prototype.dump;function qg(a,b,c){this.c=a;this.b=b;this.f=c||1}k=qg.prototype;k.ca=function(a){if(null==window.openDatabase)throw new v(353);var b=a||function(){return u()};return new t(function(c,d){var e=window.openDatabase(this.b.name(),"",this.b.name(),this.f);if(null!=e)this.a=e,rg(this,b).then(function(){sg(this).then(c,d)}.bind(this),function(f){if(f instanceof v)throw f;throw new v(354,f.message);});else throw new v(354);},this)};
function rg(a,b){var c=Qb(),d=new kg(a.a,1,new ge(a.c,z()));jg(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);jg(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.U().then(function(e){var f=0;e[1].rows.length&&(f=e[1].rows.item(0).v);f<this.b.version()?tg(this,b,f).then(c.resolve.bind(c)):f>this.b.version()?c.b(new v(108)):c.resolve()}.bind(a),c.b.bind(c));return c.a}k.Ha=function(a,b,c){if(null!=this.a)return new kg(this.a,a,c);throw new v(2);};k.close=function(){};
k.Va=function(){throw new v(512);};k.Za=function(){throw new v(355);};k.notify=function(){throw new v(355);};function tg(a,b,c){return ug(a).then(function(){return b(new R(this.c,c,this.a))}.bind(a))}
function ug(a){var b=a.b.W(),c=new kg(a.a,1,new ge(a.c,z())),d=new kg(a.a,1,new ge(a.c,z()));jg(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.b.version()]);pg(c);return c.U().then(function(e){var f=e[1];f.filter(function(m){return-1!=m.indexOf("__d__")}).forEach(function(m){jg(d,'DROP TABLE "'+(m+'"'),[])});var g=[],h=[],l=[];b.map(function(m){-1==f.indexOf(m.g())&&g.push(m.g());m.Fa&&(m.ga().forEach(function(p){p=lg(p.o());g.push(p);h.push(p)}),m=lg(nd(m)),g.push(m),l.push(m))});g.forEach(function(m){jg(d,
'CREATE TABLE "'+(m+'"(id INTEGER PRIMARY KEY, value TEXT)'),[])});return d.U()})}function sg(a){var b=0,c=Qb(),d=function(e){var f=new kg(this.a,0);jg(f,'SELECT MAX(id) FROM "'+(e+'"'),[]);return f.U().then(function(g){g=g[0].rows.item(0)["MAX(id)"];b=Math.max(g,b)})}.bind(a);a=a.b.W().map(function(e){return d(e.g())});Pb(a).then(function(){Lc=Math.max(Lc,b+1);c.resolve()},function(e){c.b(e)});return c.a}k.cb=function(){return!0};function vg(a,b){this.h=we();this.b=a;this.a=b;this.f=wg(this)}function wg(a){if(0<a.b.a.length)return a.b.a;var b=[];a.b.from.forEach(function(c){c.ta().forEach(function(d){b.push(d)})});return b}vg.prototype.c=function(a,b){return this.f.every(function(c){return 6==c.D()||0==c.D()?N(a,c)===N(b,c):xe(this.h,c.D(),"eq")(N(a,c),N(b,c))},this)};
function xg(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.c.bind(a),function(l){return d[l]});b=[];for(var f=0,g=0;g<d.length;g++){var h=d[g];e[f]==h?f++:(h=a.a.splice(f,1),h=yg(g,h,0,a.a),b.push(h))}e=ub(d,c.entries,a.c.bind(a),function(l,m){return c.entries[m]});for(g=f=0;g<c.entries.length;g++)h=c.entries[g],e[f]==h?f++:(a.a.splice(g,0,h.aa.u),h=yg(g,[],1,a.a),b.push(h));return b}function yg(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function zg(){this.a=x()}zg.prototype.ob=function(a,b){var c=xa(a.a).toString(),d=this.a.get(c)||null;null===d&&(d=new Ag(a),this.a.set(c,d));d.ob(b)};zg.prototype.yb=function(a,b){a=xa(a.a).toString();var c=this.a.get(a)||null;c.yb(b);0<c.ab.size||this.a.delete(a)};function wf(a,b){var c=z();b.forEach(function(e){c.add(e.g())});var d=[];a.a.forEach(function(e){e=e.Wa();e.context.from.some(function(f){return c.has(f.g())})&&d.push(e)});return d}
function uf(a,b,c){b=xa(null!=b.h?b.h:b).toString();a=a.a.get(b)||null;null!==a&&Bg(a,c)}function Ag(a){this.b=a;this.ab=z();this.f=[];this.a=null;this.c=new vg(a.a,this.f)}Ag.prototype.ob=function(a){this.ab.has(a)||this.ab.add(a)};Ag.prototype.yb=function(a){this.ab.delete(a)};Ag.prototype.Wa=function(){var a=this.b;return{context:a.a,xb:Cg(a)}};function Bg(a,b){var c=xg(a.c,a.a,b);a.a=b;0<c.length&&a.ab.forEach(function(d){d(c)})};function Dg(a){this.a=x();this.b=x();a.W().forEach(function(b){this.b.set(b.g(),z())},this)}Dg.prototype.set=function(a,b){this.a.set(b.id(),b);this.b.get(a).add(b.id())};function Eg(a,b,c){var d=a.b.get(b);c.forEach(function(e){this.a.set(e.id(),e);d.add(e.id())},a)}Dg.prototype.get=function(a){return this.a.get(a)||null};function Fg(a,b){return b.map(function(c){return this.get(c)},a)}Dg.prototype.remove=function(a,b){this.a.delete(b);this.b.get(a).delete(b)};
Dg.prototype.clear=function(){this.a.clear();this.b.clear()};function Gg(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(void 0!==c?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Hg(a,b,c){var d=0,e=a.length;for(c=c||Ig;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Ig(a,b){return a-b}function Jg(a,b,c){c=Hg(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Kg(a,b,c){this.h=a;this.b=b;this.f=c;this.c=new ud;this.clear()}var Lg=[];k=Kg.prototype;k.g=function(){return this.h};k.toString=function(){return this.a.toString()};k.add=function(a,b){this.a=this.a.Ca(a,b)};k.set=function(a,b){this.a=this.a.Ca(a,b,!0)};k.remove=function(a,b){this.a=this.a.remove(a,b)};k.get=function(a){return this.a.get(a)};k.gb=function(a){if(null==a)return this.M().a;if(a instanceof ye){if(Ae(a))return this.M().a;if(Ee(a))return this.get(a.from).length}return this.Ja([a]).length};
k.M=function(){return this.c};function Mg(a,b,c,d){var e=Array(b);a.a.fill({offset:c?a.c.a-b-d:d,count:b,Ab:0},e);return c?e.reverse():e}
k.Ja=function(a,b,c,d){var e=Ng(this.a).i[0];if(void 0===e||0==c)return Lg;b=b||!1;c=null!=c?Math.min(c,this.c.a):this.c.a;d=d||0;var f=Math.min(Math.max(this.c.a-d,0),c);if(0==f)return Lg;if(void 0===a||1==a.length&&a[0]instanceof ye&&Ae(a[0]))return Mg(this,f,b,d);a=this.b.Tb(a);var g=Array(b?this.c.a:f),h={count:0,L:g.length,reverse:b,G:d},l=1<this.ra().ub();a.forEach(function(m){var p=this.b.mb(m);p=this.b.sb(m)?e:p[0];p=this.a.m(p);for(var B=0;null!=p&&h.count<h.L;){if(l){for(var G=p,O=m,H=h,
D=g,la=G.a.ra(),oa=-1,qa=0;qa<G.i.length;++qa)if(la.Da(G.i[qa],O)){oa=qa;break}if(-1!=oa)for(qa=oa;qa<G.i.length&&H.count<H.L;++qa)la.Da(G.i[qa],O)&&Og(G,H,D,qa)}else Pg(p,m,h,g);0!=h.G||p.a.ra().Ob(p.i[0],m)?B=0:B++;p=2==B?null:p.next()}},this);g.length>h.count&&g.splice(h.count,g.length-h.count);return b?Gg(g,b,c,d):g};k.clear=function(){this.a=Qg(this);this.c.clear()};k.Pa=function(a){return Rg(this.a,a)};k.min=function(){return Sg(this,this.b.min.bind(this.b))};
k.max=function(){return Sg(this,this.b.max.bind(this.b))};function Tg(a,b,c){if(!a.b.pb(b.i[c]))if(1<b.i[c].length){if(null===b.i[c][0])return null}else return null;return[b.i[c],a.f?[b.b[c]]:b.b[c]]}
function Sg(a,b){a:{var c=Ng(a.a);var d=0;do if(d>=c.i.length)c=c.c,d=0;else{var e=Tg(a,c,d);if(null!==e){c=e;break a}d++}while(null!==c);c=null}a:{d=Ug(a.a);e=d.i.length-1;do if(0>e)d=d.h,e=0;else{var f=Tg(a,d,e);if(null!==f){a=f;break a}e--}while(null!==d);a=null}return null===c||null===a?null:1==b(c[0],a[0])?c:a}k.ia=function(){return this.f};k.ra=function(){return this.b};k.ka=function(a,b){return null!=a?0==this.b.Qa(a,b):!1};
k.lb=function(){for(var a=[],b=Ng(this.a);b;)a.push(new Kc(b.O,[b.i,b.b])),b=b.c;return a};function Vg(a,b,c,d){a=new Kg(b,a,c);d=Wg(d,a);a.a=d;return a}function Xg(a,b){this.O=a;this.a=b;this.f=0;this.c=this.h=this.w=null;this.i=[];this.b=[];this.l=[];this.m=1==b.ra().ub()?this.Lb:this.Kb}function Qg(a){return new Xg(Lc++,a)}function S(a){return 0==a.f}k=Xg.prototype;k.next=function(){return this.c};
function Yg(a){function b(g){return null!=g?g.O.toString():"_"}var c=a.O+"["+a.i.join("|")+"]",d=a.l.map(function(g){return g.O}).join("|"),e=a.b.join("/"),f=b(a.h)+"{";f=S(a)?f+e:f+d;f=f+"}"+b(a.w);a.c&&(a=Yg(a.c),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}k.toString=function(){var a="",b=Yg(this);a+=b[0]+"\n"+b[1]+"\n";this.l.length&&(a+=this.l[0].toString());return a};function Ng(a){return S(a)?a:Ng(a.l[0])}function Ug(a){return S(a)?a:Ug(a.l[a.l.length-1])}
function Zg(a,b){b&&(b.h=a);a&&(a.c=b)}function $g(a){var b=a[0],c=Qg(b.a);c.f=b.f+1;c.l=a;for(b=0;b<a.length;++b)a[b].w=c,0<b&&c.i.push(a[b].i[0]);return c}function ah(a){var b=a,c=[];do c.push(b),b=b.c;while(b);if(512>=c.length)b=$g(c);else{var d=c.length,e=0;b=Qg(a.a);for(b.f=a.f+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),g=$g(f);g.w=b;b.l.length&&(b.i.push(f[0].i[0]),Zg(b.l[b.l.length-1],g));b.l.push(g);e+=a;d-=a}}return b}
k.get=function(a){var b=bh(this,a);if(S(this)){var c=Lg;this.a.ka(this.i[b],a)&&(c=c.concat(this.b[b]));return c}b=this.a.ka(this.i[b],a)?b+1:b;return this.l[b].get(a)};function Rg(a,b){var c=bh(a,b);return a.a.ka(a.i[c],b)?!0:S(a)?!1:Rg(a.l[c],b)}k.remove=function(a,b){ch(this,a,-1,b);return null===this.w?(a=this,1==this.l.length&&(a=this.l[0],a.w=null),a):this};function dh(a){return S(a)?a.i[0]:dh(a.l[0])}function eh(a){a.i=[];for(var b=1;b<a.l.length;++b)a.i.push(dh(a.l[b]))}
function ch(a,b,c,d){var e=bh(a,b),f=S(a);if(!f){var g=a.a.ka(a.i[e],b)?e+1:e;if(ch(a.l[g],b,g,d))eh(a);else return!1}else if(!a.a.ka(a.i[e],b))return!1;if(a.i.length>e&&a.a.ka(a.i[e],b)){if(void 0!==d&&!a.a.ia()&&f&&(g=a.b[e],d=Hg(g,d,void 0),0>d?d=!1:(g.splice(d,1),d=!0),d&&a.a.M().remove(b,1),a.b[e].length))return!1;a.i.splice(e,1);f&&(f=a.a.ia()?1:a.b[e].length,a.b.splice(e,1),a.a.M().remove(b,f))}if(256>a.i.length&&null!==a.w){a:{if(a.c&&256<a.c.i.length)b=a.c,e=d=0,f=a.i.length+1;else if(a.h&&
256<a.h.i.length)b=a.h,d=a.h.i.length-1,e=S(a)?d:d+1,f=0;else{b=!1;break a}a.i.splice(f,0,b.i[d]);b.i.splice(d,1);d=S(a)?a.b:a.l;S(a)?g=b.b:(g=b.l,g[e].w=a);d.splice(f,0,g[e]);g.splice(e,1);S(b)||(eh(b),eh(a));b=!0}b||fh(a,c)}return!0}
function fh(a,b){var c;if(a.c&&511>a.c.i.length){var d=a.c;var e=c=0}else a.h&&(d=a.h,c=d.i.length,e=S(d)?d.b.length:d.l.length);c=[c,0].concat(a.i);Array.prototype.splice.apply(d.i,c);c=null;S(a)?c=a.b:(c=a.l,c.forEach(function(f){f.w=d}));c=[e,0].concat(c);Array.prototype.splice.apply(S(d)?d.b:d.l,c);Zg(a.h,a.c);S(d)||eh(d);-1!=b&&(a.w.i.splice(b,1),a.w.l.splice(b,1))}
k.Ca=function(a,b,c){var d=bh(this,a);if(S(this)){if(this.a.ka(this.i[d],a)){if(c)this.a.M().remove(a,this.a.ia()?1:this.b[d].length),this.b[d]=this.a.ia()?b:[b];else{if(this.a.ia())throw new v(201,this.a.g(),JSON.stringify(a));if(!Jg(this.b[d],b))throw new v(109);}this.a.M().add(a,1);return this}this.i.splice(d,0,a);this.b.splice(d,0,this.a.ia()?b:[b]);this.a.M().add(a,1);512==this.i.length?(d=Qg(this.a),a=Qg(this.a),a.f=1,a.i=[this.i[256]],a.l=[this,d],a.w=this.w,this.w=a,d.i=this.i.splice(256),
d.b=this.b.splice(256),d.w=a,Zg(d,this.c),Zg(this,d),d=a):d=this;return d}d=this.a.ka(this.i[d],a)?d+1:d;a=this.l[d].Ca(a,b,c);S(a)||1!=a.i.length||(this.i.splice(d,0,a.i[0]),a.l[1].w=this,a.l[0].w=this,this.l.splice(d,1,a.l[1]),this.l.splice(d,0,a.l[0]));return 512==this.i.length?gh(this):this};
function gh(a){var b=Qg(a.a),c=Qg(a.a);b.w=a.w;b.f=a.f+1;b.i=[a.i[256]];b.l=[a,c];a.i.splice(256,1);c.w=b;c.f=a.f;c.i=a.i.splice(256);c.l=a.l.splice(257);c.l.forEach(function(d){d.w=c});a.w=b;Zg(c,a.c);Zg(a,c);return b}function bh(a,b){for(var c=0,d=a.i.length,e=a.a.ra();c<d;){var f=c+d>>1;-1==e.Qa(a.i[f],b)?c=f+1:d=f}return c}k.Lb=function(a){if(!S(this)){var b=bh(this,a);this.a.ka(this.i[b],a)&&b++;return this.l[b].Lb(a)}return this};
k.Kb=function(a){if(!S(this)){var b=bh(this,a);this.a.ka(this.i[b],a)&&(a.some(function(c){return c==I})||b++);return this.l[b].Kb(a)}return this};
function Pg(a,b,c,d){function e(H){return H[0]?H[1]?0:1:-1}var f=a.a.ra(),g=0,h=a.i.length-1,l=a.i,m=e(f.za(l[g],b)),p=e(f.za(l[h],b));if(1!=m&&(-1!=m||-1!=p)){var B=function(H,D){D=H+D>>1;return D==H?D+1:D},G=function(H,D,la){if(H>=D)return 0==la?D:-1;var oa=e(f.za(l[H],b));if(0==oa)return H;if(1==oa)return-1;oa=B(H,D);if(oa==D)return 0==la?D:-1;var qa=e(f.za(l[oa],b));return 0==qa?G(H,oa,qa):-1==qa?G(oa+1,D,la):G(H+1,oa,qa)},O=function(H,D){if(H>=D)return H;var la=e(f.za(l[D],b));if(0==la)return D;
if(-1==la)return H;la=B(H,D);if(la==D)return H;var oa=e(f.za(l[la],b));return 0==oa?O(la,D):1==oa?O(H,la-1):-1};0!=m&&(g=G(g+1,h,p));-1!=g&&(h=O(g,h),-1!=h&&h>=g&&hh(a,c,d,g,h+1))}}function Og(a,b,c,d){if(a.a.ia())!b.reverse&&b.G?b.G--:c[b.count++]=a.b[d];else for(var e=0;e<a.b[d].length&&b.count<c.length;++e)!b.reverse&&b.G?b.G--:c[b.count++]=a.b[d][e]}function hh(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.L));++d)Og(a,b,c,d)}
k.fill=function(a,b){if(S(this))for(var c=0;c<this.b.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.a.ia()?1:this.b[c].length,0>a.offset)for(var d=this.b[c].length+a.offset;d<this.b[c].length&&0<a.count;++d)b[a.Ab++]=this.b[c][d],a.count--}else if(this.a.ia())b[a.Ab++]=this.b[c],a.count--;else for(d=0;d<this.b[c].length&&0<a.count;++d)b[a.Ab++]=this.b[c][d],a.count--;else for(c=0;c<this.l.length&&0<a.count;++c)this.l[c].fill(a,b)};
function Wg(a,b){var c=b.M();a=a.map(function(e){var f=new Xg(e.id(),b);f.i=e.u[0];f.b=e.u[1];f.i.forEach(function(g,h){c.add(g,b.ia()?1:f.b[h].length)});return f});for(var d=0;d<a.length-1;++d)Zg(a[d],a[d+1]);return 1<a.length?ah(a[0]):a[0]};function ih(a){this.a=0==a?jh:kh;this.b=0==a?function(b){return null!=b?b.reverse():null}:function(b){return b||null};this.c=0==a?lh:mh}function kh(a,b){return a>b?1:a<b?-1:0}function jh(a,b){return kh(b,a)}function mh(a,b){return Fe(a,b)}function lh(a,b){return Fe(b,a)}k=ih.prototype;k.za=function(a,b){b=this.b(b);var c=[b.from==I,b.C==I];if(!c[0]){var d=this.a(a,b.from);c[0]=b.V?1==d:-1!=d}c[1]||(d=this.a(a,b.C),c[1]=b.Z?-1==d:1!=d);return c};k.Qa=function(a,b){return this.a(a,b)};
k.min=function(a,b){return a<b?1:a==b?0:-1};k.max=function(a,b){return a>b?1:a==b?0:-1};k.Da=function(a,b){a=this.za(a,b);return a[0]&&a[1]};k.Ob=function(a,b){return this.Da(a,b)};k.Tb=function(a){return a.filter(function(b){return null!==b}).sort(function(b,c){return this.c(b,c)}.bind(this))};k.sb=function(a){return this.b(a).from==I};k.mb=function(a){a=this.b(a);return[a.from,a.C]};k.pb=function(a){return null!==a};k.ub=function(){return 1};
k.toString=function(){return this.Qa==jh?"SimpleComparator_DESC":"SimpleComparator_ASC"};function nh(a){ih.call(this,a);this.a=0==a?oh:ph}q(nh,ih);function ph(a,b){return null===a?null===b?0:-1:null===b?1:kh(a,b)}function oh(a,b){return ph(b,a)}nh.prototype.Da=function(a,b){return null===a?Ae(b):nh.qa.Da.call(this,a,b)};nh.prototype.min=function(a,b){var c=null===a?null===b?0:-1:null===b?1:null;null===c&&(c=nh.qa.min.call(this,a,b));return c};
nh.prototype.max=function(a,b){var c=null===a?null===b?0:-1:null===b?1:null;null===c&&(c=nh.qa.max.call(this,a,b));return c};function qh(a){this.a=a.map(function(b){return new ih(b)})}function rh(a,b,c,d){for(var e=0,f=0;f<a.a.length&&0==e;++f)e=d(a.a[f],b[f],c[f]);return e}k=qh.prototype;k.Qa=function(a,b){return rh(this,a,b,function(c,d,e){return d==I||e==I?0:c.Qa(d,e)})};k.min=function(a,b){return rh(this,a,b,function(c,d,e){return c.min(d,e)})};k.max=function(a,b){return rh(this,a,b,function(c,d,e){return c.max(d,e)})};
k.za=function(a,b){for(var c=[!0,!0],d=0;d<this.a.length&&(c[0]||c[1]);++d){var e=this.a[d].za(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};k.Da=function(a,b){for(var c=!0,d=0;d<this.a.length&&c;++d)c=this.a[d].Da(a[d],b[d]);return c};k.Ob=function(a,b){return this.a[0].Da(a[0],b[0])};
k.Tb=function(a){var b=a.filter(function(d){return d.every(function(e){return null!=e})});a=Array(this.a.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(d){return d[c]});a.forEach(function(d,e){d.sort(function(f,g){return this.a[e].c(f,g)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(d){return d[c]});return b.sort(function(d,e){for(var f=0,g=0;g<this.a.length&&0==f;++g)f=this.a[g].c(d[g],e[g]);return f}.bind(this))};k.sb=function(a){return this.a[0].sb(a[0])};
k.mb=function(a){var b=a.map(function(c,d){return this.a[d].mb(c)[0]},this);a=a.map(function(c,d){return this.a[d].mb(c)[1]},this);return[b,a]};k.pb=function(a){return a.every(function(b,c){return this.a[c].pb(b)},this)};k.ub=function(){return this.a.length};function sh(a){qh.call(this,a);this.a=a.map(function(b){return new nh(b)})}q(sh,qh);function th(a){if(1==a.a.length)return new ih(a.a[0].order);var b=a.a.map(function(c){return c.order});return a.a.some(function(c){return c.S.Na()})?new sh(b):new qh(b)};function uh(a){this.a=a;this.b=z();this.c=new ud;this.f=new ud}k=uh.prototype;k.g=function(){return this.a.g()};k.add=function(a,b){null===a?(this.b.add(b),this.c.add(a,1)):this.a.add(a,b)};k.set=function(a,b){null===a?(this.b.clear(),this.c.clear(),this.add(a,b)):this.a.set(a,b)};k.remove=function(a,b){null===a?b?(this.b.delete(b),this.c.remove(a,1)):(this.b.clear(),this.c.clear()):this.a.remove(a,b)};k.get=function(a){return null===a?A(this.b):this.a.get(a)};k.gb=function(a){return this.a.gb(a)};
k.M=function(){vd(this.f,[this.a.M(),this.c]);return this.f};k.Ja=function(a,b,c,d){b=this.a.Ja(a,b,c,d);return null!=a?b:b.concat(A(this.b))};k.clear=function(){this.b.clear();this.a.clear()};k.Pa=function(a){return null===a?0!=this.b.size:this.a.Pa(a)};k.min=function(){return this.a.min()};k.max=function(){return this.a.max()};k.lb=function(){return[new Kc(-2,A(this.b))].concat(this.a.lb())};k.ra=function(){return this.a.ra()};
function vh(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new v(102);d=b[c].u;b=b.slice(0);b.splice(c,1);a=a(b);var e=new uh(a);d.forEach(function(f){e.b.add(f)});return e}k.ia=function(){return this.a.ia()};function wh(a){this.c=a;this.a=z();this.b=new ih(1)}k=wh.prototype;k.g=function(){return this.c};k.add=function(a){if("number"!=typeof a)throw new v(103);this.a.add(a)};k.set=function(a,b){this.add(a,b)};k.remove=function(a){this.a.delete(a)};k.get=function(a){return this.Pa(a)?[a]:[]};k.min=function(){return xh(this,this.b.min.bind(this.b))};k.max=function(){return xh(this,this.b.max.bind(this.b))};
function xh(a,b){if(0==a.a.size)return null;a=A(a.a).reduce(function(c,d){return null===c||1==b(d,c)?d:c},null);return[a,[a]]}k.gb=function(){return this.a.size};k.Ja=function(a,b,c,d){var e=a||[De()];a=A(this.a).filter(function(f){return e.some(function(g){return this.b.Da(f,g)},this)},this);return Gg(a,b,c,d)};k.clear=function(){this.a.clear()};k.Pa=function(a){return this.a.has(a)};k.lb=function(){return[new Kc(0,A(this.a))]};k.ra=function(){return this.b};
function yh(a,b){var c=new wh(a);b[0].u.forEach(function(d){c.add(d,d)});return c}k.ia=function(){return!0};k.M=function(){var a=new ud;a.a=this.a.size;return a};function zh(a){this.b=a.j(Gd);this.a=a.j(Id);this.c=a.j(Hd)}zh.prototype.ca=function(a){var b=a.W(),c=function(){if(0==b.length)return u();var d=b.shift();return(d.Fa()?Ah(this,d):Bh(this,d)).then(c)}.bind(this);return c()};function Bh(a,b){var c=a.b.Ha(0,[b]);a=c.a(b.g(),b.sa.bind(b)).get([]).then(function(d){Eg(this.c,b.g(),d);Ch(this,b,d)}.bind(a));c.U();return a}function Ch(a,b,c){var d=a.a.a.get(b.g())||[];c.forEach(function(e){d.forEach(function(f){var g=e.va(f.g());f.add(g,e.id())})})}
function Ah(a,b){var c=a.b.Ha(0,[b]),d=c.a(b.g(),b.sa).get([]).then(function(e){Eg(this.c,b.g(),e)}.bind(a));a=b.ga().map(function(e){return Dh(this,e,c)},a).concat(Eh(a,b,c));c.U();return Pb(a.concat(d))}function Dh(a,b,c){c=c.a(b.o(),Nc);var d=th(b);return c.get([]).then(function(e){if(0<e.length)if(ld(b)){var f=Vg.bind(void 0,d,b.o(),b.Ya);e=vh(f,e);this.a.set(b.b,e)}else e=Vg(d,b.o(),b.Ya,e),this.a.set(b.b,e)}.bind(a))}
function Eh(a,b,c){return c.a(nd(b),Nc).get([]).then(function(d){0<d.length&&(d=yh(nd(b),d),this.a.set(b.g(),d))}.bind(a))};function Fh(){this.a=x()}var Gh;function Hh(){Gh||(Gh=new Fh);return Gh}Fh.prototype.clear=function(){this.a.clear()};Fh.prototype.clear=Fh.prototype.clear;Fh.prototype.xa=function(a,b){this.a.set(a.toString(),b);return b};Fh.prototype.registerService=Fh.prototype.xa;Fh.prototype.j=function(a){var b=this.a.get(a.toString())||null;if(null===b)throw new v(7,a.toString());return b};Fh.prototype.getService=Fh.prototype.j;Fh.prototype.kb=function(a){return this.a.has(a.toString())};
Fh.prototype.isRegistered=Fh.prototype.kb;function Ih(){var a=Hh();return Wc(a.a)};function Jh(a,b,c,d){return null==a?Kh():null==b?Lh(a):Mh(a,b,c,d)}function Nh(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Oh(a){var b=Hh();a=new Fd("ns_"+a);return b.kb(a)?b.j(a):null}function Kh(){var a={};Ih().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Oh(b).j(Md).version())});return Nh(a)}function Lh(a){a=Oh(a);var b={};if(null!=a){var c=a.j(Id);a.j(Md).W().forEach(function(d){b[d.g()]=c.get(nd(d)).M().a})}return Nh(b)}
function Mh(a,b,c,d){var e=Oh(a);a=[];if(null!=e){var f=null;try{f=e.j(Md).table(b)}catch(g){}null!=f&&(b=e.j(Id),e=e.j(Hd),c=b.get(nd(f)).Ja(void 0,!1,c,d),c.length&&(a=Fg(e,c).map(function(g){return g.u})))}return Nh(a)};function Ph(){this.b=x();this.a=x()}Ph.prototype.ca=function(a){a.W().forEach(function(b){var c=[];this.a.set(b.g(),c);var d=nd(b);if(null===this.get(d)){var e=new wh(d);c.push(e);this.b.set(d,e)}b.ga().forEach(function(f){var g=th(f);g=new Kg(f.o(),g,f.Ya);g=ld(f)&&1==f.a.length?new uh(g):g;c.push(g);this.b.set(f.o(),g)},this)},this);return u()};Ph.prototype.get=function(a){return this.b.get(a)||null};
Ph.prototype.set=function(a,b){var c=this.a.get(a)||null;null===c&&(c=[],this.a.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].g()==b.g()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.b.set(b.g(),b)};function Qh(){};function Rh(a,b){this.a=a;this.b=b}Rh.prototype.na=function(){return this.a};function Sh(){J.call(this)}q(Sh,J);function Th(a,b){J.call(this);this.table=a;this.values=b}q(Th,Sh);function Uh(a,b){Th.call(this,a,b)}q(Uh,Th);function Vh(a){J.call(this);this.table=a}q(Vh,Sh);Vh.prototype.toString=function(){return"delete("+this.table.g()+")"};function Wh(a){J.call(this);this.table=a}q(Wh,Sh);Wh.prototype.toString=function(){return"update("+this.table.g()+")"};function Xh(a){J.call(this);this.I=a}
q(Xh,Sh);Xh.prototype.toString=function(){return"select("+this.I.toString()+")"};function Yh(a){J.call(this);this.table=a}q(Yh,Sh);Yh.prototype.toString=function(){var a="table_access("+this.table.g();null!==this.table.ja&&(a+=" as "+this.table.ja);return a+")"};function Zh(){J.call(this)}q(Zh,Sh);Zh.prototype.toString=function(){return"cross_product"};function $h(a,b){J.call(this);this.b=a;this.a=b}q($h,Sh);
$h.prototype.toString=function(){var a="project("+this.b.toString();if(null!==this.a){var b=this.a.map(function(c){return c.o()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function ai(a){J.call(this);this.H=a}q(ai,Sh);ai.prototype.toString=function(){return"order_by("+qf(this.H)+")"};function bi(a){J.call(this);this.a=a}q(bi,Sh);bi.prototype.toString=function(){return"aggregation("+this.a.toString()+")"};function ci(a){J.call(this);this.a=a}q(ci,Sh);
ci.prototype.toString=function(){return"group_by("+this.a.toString()+")"};function di(a){J.call(this);this.L=a}q(di,Sh);di.prototype.toString=function(){return"limit("+this.L+")"};function ei(a){J.call(this);this.G=a}q(ei,Sh);ei.prototype.toString=function(){return"skip("+this.G+")"};function fi(a,b){J.call(this);this.I=a;this.a=b}q(fi,Sh);fi.prototype.toString=function(){return"join(type: "+(this.a?"outer":"inner")+", "+this.I.toString()+")"};function gi(a,b){var c=[],d=null,e=null;Pe(a,function(f){var g=b(f);null==f.getParent()?e=g:L(d,g);var h=f.getParent();null!==h&&K(h).length==K(d).length&&(h=c.indexOf(d),-1!=h&&c.splice(h,1));1<K(f).length&&c.push(g);d=null===f.l?c[c.length-1]:g});return e}function hi(a){return ii(a,function(b){return null===b.l})}
function ji(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(e,f){a.removeChild(e);null!==b&&Me(b,e,c+f)});return{parent:b,children:d}}function ki(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function li(a){var b=Le(a,0);ji(a);ki(b,a);return b}
function mi(a,b,c){var d=Le(a,0),e=K(d).slice();if(!e.some(function(f){return b(f)}))return a;ji(a);e.forEach(function(f,g){if(b(f)){var h=c(a);Ne(d,g);L(h,f);Me(d,h,g)}});return d}function ni(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),Ne(e,a),Me(e,c,a));K(b).slice().forEach(function(f){b.removeChild(f);L(d,f)});return c}function ii(a,b,c){function d(f){b(f)&&e.push(f);null!=c&&c(f)||K(f).forEach(d)}var e=[];d(a);return e}
function oi(a,b){var c=b||function(e){return e.toString()+"\n"},d="";Pe(a,function(e){for(var f=0;f<Ke(e);f++)d+="-";d+=c(e)});return d};function pi(){}q(pi,Qh);pi.prototype.b=function(a){this.a=a;qi(this,this.a);return this.a};function qi(a,b){if(b instanceof Xh){var c=ri(a,b.I);c=si(a,c);ni(b,b,c[0],c[1]);b==a.a&&(a.a=c[0]);b=c[0]}K(b).forEach(function(d){qi(this,d)},a)}function ri(a,b){if(0==K(b).length||"and"!=b.a)return[b];a=K(b).slice().map(function(c){b.removeChild(c);return ri(this,c)},a);return Ma(a)}function si(a,b){var c=null,d=null;b.map(function(e,f){e=new Xh(e);0==f?c=e:L(d,e);d=e},a);return[c,d]};function ti(){}q(ti,Qh);ti.prototype.b=function(a,b){if(3>b.from.length)return a;this.a=a;ui(this,this.a);return this.a};function ui(a,b){if(b instanceof Zh)for(;2<K(b).length;){for(var c=new Zh,d=0;2>d;d++){var e=Ne(b,0);L(c,e)}Me(b,c,0)}K(b).forEach(function(f){ui(this,f)},a)};function vi(a){this.a=a;this.f=null}vi.prototype.c=function(){null===this.f&&(this.f=this.b());return this.f};function wi(a){vi.call(this,a)}q(wi,vi);wi.prototype.b=function(){return this.a.a?new Uh(this.a.ha,this.a.values):new Th(this.a.ha,this.a.values)};function xi(a){vi.call(this,a)}q(xi,vi);xi.prototype.b=function(){var a=new Wh(this.a.table),b=null!=this.a.B?new Xh(this.a.B.Ma()):null,c=new Yh(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function yi(a,b,c){this.a=a;this.b=b;this.f=c}yi.prototype.c=function(){this.f.forEach(function(a){this.a=a.b(this.a,this.b)},this);return this.a};function zi(a,b){vi.call(this,a);this.h=b}q(zi,vi);zi.prototype.b=function(){var a=new Vh(this.a.from),b=null!=this.a.B?new Xh(this.a.B.Ma()):null,c=new Yh(this.a.from);null===b?L(a,c):(L(b,c),L(a,b));return(new yi(a,this.a,this.h)).c()};function Ai(a,b,c){Qe.call(this);this.a=a;this.b=b;this.c=c;this.h=null;a=we();this.f=xe(a,this.a.D(),this.c);this.m=a.b.get(this.a.D())||null}q(Ai,Qe);k=Ai.prototype;k.Ma=function(){var a=new Ai(this.a,this.b,this.c),b=this.N();a.O=b;return a};k.ta=function(a){return null!=a?(a.push(this.a),a.push(this.b),a):[this.a,this.b]};k.A=function(a){a=null!=a?a:z();a.add(this.a.X());a.add(this.b.X());return a};
k.reverse=function(){var a=this.c;switch(this.c){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Ai(this.b,this.a,a)};k.eval=function(a){var b=a.entries.filter(function(c){var d=N(c,this.a);c=N(c,this.b);return this.f(d,c)},this);return new M(b,a.A())};k.toString=function(){return"join_pred("+this.a.o()+" "+this.c+" "+this.b.o()+")"};
function Bi(a,b,c){if(-1!=b.A().indexOf(md(a.a.X()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.a;a.a=a.b;a.b=c;switch(a.c){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.c=c;a.f=xe(we(),a.a.D(),a.c)}return[b,d]}return[d,b]}function Ci(a){var b={};a.ta().forEach(function(c){b[c.g()]=null});return b}
function Di(a,b,c){null===a.h&&(a.h=Ci(a.b.X()));var d=new $e(new Kc(-1,a.h),!1);return cf(b,c,d,[md(a.b.X())])}
function Ei(a,b,c,d){var e=[b,c];d||(e=Bi(a,b,c));b=e[0];c=e[1];e=b;var f=c,g=a.a,h=a.b;d&&(e=c,f=b,g=a.b,h=a.a);var l=new $c,m=[];e.entries.forEach(function(G){var O=String(N(G,g));l.set(O,G)});var p=e.A(),B=f.A();f.entries.forEach(function(G){var O=N(G,h),H=String(O);null!==O&&l.has(H)?l.get(H).forEach(function(D){D=cf(G,B,D,p);m.push(D)}):d&&m.push(Di(this,G,B))}.bind(a));a=b.A().concat(c.A());return new M(m,a)}
function Fi(a,b,c,d,e){function f(G,O){O=new $e(O,1<p.length);G=cf(G,B,O,p);m.push(G)}var g=d.qc.X(),h=b,l=c;-1!=b.A().indexOf(md(g))&&(h=c,l=b);var m=[],p=l.A(),B=h.A();h.entries.forEach(function(G){var O=this.m(N(G,d.Ac));O=d.index.get(O);0!=O.length&&(d.index.ia()?f(G,e.get(O[0])):Fg(e,O).forEach(f.bind(null,G)))},a);a=h.A().concat(l.A());return new M(m,a)};function Gi(){}q(Gi,Qh);Gi.prototype.b=function(a,b){if(2>b.from.length)return a;this.a=a;Hi(this,this.a,b);return this.a};function Hi(a,b,c){if(b instanceof Xh&&b.I instanceof Ai){var d=b.I.N(),e=Le(b,0);e instanceof Zh&&(d=null!=c.b&&c.b.has(d),d=new fi(b.I,d),ni(b,e,d,d),b==a.a&&(a.a=d),b=d)}K(b).forEach(function(f){Hi(this,f,c)},a)};function Ii(){this.c=z()}q(Ii,Qh);Ii.prototype.b=function(a,b){if(void 0===b.B)return a;this.c.clear();this.a=a;Ji(this,this.a,b);this.c.clear();return this.a};function Ji(a,b,c){var d=function(f){K(f).forEach(e)}.bind(a),e=function(f){if(!this.c.has(f))if(f instanceof Xh){var g=f.I.A(),h=function(l){return Ki(this,l,g)}.bind(this);h=Li(this,c,f,h);this.c.add(f);h!=f&&(null===h.getParent()&&(this.a=h),e(h));d(f)}else d(f)}.bind(a);e(b)}
function Li(a,b,c,d){var e=c;if(Mi(b,c))e=li(c),Li(a,b,c,d);else if(Ni(c)){var f=[];e=mi(c,d,function(g){g=new Xh(g.I);f.push(g);return g});f.forEach(function(g){Li(this,b,g,d)},a)}return e}function Ki(a,b,c){var d=z();hi(b).forEach(function(e){d.add(e.table)},a);b instanceof Yh&&d.add(b.table);return Zc(d,c)}function Ni(a){a=Le(a,0);return a instanceof Zh||a instanceof fi}
function Mi(a,b){var c=Le(b,0);if(!(c instanceof Xh))return!1;if(null==a.b)return!0;b=b.I instanceof Ai;a=a.b.has(c.I.N());return b||!a};function Oi(a,b){vi.call(this,a);this.Mc=b;this.Ea=this.K=this.Sb=this.la=this.h=this.s=this.Qb=this.m=this.Ub=null}q(Oi,vi);
Oi.prototype.b=function(){Pi(this);2<=this.a.from.length&&(this.m=new Zh);this.Qb=null!=this.a.B?new Xh(this.a.B.Ma()):null;this.a.H&&(this.la=new ai(this.a.H));if(null!=this.a.G&&0<this.a.G||null!=this.a.c)this.Sb=new ei(this.a.G);null!=this.a.L&&(this.K=new di(this.a.L));null!=this.a.$&&(this.s=new ci(this.a.$));Qi(this);this.Ea=new $h(this.a.a||[],this.a.$||null);var a=Ri(this);return(new yi(a,this.a,this.Mc)).c()};
function Ri(a){for(var b=[a.K,a.Sb,a.Ea,a.la,a.h,a.s,a.Qb,a.m],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.Ub.forEach(function(g){L(b[c],g)});return d}function Pi(a){a.Ub=a.a.from.map(function(b){return new Yh(b)},a)}function Qi(a){var b=a.a.a.filter(function(c){return c instanceof E});null!=a.a.H&&a.a.H.forEach(function(c){c.F instanceof E&&b.push(c.F)});0<b.length&&(a.h=new bi(b))};function Si(a){jf.call(this,a)}q(Si,jf);Si.prototype.m=function(){var a=z();a.add(this.from);Ti(this,this.from.g(),a);return a};function Ti(a,b,c){var d=hd(Zd(a.S),b,1);hd(Zd(a.S),b).forEach(c.add.bind(c));d.forEach(function(e){Ti(this,e.g(),c)},a)}Si.prototype.clone=function(){var a=new Si(this.S);nf(a,this);a.from=this.from;return a};Si.prototype.bind=function(a){Si.qa.bind.call(this,a);of(this,a);return this};function Ui(a){jf.call(this,a)}q(Ui,jf);Ui.prototype.m=function(){var a=z();a.add(this.ha);var b=Zd(this.S);fd(this.ha.g(),b.s).forEach(a.add.bind(a));this.a&&hd(b,this.ha.g()).forEach(a.add.bind(a));return a};Ui.prototype.clone=function(){var a=new Ui(this.S);nf(a,this);a.ha=this.ha;this.values&&(a.values=this.values instanceof ne?this.values:this.values.slice());a.a=this.a;a.b=this.b;return a};
Ui.prototype.bind=function(a){Ui.qa.bind.call(this,a);this.b&&(this.b instanceof ne?this.values=a[this.b.a]:this.values=this.b.map(function(b){return b instanceof ne?a[b.a]:b}));return this};function Vi(a){jf.call(this,a)}q(Vi,jf);Vi.prototype.m=function(){var a=z();a.add(this.table);var b=this.set.map(function(d){return d.F.o()}),c=Zd(this.S);gd(c,b).forEach(a.add.bind(a));id(c,b).forEach(a.add.bind(a));return a};Vi.prototype.clone=function(){var a=new Vi(this.S);nf(a,this);a.table=this.table;a.set=this.set?Wi(this.set):this.set;return a};Vi.prototype.bind=function(a){Vi.qa.bind.call(this,a);this.set.forEach(function(b){-1!=b.fb&&(b.value=a[b.fb])});of(this,a);return this};
function Wi(a){return a.map(function(b){var c={},d;for(d in b)c[d]=b[d];return c})};function Xi(){this.b=[new pi,new ti,new Ii,new Gi];this.a=[new pi]}Xi.prototype.create=function(a){if(a instanceof Ui)var b=new wi(a);else if(a instanceof Si)b=new zi(a,this.a);else if(a instanceof pf)b=new Oi(a,this.b);else if(a instanceof Vi)b=new xi(a);else throw new v(513);b=b.c();return new Rh(b,a.m())};n("lf.fn.avg",function(a){return new E(a,"AVG")});function Yi(a){return new E(a||new pd,"COUNT")}n("lf.fn.count",Yi);function Zi(a){return new E(a,"DISTINCT")}n("lf.fn.distinct",Zi);n("lf.fn.max",function(a){return new E(a,"MAX")});n("lf.fn.min",function(a){return new E(a,"MIN")});n("lf.fn.stddev",function(a){return new E(a,"STDDEV")});n("lf.fn.sum",function(a){return new E(a,"SUM")});n("lf.fn.geomean",function(a){return new E(a,"GEOMEAN")});function T(a,b){J.call(this);this.m=b}q(T,J);T.prototype.exec=function(a,b){switch(this.m){case 1:return $i(this,a,b);case 0:return aj(this,a,b);default:return bj(this,a,b)}};T.prototype.toString=function(){return"dummy_node"};T.prototype.eb=function(){return this.toString()};function bj(a,b,c){return new t(function(d){d(this.a([],b,c))}.bind(a))}function $i(a,b,c){return Le(a,0).exec(b,c).then(function(d){return this.a(d,b,c)}.bind(a))}
function aj(a,b,c){var d=K(a).map(function(e){return e.exec(b,c)});return Pb(d).then(function(e){var f=[];e.forEach(function(g){for(var h=0;h<g.length;++h)f.push(g[h])});return this.a(f,b,c)}.bind(a))};function cj(a){T.call(this,-1,1);this.b=a}q(cj,T);cj.prototype.toString=function(){return"aggregation("+this.b.map(function(a){return a.o()}).toString()+")"};cj.prototype.a=function(a){a.forEach(function(b){dj(new ej(b,this.b))},this);return a};function ej(a,b){this.a=a;this.b=b}
function dj(a){a.b.forEach(function(b){b=od(b).reverse();for(var c=1;c<b.length;c++){var d=b[c],e=od(d).slice(-1)[0],f=d.a instanceof E?Ue(this.a,d.a):this.a;if(null!==f.a&&f.a.has(d.o()))break;f=fj(d.b,f,e);e=this.a;null===e.a&&(e.a=x());e.a.set(d.o(),f)}},a)}
function fj(a,b,c){var d=null;switch(a){case "MIN":d=gj(b,c,function(e,f){return f<e?f:e});break;case "MAX":d=gj(b,c,function(e,f){return f>e?f:e});break;case "DISTINCT":d=hj(b,c);break;case "COUNT":d=ij(b,c);break;case "SUM":d=jj(b,c);break;case "AVG":a=ij(b,c);0<a&&(d=jj(b,c)/a);break;case "GEOMEAN":d=kj(b,c);break;default:d=lj(b,c)}return d}function gj(a,b,c){return a.entries.reduce(function(d,e){e=N(e,b);return null===e?d:null===d?e:c(d,e)},null)}
function ij(a,b){return b instanceof pd?a.entries.length:a.entries.reduce(function(c,d){return c+(null===N(d,b)?0:1)},0)}function jj(a,b){return gj(a,b,function(c,d){return d+c})}function lj(a,b){var c=[];a.entries.forEach(function(d){d=N(d,b);null!==d&&c.push(d)});return 0==c.length?null:yb.apply(null,c)}function kj(a,b){var c=0;a=a.entries.reduce(function(d,e){e=N(e,b);return 0!=e&&null!==e?(c++,d+Math.log(e)):d},0);return 0==c?null:Math.pow(Math.E,a/c)}
function hj(a,b){var c=x();a.entries.forEach(function(d){var e=N(d,b);c.set(e,d)});return new M(y(c),a.A())};function mj(){T.call(this,2,0)}q(mj,T);mj.prototype.toString=function(){return"cross_product"};mj.prototype.a=function(a){var b=a[0],c=a[1];a=[];for(var d=b.A(),e=c.A(),f=0;f<b.entries.length;f++)for(var g=0;g<c.entries.length;g++){var h=cf(b.entries[f],d,c.entries[g],e);a.push(h)}b=b.A().concat(c.A());return[new M(a,b)]};function nj(a){T.call(this,1,1);this.b=a}q(nj,T);nj.prototype.toString=function(){return"delete("+this.b.g()+")"};nj.prototype.a=function(a,b){a=a[0].entries.map(function(c){return c.aa});b.remove(this.b,a);return[We()]};function oj(a,b){T.call(this,0,-1);this.table=b;this.b=a.j(Id)}q(oj,T);oj.prototype.toString=function(){return"get_row_count("+this.table.g()+")"};oj.prototype.a=function(){var a=this.b.get(nd(this.table)),b=new M([],[this.table.g()]),c=Yi();a=a.M().a;null===b.a&&(b.a=x());b.a.set(c.o(),a);return[b]};function pj(a,b){T.call(this,0,-1);this.b=a.j(Hd);this.c=a.j(Id);this.table=b}q(pj,T);pj.prototype.toString=function(){var a="table_access("+this.table.g();null!==this.table.ja&&(a+=" as "+this.table.ja);return a+")"};pj.prototype.a=function(){var a=this.c.get(nd(this.table)).Ja();return[Ze(Fg(this.b,a),[md(this.table)])]};function qj(a){this.c=a}q(qj,Qh);qj.prototype.b=function(a,b){this.a=a;if(!rj(b))return a;a=ii(a,function(c){return c instanceof pj})[0];b=new oj(this.c,a.table);ni(a,a,b,b);return this.a};function rj(a){return 1==a.a.length&&1==a.from.length&&null==a.B&&null==a.L&&null==a.G&&null==a.$?(a=a.a[0],a instanceof E&&"COUNT"==a.b&&a.a instanceof pd):!1};function sj(a){T.call(this,1,1);this.b=a}q(sj,T);sj.prototype.toString=function(){return"groupBy("+this.b.map(function(a){return a.o()}).toString()+")"};sj.prototype.a=function(a){return tj(this,a[0])};function tj(a,b){var c=new $c,d=function(e){return this.b.map(function(f){return N(e,f)},this).join(",")}.bind(a);b.entries.forEach(function(e){c.set(d(e),e)},a);return c.keys().map(function(e){return new M(c.get(e),b.A())},a)};function uj(a,b,c){T.call(this,2,0);this.s=a.j(Id);this.h=a.j(Hd);this.I=b;this.b=c;this.c="eq"==this.I.c?vj:wj;this.f=null}q(uj,T);var vj=0,wj=2,xj=["hash","index_nested_loop","nested_loop"];uj.prototype.toString=function(){return"join(type: "+(this.b?"outer":"inner")+", impl: "+xj[this.c]+", "+this.I.toString()+")"};
uj.prototype.a=function(a){switch(this.c){case vj:return[Ei(this.I,a[0],a[1],this.b)];case 1:return[Fi(this.I,a[0],a[1],this.f,this.h)];default:var b=this.I,c=a[0];a=a[1];var d=this.b,e=[c,a];d||(e=Bi(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.A(),g=a.A(),h=c.entries.length,l=a.entries.length,m=l+256-1>>8,p=0;p<m;){for(var B=0;B<h;B++){var G=!1,O=N(c.entries[B],b.a);if(null!==O)for(var H=Math.min(p+1<<8,l),D=p<<8;D<H;D++)if(b.f(O,N(a.entries[D],b.b))){G=!0;var la=cf(c.entries[B],f,a.entries[D],g);e.push(la)}d&&
!G&&e.push(Di(b,c.entries[B],f))}p++}b=c.A().concat(a.A());return[new M(e,b)]}};function yj(a,b){a.c=1;var c=a.s.get(b.$a().o());a.f={qc:b,Ac:b==a.I.a?a.I.b:a.I.a,index:c}};function zj(a){T.call(this,-1,-1);this.b=a}q(zj,T);zj.prototype.toString=function(){return"no_op_step("+this.b[0].A().join(",")+")"};zj.prototype.a=function(){return this.b};function Aj(){}q(Aj,Qh);Aj.prototype.b=function(a,b){this.a=a;if(!(1<b.from.length))return a;ii(a,function(c){return c instanceof uj}).forEach(this.c,this);return this.a};Aj.prototype.c=function(a){if("eq"==a.I.c&&!a.b){var b=function(e){if(!(e instanceof pj))return null;e=md(e.table)==md(a.I.b.X())?a.I.b:a.I.a;return null===e.$a()?null:e},c=b(Le(a,0));b=b(Le(a,1));if(null!==c||null!==b){b=null!==b?b:c;yj(a,b);var d=new M([],[md(b.X())]);Oe(a,new zj([d]),b==c?0:1)}}};function Bj(a){Qe.call(this);this.a=a;this.b=!1}q(Bj,Qe);k=Bj.prototype;k.Ma=function(){return gi(this,function(a){if(a instanceof Bj){var b=new Bj(a.a);b.b=a.b;a=a.N();b.O=a;return b}return a.Ma()})};k.ta=function(a){var b=a||[];Pe(this,function(c){c!=this&&c.ta(b)}.bind(this));a=z(b);return A(a)};k.A=function(a){var b=null!=a?a:z();Pe(this,function(c){c!=this&&c.A(b)}.bind(this));return b};k.nb=function(a){this.b!=a&&(this.b=a,this.a="and"==this.a?"or":"and",K(this).forEach(function(b){return b.nb(a)}))};
k.eval=function(a){var b=K(this).map(function(c){return c.eval(a)});return Cj(this,b)};function Cj(a,b){return"and"==a.a?Xe(b):Ye(b)}k.toString=function(){return"combined_pred_"+this.a.toString()};k.Db=function(){if("or"==this.a){var a=new He;K(this).forEach(function(b){b=b.Db().ba();a.add(b)});return a}return new He};function Dj(a){var b=null;return K(a).every(function(c){if(!(c instanceof df&&gf(c)))return!1;null===b&&(b=c.F);return b.o()==c.F.o()})};function Ej(a){a=a.map(function(c){return c.ba()});a=Db.apply(null,a);var b=[];Cb(a,function(c){b.push(c)});return b}function Fj(a){this.b=a}Fj.prototype.a=function(){return 1==this.b.a.length?[De()]:[this.b.a.map(function(){return De()})]};function Gj(a,b){this.b=a;this.h=b;this.c=this.f=null}function Hj(a,b){var c=x();a.h.keys().forEach(function(d){var e=this.h.get(d).map(function(g){return kf(b,g)},this),f=new He([De()]);e.forEach(function(g){f=Ie(f,g.Db())});c.set(d,f)},a);return c}
Gj.prototype.a=function(a){if(this.f==a)return this.c;for(var b=Hj(this,a),c=this.b.a.length-1;0<=c;c--){var d=this.b.a[c];if(null!==(b.get(d.S.g())||null))break;b.set(d.S.g(),new He([De()]))}this.c=1==this.b.a.length?y(b)[0].ba():Ej(Ij(this,b));this.f=a;return this.c};function Ij(a,b){var c=x(),d=0;a.b.a.forEach(function(e){c.set(e.S.g(),d);d++});return Wc(b).sort(function(e,f){return c.get(e)-c.get(f)}).map(function(e){return b.get(e)})};function Jj(a,b){this.a=b;this.b=a.j(Id)}function Kj(a){a=a.b.get(nd(a.a));return Math.floor(.02*a.M().a)}function Lj(a,b,c){c=c.filter(a.c,a);if(0==c.length)return null;a=Mj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(e,f){var g=Nj(f,b);return g<d?(d=g,f):e},null)}
function Mj(a,b){return a.a.ga().map(function(c){c=new Oj(this.b,c);Pj(c,b);return c},a).filter(function(c){if(null===c.Ka)c=!1;else{for(var d=!1,e=!0,f=0;f<c.oa.a.length;f++){var g=c.Ka.has(c.oa.a[f].S.g());if(d&&g){e=!1;break}g||(d=!0)}c=e}return c})}Jj.prototype.c=function(a){if(a instanceof df)a=!gf(a)||a.F.X()!=this.a||"in"==a.a&&a.value.length>Kj(this)?!1:!0;else{var b;a instanceof Bj?b="or"==a.a&&Dj(a)&&Le(a,0).F.X()==this.a?K(a).length<=Kj(this):!1:b=!1;a=b}return a};
function Oj(a,b){this.c=a;this.oa=b;this.b=z(this.oa.a.map(function(c){return c.S.g()}));this.a=this.Ka=null}function Qj(a){null===a.a&&(a.a=new Gj(a.oa,a.Ka));return a.a}function Pj(a,b){b.forEach(function(c){var d=c.ta()[0].g();this.b.has(d)&&(null===this.Ka&&(this.Ka=new $c),this.Ka.set(d,c.N()))},a)}function Nj(a,b){b=Qj(a).a(b);var c=a.c.get(a.oa.o());return b.reduce(function(d,e){return d+c.gb(e)},0)};function Rj(a,b,c,d){T.call(this,0,-1);this.s=a.j(Id);this.index=b;this.h=c;this.f=d;this.c=this.b=!1}q(Rj,T);Rj.prototype.toString=function(){return"index_range_scan("+this.index.o()+", ?, "+(this.f?"reverse":"natural")+(this.b?", limit:?":"")+(this.c?", skip:?":"")+")"};Rj.prototype.eb=function(a){var b=this.toString(),c=this.h.a(a);b=b.replace("?",c.toString());this.b&&(b=b.replace("?",a.L.toString()));this.c&&(b=b.replace("?",a.G.toString()));return b};
Rj.prototype.a=function(a,b,c){a=this.h.a(c);b=this.s.get(this.index.o());c=(1==a.length&&a[0]instanceof ye&&Ee(a[0])?Gg(b.get(a[0].from),!1,this.b?c.L:void 0,this.c?c.G:void 0):b.Ja(a,this.f,this.b?c.L:void 0,this.c?c.G:void 0)).map(function(d){return new Kc(d,{})},this);return[Ze(c,[this.index.b])]};function Sj(){T.call(this,-1,0)}q(Sj,T);Sj.prototype.toString=function(){return"multi_index_range_scan()"};
Sj.prototype.a=function(a){var b=x();a.forEach(function(d){d.entries.forEach(function(e){b.set(e.aa.id(),e)})});var c=y(b);return[new M(c,a[0].A())]};function Tj(a){T.call(this,1,1);this.b=a}q(Tj,T);Tj.prototype.toString=function(){return"select(?)"};Tj.prototype.eb=function(a){a=kf(a,this.b);return this.toString().replace("?",a.toString())};Tj.prototype.a=function(a,b,c){return[kf(c,this.b).eval(a[0])]};function Uj(a,b){T.call(this,1,1);this.c=a.j(Hd);this.b=b}q(Uj,T);Uj.prototype.toString=function(){return"table_access_by_row_id("+this.b.g()+")"};Uj.prototype.a=function(a){return[Ze(Fg(this.c,Te(a[0])),[md(this.b)])]};function Vj(a){this.c=a}q(Vj,Qh);Vj.prototype.b=function(a,b){this.a=a;ii(a,function(c){return c instanceof pj}).forEach(function(c){var d=Wj(c);if(0!=d.length){var e=Lj(new Jj(this.c,c.table),b,d.map(function(g){return kf(b,g.b)}));if(null!==e){var f=x();d.forEach(function(g){f.set(g.b,g)},this);this.a=Xj(this,e,f,c)}}},this);return this.a};function Wj(a){var b=[];for(a=a.getParent();a;){if(a instanceof Tj)b.push(a);else if(a instanceof uj)break;a=a.getParent()}return b}
function Xj(a,b,c,d){(null!==b.Ka?b.Ka.values():[]).map(function(e){return c.get(e)}).forEach(ji);b=new Rj(a.c,b.oa,Qj(b),!1);a=new Uj(a.c,d.table);L(a,b);ni(d,d,a,b);return b.na()};function Yj(a,b){T.call(this,0,-1);this.c=a.j(Id);this.b=b}q(Yj,T);Yj.prototype.toString=function(){return"insert("+this.b.g()+")"};Yj.prototype.a=function(a,b,c){Zj(this.b,c.values,this.c);b.Ca(this.b,c.values);return[Ze(c.values,[this.b.g()])]};function Zj(a,b,c){a=a.a.a;if(null===a?0:a.a[0].autoIncrement){var d=a.a[0].S.g();c=c.get(a.o()).M().b;var e=null===c?0:c;b.forEach(function(f){if(0==f.u[d]||null==f.u[d])e++,f.u[d]=e})}}function ak(a,b){T.call(this,0,-1);this.c=a.j(Id);this.b=b}q(ak,T);
ak.prototype.toString=function(){return"insert_replace("+this.b.g()+")"};ak.prototype.a=function(a,b,c){Zj(this.b,c.values,this.c);b.rb(this.b,c.values);return[Ze(c.values,[this.b.g()])]};function bk(){T.call(this,1,1)}q(bk,T);bk.prototype.toString=function(){return"limit(?)"};bk.prototype.eb=function(a){return this.toString().replace("?",a.L.toString())};bk.prototype.a=function(a,b,c){a[0].entries.splice(c.L);return a};function ck(a){T.call(this,-1,1);this.H=a}q(ck,T);ck.prototype.toString=function(){return"order_by("+qf(this.H)+")"};ck.prototype.a=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.H.length;d++){var e=Zi(this.H[d].F);if(null!==b.a&&b.a.has(e.o())){c=e;break}}b=c;(null===b?a[0]:Ue(a[0],b)).entries.sort(this.b.bind(this))}else a.sort(this.c.bind(this));return a};
function dk(a,b,c){var d=-1;do{d++;var e=a.H[d].F;var f=a.H[d].order;var g=b(e);e=c(e)}while(g==e&&d+1<a.H.length);a=g<e?-1:g>e?1:0;return 1==f?a:-a}ck.prototype.c=function(a,b){return dk(this,function(c){return c instanceof E?Ue(a,c):N(a.entries[a.entries.length-1],c)},function(c){return c instanceof E?Ue(b,c):N(b.entries[b.entries.length-1],c)})};ck.prototype.b=function(a,b){return dk(this,function(c){return N(a,c)},function(c){return N(b,c)})};function ek(a,b){this.a=a;this.b=b}function fk(a){return a.b.some(function(b){return b instanceof E},a)?gk(a):hk(a)}function gk(a){if(1==a.b.length&&"DISTINCT"==a.b[0].b)return a=Ue(a.a,a.b[0]).entries.map(function(c){var d=new $e(new Kc(-1,{}),1<this.a.b.size);bf(d,this.b[0],N(c,this.b[0].a));return d},a),new M(a,[]);var b=new $e(new Kc(-1,{}),1<a.a.b.size);a.b.forEach(function(c){var d=c instanceof E?Ue(this.a,c):N(this.a.entries[0],c);bf(b,c,d)},a);return new M([b],a.a.A())}
function hk(a){var b=Array(a.a.entries.length),c=1<a.a.b.size;a.a.entries.forEach(function(d,e){b[e]=new $e(new Kc(d.aa.id(),{}),c);this.b.forEach(function(f){bf(b[e],f,N(d,f))},this)},a);return new M(b,a.a.A())}function ik(a,b){var c=a.map(function(d){return fk(new ek(d,b)).entries[0]});return new M(c,a[0].A())};function jk(a,b){T.call(this,-1,1);this.b=a;this.c=b}q(jk,T);jk.prototype.toString=function(){var a="project("+this.b.toString();if(null!==this.c){var b=this.c.map(function(c){return c.o()}).join(", ");a+=", groupBy("+b+")"}return a+")"};jk.prototype.a=function(a){0==a.length?a=[We()]:1==a.length?(a=a[0],a=[0==this.b.length?a:fk(new ek(a,this.b))]):a=[ik(a,this.b)];return a};function kk(a){return a.b.some(function(b){return b instanceof E})||null!==a.c};function lk(){T.call(this,1,1)}q(lk,T);lk.prototype.toString=function(){return"skip(?)"};lk.prototype.eb=function(a){return this.toString().replace("?",a.G.toString())};lk.prototype.a=function(a,b,c){return[new M(a[0].entries.slice(c.G),a[0].A())]};function mk(){}q(mk,Qh);mk.prototype.b=function(a,b){if(void 0===b.L&&void 0===b.G)return a;var c=nk(a);if(null===c)return a;ii(a,function(d){return d instanceof bk||d instanceof lk}).forEach(function(d){d instanceof bk?c.b=!0:c.c=!0;ji(d)},this);return c.na()};function nk(a){a=ii(a,function(b){return b instanceof Rj},function(b){return b instanceof jk&&kk(b)||b instanceof ck||1!=K(b).length||b instanceof Tj});return 0<a.length?a[0]:null};function ok(a){this.c=a}q(ok,Qh);ok.prototype.b=function(a,b){this.a=a;var c=pk(this,b);if(0==c.length)return this.a;var d=0;do{var e=c[d++];a=qk(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.a;b=rk(this,a[0].oa.b);return null===b?this.a:this.a=sk(this,e,b,a)};function pk(a,b){return ii(a.a,function(c){if(!(c instanceof Tj))return!1;c=kf(b,c.b);return c instanceof Bj&&"or"==c.a})}function rk(a,b){return ii(a.a,function(c){return c instanceof pj&&c.table.g()==b})[0]||null}
function qk(a,b,c){b=kf(c,b.b);var d=b.A();if(1!=d.size)return null;d=A(d)[0];var e=new Jj(a.c,d),f=null;return K(b).every(function(g){g=Lj(e,c,[g]);null!==g&&(null===f?f=[g]:f.push(g));return null!==g})?f:null}function sk(a,b,c,d){var e=new Uj(a.c,c.table),f=new Sj;L(e,f);d.forEach(function(g){g=new Rj(this.c,g.oa,Qj(g),!1);L(f,g)},a);ji(b);ni(c,c,e,f);return f.na()};function tk(a){this.a=a}q(tk,Qh);tk.prototype.b=function(a,b){b=uk(a,b);if(null===b)return a;a:{var c=b;a=vk(Le(b,0));if(null!==a){var d=b.H;for(var e=null,f=a.table.ga(),g=0;g<f.length&&null===e;g++)e=wk(f[g],d);d=e;if(null===d){a=c;break a}c=new Rj(this.a,d.oa,new Fj(d.oa),d.Nb);d=new Uj(this.a,a.table);L(d,c);ji(b);c=ni(a,a,d,c)}a=c}a==b&&(a=b,c=xk(Le(b,0)),null!==c&&(d=wk(c.index,b.H),null!==d&&(c.f=d.Nb,a=ji(b).parent)));return a.na()};
function xk(a){a=ii(a,function(b){return b instanceof Rj},function(b){return 1!=K(b).length});return 0<a.length?a[0]:null}function vk(a){a=ii(a,function(b){return b instanceof pj},function(b){return 1!=K(b).length});return 0<a.length?a[0]:null}function uk(a,b){return void 0===b.H?null:ii(a,function(c){return c instanceof ck})[0]}function wk(a,b){if(a.a.length!=b.length||!b.every(function(c,d){return c.F.g()==a.a[d].S.g()}))return null;b=yk(b,a);return b[0]||b[1]?{oa:a,Nb:b[1]}:null}
function yk(a,b){var c=a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0),d=b.a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.a.length))-1]};function zk(a,b,c){this.a=a;this.b=b;this.c=c}function Ak(a){a.c.forEach(function(b){this.a=b.b(this.a,this.b)},a);return a.a};function Bk(a){T.call(this,1,1);this.b=a}q(Bk,T);Bk.prototype.toString=function(){return"update("+this.b.g()+")"};Bk.prototype.a=function(a,b,c){a=a[0].entries.map(function(d){var e=this.b.sa(Mc(d.aa));c.set.forEach(function(f){e.u[f.F.g()]=f.value},this);return e},this);b.update(this.b,a);return[We()]};function Ck(a){this.a=a;this.c=[new Aj,new Vj(this.a),new ok(this.a),new tk(this.a),new mk,new qj(this.a)];this.b=[new Vj(this.a)]}Ck.prototype.create=function(a,b){var c=a.na();if(c instanceof Uh||c instanceof Th)return Dk(this,a,b);if(c instanceof $h||c instanceof di||c instanceof ei)return Dk(this,a,b,this.c);if(c instanceof Vh||c instanceof Wh)return Dk(this,a,b,this.b);throw new v(8);};function Dk(a,b,c,d){a=gi(b.na(),a.f.bind(a));null!=d&&(a=Ak(new zk(a,c,d)));return new le(a,b.b)}
Ck.prototype.f=function(a){if(a instanceof $h)return new jk(a.b,a.a);if(a instanceof ci)return new sj(a.a);if(a instanceof bi)return new cj(a.a);if(a instanceof ai)return new ck(a.H);if(a instanceof ei)return new lk;if(a instanceof di)return new bk;if(a instanceof Xh)return new Tj(a.I.N());if(a instanceof Zh)return new mj;if(a instanceof fi)return new uj(this.a,a.I,a.a);if(a instanceof Yh)return new pj(this.a,a.table);if(a instanceof Vh)return new nj(a.table);if(a instanceof Wh)return new Bk(a.table);
if(a instanceof Uh)return new ak(this.a,a.table);if(a instanceof Th)return new Yj(this.a,a.table);throw new v(514);};function Ek(a){this.a=new Xi;this.b=new Ck(a)};function Fk(){this.a=x()}function Gk(a,b){var c=a.a.get(b.g())||null;null===c&&(c=new Hk,a.a.set(b.g(),c));return c}function Ik(a,b,c,d){c.forEach(function(e){e=Gk(this,e);0==d?(e.b=null,e.f=b):3==d?(null===e.c&&(e.c=z()),e.c.add(b),null===e.a&&(e.a=z()),e.a.delete(b)):1==d?(null===e.a&&(e.a=z()),e.a.add(b)):2==d&&(e.b=b)},a)}
function Jk(a,b,c,d){var e=!0;c.forEach(function(f){if(e){f=Gk(this,f);var g=null===f.a||0==f.a.size;e=0==d?(null===f.c||0==f.c.size)&&g&&null===f.f&&null!==f.b&&f.b==b:3==d?null===f.f&&null===f.b&&null!==f.a&&f.a.has(b):1==d?null===f.b:g&&(null===f.b||f.b==b)}},a);return e}function Kk(a,b,c,d){var e=Jk(a,b,c,d);e&&Ik(a,b,c,d);return e}function Lk(a,b,c){c.forEach(function(d){d=Gk(this,d);d.f==b&&(d.f=null);d.b==b&&(d.b=null);null!==d.a&&d.a.delete(b);null!==d.c&&d.c.delete(b)},a)}
function Mk(a,b){b.forEach(function(c){Gk(this,c).b=null},a)}function Hk(){this.c=this.a=this.b=this.f=null};function Nk(){this.b=new Ok;this.a=new Fk}function xf(a,b){(2>b.wa()||2>b.wa())&&Mk(a.a,b.pa());a.b.Ca(b);Pk(a);return b.Ia().a}function Pk(a){for(var b=a.b.ba(),c=0;c<b.length;c++){var d=b[c];if(0==d.D()?Qk(a,d,1,3):Qk(a,d,2,0)){a.b.remove(d);var e=a;d.exec().then(e.f.bind(e,d),e.c.bind(e,d))}}}function Qk(a,b,c,d){var e=!1;Kk(a.a,b.N(),b.pa(),c)&&(e=Kk(a.a,b.N(),b.pa(),d));return e}Nk.prototype.f=function(a,b){Lk(this.a,a.N(),a.pa());a.Ia().resolve(b);Pk(this)};
Nk.prototype.c=function(a,b){Lk(this.a,a.N(),a.pa());a.Ia().b(b);Pk(this)};function Ok(){this.a=[]}Ok.prototype.Ca=function(a){Jg(this.a,a,function(b,c){var d=b.wa()-c.wa();return 0==d?b.N()-c.N():d})};Ok.prototype.ba=function(){return this.a.slice()};Ok.prototype.remove=function(a){var b=this.a;a=Fa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Rk(a,b){var c=a.j(Md),d=b||{};b=new Dg(c);a.xa(Hd,b);b=null;var e=!1;null==d.storeType?(b=Uc(),b=b.b?0:b.h?4:1):b=d.storeType;switch(b){case 0:b=new Zf(a,c);break;case 1:b=new fg(c);break;case 5:b=new hg(c);break;case 4:b=new qg(a,c,d.webSqlDbSize);break;case 3:b=new Kf(c,d.firebase);e=!0;break;default:throw new v(300);}a.xa(Gd,b);var f=new Ph;a.xa(Id,f);return b.ca(d.onUpgrade).then(function(){var g=new Ek(a);a.xa(Jd,g);g=new Nk;a.xa(Kd,g);g=new zg;a.xa(Ld,g);return f.ca(c)}).then(function(){if(e){var g=
new yf(a);g.a.Za(g.f.bind(g))}d.enableInspector&&(window.top["#lfInspect"]=Jh);return(new zh(a)).ca(c)})};function Sk(a){return Tk("and",Array.prototype.slice.call(arguments))}n("lf.op.and",Sk);n("lf.op.or",function(a){return Tk("or",Array.prototype.slice.call(arguments))});function Tk(a,b){var c=new Bj(a);b.forEach(function(d){L(c,d)});return c}n("lf.op.not",function(a){a.nb(!0);return a});function Uk(a,b,c){return null===b?new df(a,b,c):void 0!==b.o?new Ai(a,b,c):new df(a,b,c)};function Vk(a){this.b=a;this.a=a.j(Md);this.f=z(this.a.W());this.c=Qb()}function Wk(a){var b=a.b.j(Id),c=a.b.j(Hd),d={};a.a.W().forEach(function(e){var f=b.get(nd(e)).Ja();f=Fg(c,f).map(function(g){return g.u});d[e.g()]=f});return{name:a.a.name(),version:a.a.version(),tables:d}}k=Vk.prototype;k.exec=function(){var a=Wk(this);a=new $e(new Kc(-1,a),!0);return u([new M([a],[])])};k.D=function(){return 0};k.pa=function(){return this.f};k.Ia=function(){return this.c};k.N=function(){return xa(this)};
k.wa=function(){return 0};function Xk(a,b){this.s=a;this.b=a.j(Md);this.c=z(this.b.W());this.K=Qb();this.a=b;this.f=a.j(Gd);this.m=a.j(Hd);this.h=a.j(Id)}k=Xk.prototype;k.exec=function(){if(!this.f.cb())throw new v(300);a:{var a=this.b.W();for(var b=0;b<a.length;++b)if(0<this.h.get(nd(a[b])).M().a){a=!1;break a}a=!0}if(!a)throw new v(110);if(this.b.name()!=this.a.name||this.b.version()!=this.a.version)throw new v(111);if(null==this.a.tables)throw new v(112);return Yk(this)};k.D=function(){return 1};k.pa=function(){return this.c};
k.Ia=function(){return this.K};k.N=function(){return xa(this)};k.wa=function(){return 0};function Yk(a){var b=new ge(a.s,a.c);b=a.f.Ha(a.D(),A(a.c),b);for(var c in a.a.tables){var d=a.b.table(c),e=a.a.tables[c].map(function(h){return d.Aa(h)}),f=b.a(c,d.sa);Eg(a.m,c,e);var g=a.h.a.get(c)||[];e.forEach(function(h){g.forEach(function(l){var m=h.va(l.g());l.add(m,h.id())})});f.put(e)}return b.U()};function Zk(a,b){this.a=a;this.f=b||null;this.c=z(this.a.ua().W());this.b=Qb()}k=Zk.prototype;k.exec=function(){if(!this.a.b)return u();this.a.close();return this.a.ca(this.f||void 0).then(function(a){return a}.bind(this),function(a){this.a.close();throw a;}.bind(this))};k.D=function(){return 1};k.pa=function(){return this.c};k.Ia=function(){return this.b};k.N=function(){return xa(this)};k.wa=function(){return 0};function $k(a,b){this.s=a;this.la=a.j(Gd);this.K=a.j(Kd);this.Ea=a.j(Ld);this.c=z(b);this.b=new ge(this.s,this.c);this.f=Qb();this.a=Qb();this.m=Qb()}k=$k.prototype;k.exec=function(){this.m.resolve();return this.a.a};k.D=function(){return 1};k.pa=function(){return this.c};k.Ia=function(){return this.f};k.N=function(){return xa(this)};k.wa=function(){return 2};function al(a){xf(a.K,a);return a.m.a}
function bl(a,b){b=b.Wa();return b.xb.na().exec(a.b,b.context).then(function(c){return Se(c[0])},function(c){this.b.La();var d=new Tb(c.name);this.a.b(d);throw c;}.bind(a))}k.U=function(){this.h=this.la.Ha(this.D(),A(this.c),this.b);this.h.U().then(function(){var a=wf(this.Ea,this.c);0!=a.length&&(a=new tf(this.s,a),xf(this.K,a));this.a.resolve()}.bind(this),function(a){this.b.La();this.a.b(a)}.bind(this));return this.f.a};k.La=function(){this.b.La();this.a.resolve();return this.f.a};
k.M=function(){var a=null;null!=this.h&&(a=this.h.M());return null===a?new F(!1,0,0,0,0):a};function cl(a,b){rf.call(this,a,b);this.Ea=a.j(Kd);this.m=a.j(Ld)}q(cl,rf);cl.prototype.wa=function(){return 2};cl.prototype.wb=function(a){0==this.D()?dl(this,a):(a=wf(this.m,this.pa()),0!=a.length&&(a=new tf(this.h,a),xf(this.Ea,a)))};function dl(a,b){a.a.forEach(function(c,d){c instanceof pf&&uf(this.m,c,b[d])},a)};function U(a){this.c=a;this.f=a.j(Kd);this.a=null;this.b=el;0==fl.size&&(fl.set(el,z([1,4])),fl.set(1,z([2])),fl.set(2,z([3,5,6])),fl.set(3,z([2,7])),fl.set(4,z([7])),fl.set(5,z([7])),fl.set(6,z([7])))}n("lf.proc.Transaction",U);var el=0,fl=x();function gl(a,b){var c=fl.get(a.b)||null;if(null!==c&&c.has(b))a.b=b;else throw new v(107,a.b,b);}
U.prototype.exec=function(a){gl(this,4);var b=[];try{a.forEach(function(c){c.b();b.push(c.Wa())},this)}catch(c){return gl(this,7),Mb(c)}this.a=new cl(this.c,b);return xf(this.f,this.a).then(function(c){gl(this,7);return c.map(function(d){return Se(d)})}.bind(this),function(c){gl(this,7);throw c;}.bind(this))};U.prototype.exec=U.prototype.exec;U.prototype.$b=function(a){gl(this,1);this.a=new $k(this.c,a);return al(this.a).then(function(){gl(this,2)}.bind(this))};U.prototype.begin=U.prototype.$b;
U.prototype.Zb=function(a){gl(this,3);try{a.b()}catch(b){return gl(this,7),Mb(b)}return bl(this.a,a).then(function(b){gl(this,2);return b}.bind(this),function(b){gl(this,7);throw b;}.bind(this))};U.prototype.attach=U.prototype.Zb;U.prototype.U=function(){gl(this,5);return this.a.U().then(function(){gl(this,7)}.bind(this))};U.prototype.commit=U.prototype.U;U.prototype.La=function(){gl(this,6);return this.a.La().then(function(){gl(this,7)}.bind(this))};U.prototype.rollback=U.prototype.La;
U.prototype.M=function(){if(7!=this.b)throw new v(105);return this.a.M()};U.prototype.stats=U.prototype.M;function hl(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Pc(b)+"'";default:return"'"+b.toString()+"'"}}function il(a,b){var c=a.a?"INSERT OR REPLACE":"INSERT",d=a.ha.ta();c+=" INTO "+a.ha.g()+"(";c+=d.map(function(e){return e.g()}).join(", ");c+=") VALUES (";return a.values.map(function(e){var f=d.map(function(g){var h=e.u[g.g()];return b?null!=h?"#":"NULL":hl(g.D(),h)});return c+f.join(", ")+");"}).join("\n")}
function jl(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function kl(a,b,c,d){return a instanceof ne?"?"+a.a.toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(e){return hl(c,e)}).join(", ")+")":"between"==b?hl(c,a[0])+" AND "+hl(c,a[1]):hl(c,a).toString()}
function ll(a,b){return K(a).map(function(c){return"("+ml(c,b)+")"}).join("and"==a.a?" AND ":" OR ")}function nl(a){return[a.a.o(),jl(a.c),a.b.o()].join(" ")}function ml(a,b){if(a instanceof df){var c=a.F.o(),d=jl(a.a);a=kl(a.value,a.a,a.F.D(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Bj)return ll(a,b);if(a instanceof Ai)return nl(a);throw new v(357,typeof a);}
function ol(a,b){return(a=ml(a,b))?" WHERE "+a:""}function pl(a,b){var c="UPDATE "+a.table.g()+" SET ";c+=a.set.map(function(d){var e=d.F.o()+" = ";return-1!=d.fb?e+"?"+d.fb.toString():e+hl(d.F.D(),d.value).toString()}).join(", ");a.B&&(c+=ol(a.B,b));return c+";"}
function ql(a,b){var c="*";a.a.length&&(c=a.a.map(function(d){return d.Oa()?d.o()+" AS "+d.Oa():d.o()}).join(", "));c="SELECT "+c+" FROM ";null!=a.b&&0!=a.b.size?c+=rl(a,b):(c+=a.from.map(sl).join(", "),a.B&&(c+=ol(a.B,b)));a.H&&(b=a.H.map(function(d){return d.F.o()+(0==d.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.$&&(b=a.$.map(function(d){return d.o()}).join(", "),c+=" GROUP BY "+b);a.L&&(c+=" LIMIT "+a.L.toString());a.G&&(c+=" SKIP "+a.G.toString());return c+";"}
function sl(a){return md(a)!=a.g()?a.g()+" AS "+md(a):a.g()}function rl(a,b){for(var c=ii(a.B,function(h){return h instanceof Ai}),d=c.map(nl),e=sl(a.from[0]),f=1;f<a.from.length;f++){var g=sl(a.from[f]);e=a.b.has(c[d.length-f].N())?e+(" LEFT OUTER JOIN "+g):e+(" INNER JOIN "+g);e+=" ON ("+d[d.length-f]+")"}a=a.B;a=0<K(a).length?Le(a,0):a;a instanceof Ai||(e+=" WHERE "+ml(a,b));return e}
function tl(a,b){b=b||!1;a=a.a.clone();if(a instanceof Ui)return il(a,b);if(a instanceof Si){var c="DELETE FROM "+a.from.g();a.B&&(c+=ol(a.B,b));return c+";"}if(a instanceof Vi)return pl(a,b);if(a instanceof pf)return ql(a,b);throw new v(358,typeof a);};function V(a,b){this.h=a;this.K=a.j(Jd);this.s=a.j(Kd);this.a=b}n("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.b()}catch(a){return Mb(a)}return new t(function(a,b){var c=new cl(this.h,[this.Wa()]);xf(this.s,c).then(function(d){a(Se(d[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.jc=function(){var a=function(b){return b.eb(this.a)+"\n"}.bind(this);return oi(Cg(this).na(),a)};V.prototype.explain=V.prototype.jc;V.prototype.bind=function(a){this.a.bind(a);return this};
V.prototype.bind=V.prototype.bind;V.prototype.Ic=function(a){return tl(this,a)};V.prototype.toSql=V.prototype.Ic;V.prototype.b=function(){};function Cg(a){if(null==a.m){var b=a.K;var c=a.a,d=b.a.create(c);b=b.b.create(d,c);a.m=b}return a.m}V.prototype.Wa=function(){return{context:this.a.clone(),xb:Cg(this)}};function ul(a){V.call(this,a,new Si(a.j(Md)))}q(ul,V);n("lf.query.DeleteBuilder",ul);ul.prototype.from=function(a){if(null!=this.a.from)throw new v(515);this.a.from=a;return this};ul.prototype.from=ul.prototype.from;ul.prototype.B=function(a){if(null==this.a.from)throw new v(548);if(null!=this.a.B)throw new v(516);this.a.B=a;return this};ul.prototype.where=ul.prototype.B;ul.prototype.b=function(){ul.qa.b.call(this);if(null==this.a.from)throw new v(517);};function vl(a,b){V.call(this,a,new Ui(a.j(Md)));this.a.a=b||!1}q(vl,V);n("lf.query.InsertBuilder",vl);vl.prototype.b=function(){vl.qa.b.call(this);var a=this.a;if(null==a.ha||null==a.values)throw new v(518);if(a.a&&null===a.ha.a.a)throw new v(519);};vl.prototype.ha=function(a){if(null!=this.a.ha)throw new v(520);this.a.ha=a;return this};vl.prototype.into=vl.prototype.ha;
vl.prototype.values=function(a){if(null!=this.a.values)throw new v(521);a instanceof ne||a.some(function(b){return b instanceof ne})?this.a.b=a:this.a.values=a;return this};vl.prototype.values=vl.prototype.values;function W(a,b){V.call(this,a,new pf(a.j(Md)));this.f=this.c=!1;this.a.a=b;wl(this);xl(this)}q(W,V);n("lf.query.SelectBuilder",W);W.prototype.b=function(){W.qa.b.call(this);var a=this.a;if(null==a.from)throw new v(522);if(void 0!==a.f&&void 0===a.L||void 0!==a.c&&void 0===a.G)throw new v(523);null!=this.a.$?yl(this):zl(this)};function wl(a){var b=a.a.a.filter(function(c){return c instanceof E&&"DISTINCT"==c.b},a);if(0!=b.length&&(1!=b.length||1!=a.a.a.length))throw new v(524);}
function yl(a){if(a.a.$.some(function(b){b=b.D();return 6==b||0==b}))throw new v(525);}function zl(a){var b=a.a.a.some(function(c){return c instanceof E},a);a=a.a.a.some(function(c){return!(c instanceof E)},a)||0==a.a.a.length;if(b&&a)throw new v(526);}function xl(a){a.a.a.forEach(function(b){if(b instanceof E&&!Al(b.b,b.D()))throw new v(527,b.o());},a)}function Bl(a,b){if(null==a.a.from)throw new v(b);}
W.prototype.from=function(a){if(this.f)throw new v(515);this.f=!0;null==this.a.from&&(this.a.from=[]);this.a.from.push.apply(this.a.from,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.from;W.prototype.B=function(a){Bl(this,548);if(this.c)throw new v(516);this.c=!0;Cl(this,a);return this};W.prototype.where=W.prototype.B;function Cl(a,b){null!=a.a.B?(b=Sk(b,a.a.B),a.a.B=b):a.a.B=b}
W.prototype.sc=function(a,b){Bl(this,542);if(this.c)throw new v(547);this.a.from.push(a);Cl(this,b);return this};W.prototype.innerJoin=W.prototype.sc;W.prototype.wc=function(a,b){Bl(this,542);if(!(b instanceof Ai))throw new v(541);if(this.c)throw new v(547);this.a.from.push(a);null==this.a.b&&(this.a.b=z());var c=b;md(a)!=md(b.b.X())&&(c=b.reverse());this.a.b.add(c.N());Cl(this,c);return this};W.prototype.leftOuterJoin=W.prototype.wc;
W.prototype.L=function(a){if(null!=(this.a.L||this.a.f))throw new v(528);if(a instanceof ne)this.a.f=a;else{if(0>a)throw new v(531);this.a.L=a}return this};W.prototype.limit=W.prototype.L;W.prototype.G=function(a){if(null!=(this.a.G||this.a.c))throw new v(529);if(a instanceof ne)this.a.c=a;else{if(0>a)throw new v(531);this.a.G=a}return this};W.prototype.skip=W.prototype.G;W.prototype.H=function(a,b){Bl(this,549);null==this.a.H&&(this.a.H=[]);this.a.H.push({F:a,order:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.H;W.prototype.$=function(a){Bl(this,549);if(null!=this.a.$)throw new v(530);null==this.a.$&&(this.a.$=[]);this.a.$.push.apply(this.a.$,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.$;function Al(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.h,this.a.a);a.a=this.a.clone();a.a.h=null;return a};W.prototype.clone=W.prototype.clone;function Dl(a,b){V.call(this,a,new Vi(a.j(Md)));this.a.table=b}q(Dl,V);n("lf.query.UpdateBuilder",Dl);Dl.prototype.set=function(a,b){a={fb:b instanceof ne?b.a:-1,F:a,value:b};null!=this.a.set?this.a.set.push(a):this.a.set=[a];return this};Dl.prototype.set=Dl.prototype.set;Dl.prototype.B=function(a){if(null!=this.a.B)throw new v(516);this.a.B=a;return this};Dl.prototype.where=Dl.prototype.B;
Dl.prototype.b=function(){Dl.qa.b.call(this);if(null==this.a.set)throw new v(532);if(this.a.set.some(function(a){return a.value instanceof ne}))throw new v(501);};function X(a){this.a=a;this.f=a.j(Md);this.b=!1}n("lf.proc.Database",X);X.prototype.ca=function(a){this.a.xa(Md,this.f);return Rk(this.a,a).then(function(){this.b=!0;this.c=this.a.j(Kd);return this}.bind(this))};X.prototype.init=X.prototype.ca;X.prototype.ua=function(){return this.f};X.prototype.getSchema=X.prototype.ua;function El(a){if(!a.b)throw new v(2);}X.prototype.select=function(a){El(this);return new W(this.a,1==arguments.length&&null==arguments[0]?[]:Array.prototype.slice.call(arguments))};
X.prototype.select=X.prototype.select;X.prototype.Ca=function(){El(this);return new vl(this.a)};X.prototype.insert=X.prototype.Ca;X.prototype.rb=function(){El(this);return new vl(this.a,!0)};X.prototype.insertOrReplace=X.prototype.rb;X.prototype.update=function(a){El(this);return new Dl(this.a,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){El(this);return new ul(this.a)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){El(this);this.a.j(Ld).ob(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){El(this);this.a.j(Ld).yb(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.ec=function(){El(this);return new U(this.a)};X.prototype.createTransaction=X.prototype.ec;X.prototype.close=function(){try{this.a.j(Gd).close()}catch(a){}this.a.clear();this.b=!1};X.prototype.close=X.prototype.close;
X.prototype.kc=function(){El(this);var a=new Vk(this.a);return xf(this.c,a).then(function(b){return Se(b[0])[0]})};X.prototype["export"]=X.prototype.kc;X.prototype.reset=function(a){a=new Zk(this,a);return xf(this.c,a).then(function(){return null})};X.prototype.reset=X.prototype.reset;X.prototype.import=function(a){El(this);a=new Xk(this.a,a);return xf(this.c,a).then(function(){return null})};X.prototype["import"]=X.prototype.import;t.prototype.catch=t.prototype.Cb;t.prototype["catch"]=t.prototype.catch;function Y(a,b,c,d,e,f){this.f=a;this.a=b;this.m=c;this.h=d;this.s=e;this.ja=f||null}n("lf.schema.BaseColumn",Y);k=Y.prototype;k.g=function(){return this.a};k.o=function(){return md(this.f)+"."+this.a};k.toString=function(){return this.o()};k.X=function(){return this.f};k.D=function(){return this.s};Y.prototype.getType=Y.prototype.D;Y.prototype.Oa=function(){return this.ja};
Y.prototype.ga=function(){null==this.c&&(this.c=[],this.X().ga().forEach(function(a){-1!=a.a.map(function(b){return b.S.g()}).indexOf(this.a)&&this.c.push(a)},this));return this.c};Y.prototype.$a=function(){if(void 0===this.b){var a=this.ga().filter(function(b){return 1!=b.a.length?!1:b.a[0].S.g()==this.g()},this);0<a.length?this.b=a[0]:this.b=null}return this.b};Y.prototype.Na=function(){return this.h};Y.prototype.isNullable=Y.prototype.Na;Y.prototype.Ya=function(){return this.m};
Y.prototype.ka=function(a){return Uk(this,a,"eq")};Y.prototype.eq=Y.prototype.ka;Y.prototype.Pb=function(a){return Uk(this,a,"neq")};Y.prototype.neq=Y.prototype.Pb;Y.prototype.yc=function(a){return Uk(this,a,"lt")};Y.prototype.lt=Y.prototype.yc;Y.prototype.zc=function(a){return Uk(this,a,"lte")};Y.prototype.lte=Y.prototype.zc;Y.prototype.nc=function(a){return Uk(this,a,"gt")};Y.prototype.gt=Y.prototype.nc;Y.prototype.oc=function(a){return Uk(this,a,"gte")};Y.prototype.gte=Y.prototype.oc;
Y.prototype.match=function(a){return Uk(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.ac=function(a,b){return Uk(this,[a,b],"between")};Y.prototype.between=Y.prototype.ac;Y.prototype.pc=function(a){return Uk(this,a,"in")};Y.prototype["in"]=Y.prototype.pc;Y.prototype.vc=function(){return this.ka(null)};Y.prototype.isNull=Y.prototype.vc;Y.prototype.uc=function(){return this.Pb(null)};Y.prototype.isNotNull=Y.prototype.uc;
Y.prototype.as=function(a){return new Y(this.f,this.a,this.m,this.h,this.s,a)};Y.prototype.as=Y.prototype.as;function Z(a){Fl(a);this.la=we();this.b=a;this.f=x();this.s=z();this.h=z();this.m=z();this.a=null;this.c=x();this.K=!1;this.Ba=[]}n("lf.schema.TableBuilder",Z);function Gl(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Hl=z([0,6]);function Fl(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new v(502,a);}function Il(a,b){if(b==a.b)throw new v(546,b);if(a.f.has(b)||a.c.has(b)||a.h.has(b))throw new v(503,a.b+"."+b);}
function Jl(a,b){var c=!1;b.forEach(function(d){var e=this.f.get(d.name);c=c||d.autoIncrement;if(d.autoIncrement&&3!=e)throw new v(504);},a);if(c&&1<b.length)throw new v(505);}function Kl(a){if(null!==a.a){var b=a.c.get(a.a).map(function(d){return d.name}),c=0;if(a.Ba.some(function(d,e){c=e;return-1!=b.indexOf(d.ya)},a))throw new v(543,a.Ba[c].name);}}
function Ll(a){if(null!==a.a){var b=function(d){return d.name},c=JSON.stringify(a.c.get(a.a).map(b));a.c.forEach(function(d,e){if(e!=this.a&&(d=d.map(b),JSON.stringify(d)==c))throw new v(544,this.b+"."+e);},a)}}function Ml(a){null!==a.a&&a.c.get(a.a).forEach(function(b){if(this.m.has(b.name))throw new v(545,this.b+"."+b.name);},a)}Z.prototype.Vb=function(a,b){Fl(a);Il(this,a);this.f.set(a,b);Hl.has(b)&&this.Gb([a]);return this};Z.prototype.addColumn=Z.prototype.Vb;
Z.prototype.Xb=function(a,b){var c=this.b;this.a="pk"+(c[0].toUpperCase()+c.substring(1));Fl(this.a);Il(this,this.a);a=Nl(this,a,!0,void 0,b);Jl(this,a);1==a.length&&this.s.add(a[0].name);this.h.add(this.a);this.c.set(this.a,a);return this};Z.prototype.addPrimaryKey=Z.prototype.Xb;
Z.prototype.Wb=function(a,b){Fl(a);Il(this,a);b=new Qc(b,this.b,a);void 0===b.c&&(b.c=0);void 0===b.a&&(b.a=0);if(1==b.c&&1==b.a)throw new v(506);if(!this.f.has(b.ya))throw new v(540,a);this.Ba.push(b);this.Fb(a,[b.ya],this.s.has(b.ya));return this};Z.prototype.addForeignKey=Z.prototype.Wb;Z.prototype.Yb=function(a,b){Fl(a);Il(this,a);b=Nl(this,b,!0);1==b.length&&(this.s.add(b[0].name),Ol(this,b[0].name));this.c.set(a,b);this.h.add(a);return this};Z.prototype.addUnique=Z.prototype.Yb;
function Ol(a,b){a.Ba.forEach(function(c){c.ya==b&&this.h.add(c.name.split(".")[1])},a)}Z.prototype.Gb=function(a){Nl(this,a,!1).forEach(function(b){this.m.add(b.name)},this);return this};Z.prototype.addNullable=Z.prototype.Gb;Z.prototype.Fb=function(a,b,c,d){Fl(a);Il(this,a);b=Nl(this,b,!0,d);c&&this.h.add(a);this.c.set(a,b);return this};Z.prototype.addIndex=Z.prototype.Fb;Z.prototype.Fa=function(a){this.K=a};Z.prototype.persistentIndex=Z.prototype.Fa;
Z.prototype.ua=function(){Kl(this);Ll(this);Ml(this);return new (Pl(this))};Z.prototype.getSchema=Z.prototype.ua;function Nl(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(g){return new Gl({name:g,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(g){return new Gl(g)});f.forEach(function(g){if(!this.f.has(g.name))throw new v(508,this.b,g.name);if(c){var h=this.f.get(g.name);if(0==h||6==h)throw new v(509,this.b,g.name);}},a);return f}
function Pl(a){function b(){function c(h){return a.c.get(h).map(function(l){return{S:this[l.name],order:l.order,autoIncrement:l.autoIncrement}},this)}var d=Wc(a.f).map(function(h){this[h]=new Y(this,h,a.s.has(h),a.m.has(h),a.f.get(h));return this[h]},this),e=Wc(a.c).map(function(h){return new kd(a.b,h,a.h.has(h),c.call(this,h))},this);C.call(this,a.b,d,e,a.K);var f=null!==a.a?new kd(a.b,a.a,!0,c.call(this,a.a)):null,g=d.filter(function(h){return!a.m.has(h.g())});this.a=new Rc(f,g,a.Ba);this.c=Ql(a,
d,e)}q(b,C);b.prototype.Aa=function(c){return new this.c(Lc++,c)};b.prototype.createRow=b.prototype.Aa;b.prototype.sa=function(c){var d={};this.ta().forEach(function(e){var f=e.g();e=e.D();var g=c.value[f];if(0==e)if(e=g,null==e||""==e)e=null;else{0!=e.length%2&&(e="0"+e);g=new ArrayBuffer(e.length/2);for(var h=new Uint8Array(g),l=0,m=0;l<e.length;l+=2)h[m++]=parseInt(e.substr(l,2),16);e=g}else e=2==e?null!=g?new Date(g):null:g;d[f]=e},this);return new this.c(c.id,d)};b.prototype.deserializeRow=b.prototype.sa;
b.prototype.Jb=function(){return this.a};b.prototype.getConstraint=b.prototype.Jb;return b}
function Ql(a,b,c){function d(h,l){this.b=b;Kc.call(this,h,l)}q(d,Kc);d.prototype.a=function(){var h={};this.b.forEach(function(l){h[l.g()]=l.Na()?null:Jc[l.D()]});return h};d.prototype.c=function(){var h={};this.b.forEach(function(l){var m=l.g();l=l.D();var p=this.u[m];h[m]=0==l?null!=p?Pc(p):null:2==l?null!=p?p.getTime():null:6==l?null!=p?p:null:p},this);return h};var e=function(h){var l=this.f.get(h.g()),m=this.la.b.get(l)||null;return function(p){return m(p[h.g()])}}.bind(a),f=function(h){var l=
h.map(function(m){return e(m.S)});return function(m){return l.map(function(p){return p(m)})}}.bind(a),g={};c.forEach(function(h){var l=h.o();h=1==h.a.length?e(h.a[0].S):f(h.a);g[l]=h});d.prototype.va=function(h){return-1!=h.indexOf("#")?this.id():g.hasOwnProperty(h)?g[h](this.u):null};return d};function Rl(a,b){this.f=new Sl(a,b);this.a=x();this.c=!1;this.b=null;this.h=!1}n("lf.schema.Builder",Rl);function Tl(a,b){b.Ba.forEach(function(c){var d=c.ma;if(!this.a.has(d))throw new v(536,c.name);d=this.a.get(d).ua();var e=c.b;if(!d.hasOwnProperty(e))throw new v(537,c.name);if(b.ua()[c.ya].D()!=d[e].D())throw new v(538,c.name);if(!d[e].Ya())throw new v(539,c.name);},a)}
Rl.prototype.m=function(a){a.Ba.forEach(function(b){this.a.get(b.ma).Ba.forEach(function(c){if(c.ya==b.b)throw new v(534,b.name);},this)},this)};function Ul(a){a.c||(a.a.forEach(function(b){Tl(this,b);b=b.ua();this.f.a.set(b.g(),b)},a),y(a.a).forEach(a.m,a),Vl(a),a.a.clear(),a.c=!0)}function Wl(a,b,c){b.Eb||(b.Eb=!0,b.vb=!0,b.Ib.forEach(function(d){d=c.get(d);if(!d.Eb)Wl(this,d,c);else if(d.vb&&b!=d)throw new v(533);},a));b.vb=!1}
function Vl(a){var b=x();a.f.a.forEach(function(c,d){b.set(d,new Xl)},a);a.a.forEach(function(c,d){c.Ba.forEach(function(e){b.get(e.ma).Ib.add(d)})});y(b).forEach(function(c){Wl(this,c,b)},a)}function Xl(){this.vb=this.Eb=!1;this.Ib=z()}Rl.prototype.ua=function(){this.c||Ul(this);return this.f};Rl.prototype.getSchema=Rl.prototype.ua;Rl.prototype.Mb=function(){var a=new Fd("ns_"+this.f.name()),b=Hh();if(b.kb(a))var c=b.j(a);else c=new Fh,b.xa(a,c);return c};Rl.prototype.getGlobal=Rl.prototype.Mb;
Rl.prototype.connect=function(a){if(this.h||null!==this.b&&this.b.b)throw new v(113);this.h=!0;if(null===this.b){var b=this.Mb();b.kb(Md)||b.xa(Md,this.ua());this.b=new X(b)}return this.b.ca(a).then(function(c){this.h=!1;return c}.bind(this),function(c){this.h=!1;this.b.close();throw c;}.bind(this))};Rl.prototype.connect=Rl.prototype.connect;Rl.prototype.dc=function(a){if(this.a.has(a))throw new v(503,a);if(this.c)throw new v(535);this.a.set(a,new Z(a));return this.a.get(a)};
Rl.prototype.createTable=Rl.prototype.dc;Rl.prototype.zb=function(a){if(this.c)throw new v(535);this.f.zb(a);return this};Rl.prototype.setPragma=Rl.prototype.zb;function Sl(a,b){this.f=a;this.h=b;this.a=x();this.b={hc:!1}}n("lf.schema.DatabaseSchema",Sl);Sl.prototype.name=function(){return this.f};Sl.prototype.name=Sl.prototype.name;Sl.prototype.version=function(){return this.h};Sl.prototype.version=Sl.prototype.version;Sl.prototype.W=function(){return y(this.a)};Sl.prototype.tables=Sl.prototype.W;
Sl.prototype.table=function(a){if(!this.a.has(a))throw new v(101,a);return this.a.get(a)};Sl.prototype.table=Sl.prototype.table;function Zd(a){a.c||(a.c=new cd(a));return a.c}Sl.prototype.Ec=function(){return this.b};Sl.prototype.pragma=Sl.prototype.Ec;Sl.prototype.zb=function(a){this.b=a};n("lf.schema.create",function(a,b){return new Rl(a,b)});try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
