/*
  Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
(function(){'use strict';var k,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function ba(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ca=ba(this);
function da(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}function ea(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function fa(){fa=function(){};ca.Symbol||(ca.Symbol=ha)}function ia(a,b){this.a=a;aa(this,"description",{configurable:!0,writable:!0,value:b})}ia.prototype.toString=function(){return this.a};
var ha=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ia("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();function ja(){fa();var a=ca.Symbol.iterator;a||(a=ca.Symbol.iterator=ca.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return la(ea(this))}});ja=function(){}}
function la(a){ja();a={next:a};a[ca.Symbol.iterator]=function(){return this};return a}function ma(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ea(a)}}function na(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
da("WeakMap",function(a){function b(l){this.O=(h+=Math.random()+1).toString();if(l){l=ma(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return"object"===m&&null!==l||"function"===m}function e(l){if(!na(l,g)){var m=new c;aa(l,g,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(p){if(p instanceof c)return p;e(p);return m(p)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),p=new a([[l,2],
[m,3]]);if(2!=p.get(l)||3!=p.get(m))return!1;p.delete(l);p.set(m,4);return!p.has(l)&&4==p.get(m)}catch(B){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!na(l,g))throw Error("WeakMap key fail: "+l);l[g][this.O]=m;return this};b.prototype.get=function(l){return d(l)&&na(l,g)?l[g][this.O]:void 0};b.prototype.has=function(l){return d(l)&&na(l,g)&&na(l[g],
this.O)};b.prototype.delete=function(l){return d(l)&&na(l,g)&&na(l[g],this.O)?delete l[g][this.O]:!1};return b});
da("Map",function(a){function b(){var h={};return h.Ia=h.next=h.head=h}function c(h,l){var m=h.a;return la(function(){if(m){for(;m.head!=h.a;)m=m.Ia;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(h,l){var m=l&&typeof l;"object"==m||"function"==m?f.has(l)?m=f.get(l):(m=""+ ++g,f.set(l,m)):m="p_"+l;var p=h.b[m];if(p&&na(h.b,m))for(h=0;h<p.length;h++){var B=p[h];if(l!==l&&B.key!==B.key||l===B.key)return{id:m,list:p,index:h,fa:B}}return{id:m,
list:p,index:-1,fa:void 0}}function e(h){this.b={};this.a=b();this.size=0;if(h){h=ma(h);for(var l;!(l=h.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),l=new a(ma([[h,"s"]]));if("s"!=l.get(h)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var m=l.entries(),p=m.next();if(p.done||p.value[0]!=h||"s"!=p.value[1])return!1;p=m.next();return p.done||4!=p.value[0].x||
"t"!=p.value[1]||!m.next().done?!1:!0}catch(B){return!1}}())return a;ja();var f=new WeakMap;e.prototype.set=function(h,l){h=0===h?0:h;var m=d(this,h);m.list||(m.list=this.b[m.id]=[]);m.fa?m.fa.value=l:(m.fa={next:this.a,Ia:this.a.Ia,head:this.a,key:h,value:l},m.list.push(m.fa),this.a.Ia.next=m.fa,this.a.Ia=m.fa,this.size++);return this};e.prototype.delete=function(h){h=d(this,h);return h.fa&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.b[h.id],h.fa.Ia.next=h.fa.next,h.fa.next.Ia=h.fa.Ia,
h.fa.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.b={};this.a=this.a.Ia=b();this.size=0};e.prototype.has=function(h){return!!d(this,h).fa};e.prototype.get=function(h){return(h=d(this,h).fa)&&h.value};e.prototype.entries=function(){return c(this,function(h){return[h.key,h.value]})};e.prototype.keys=function(){return c(this,function(h){return h.key})};e.prototype.values=function(){return c(this,function(h){return h.value})};e.prototype.forEach=function(h,l){for(var m=this.entries(),
p;!(p=m.next()).done;)p=p.value,h.call(l,p[1],p[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});da("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});
function pa(a,b){ja();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}da("Array.prototype.values",function(a){return a?a:function(){return pa(this,function(b,c){return c})}});
da("Set",function(a){function b(c){this.a=new Map;if(c){c=ma(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.a.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(ma([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;ja();b.prototype.add=function(c){c=0===c?0:c;this.a.set(c,c);this.size=this.a.size;return this};b.prototype.delete=function(c){c=this.a.delete(c);this.size=this.a.size;return c};b.prototype.clear=function(){this.a.clear();this.size=0};b.prototype.has=function(c){return this.a.has(c)};b.prototype.entries=function(){return this.a.entries()};b.prototype.values=function(){return this.a.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.a.forEach(function(f){return c.call(d,f,f,e)})};return b});da("Array.prototype.entries",function(a){return a?a:function(){return pa(this,function(b,c){return[b,c]})}});var qa=this||self;function sa(a){return"string"==typeof a}function ta(){}
function ua(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function va(a){var b=ua(a);return"array"==b||"object"==b&&"number"==typeof a.length}function wa(a){return"function"==ua(a)}function xa(a){return a[ya]||(a[ya]=++za)}var ya="closure_uid_"+(1E9*Math.random()>>>0),za=0;function Aa(a,b,c){return a.call.apply(a.bind,arguments)}
function Ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function Ca(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ca=Aa:Ca=Ba;return Ca.apply(null,arguments)}
function Da(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function n(a,b){a=a.split(".");var c=qa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.sa=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ea(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ea);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}q(Ea,Error);Ea.prototype.name="CustomError";var Fa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(sa(a))return sa(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ga=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=sa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ha=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=sa(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Ia=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;Ga(a,function(e,f){d=b.call(void 0,d,e,f,a)});return d},Ja=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=sa(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function Ka(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function La(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ma(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ua(d))for(var e=0;e<d.length;e+=8192)for(var f=Ma.apply(null,Ka(d,e,e+8192)),g=0;g<f.length;g++)b.push(f[g]);else b.push(d)}return b};function Na(a,b){this.a=a===Oa&&b||"";this.b=Pa}Na.prototype.toString=function(){return"Const{"+this.a+"}"};var Pa={},Oa={},Qa=new Na(Oa,"");function Ra(){this.a="";this.b=Sa}var Sa={};var Ta=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Ua(a,b){return-1!=a.indexOf(b)}
function Va(a){var b=0;a=Ta(String(a)).split(".");for(var c=Ta("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",g=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;b=Wa(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Wa(0==f[2].length,0==g[2].length)||Wa(f[2],g[2]);f=f[3];g=g[3]}while(0==b)}return b}function Wa(a,b){return a<b?-1:a>b?1:0};var Xa;a:{var Ya=qa.navigator;if(Ya){var Za=Ya.userAgent;if(Za){Xa=Za;break a}}Xa=""}function r(a){return Ua(Xa,a)};function $a(){return r("Safari")&&!(ab()||r("Coast")||r("Opera")||r("Edge")||r("Edg/")||r("OPR")||r("Firefox")||r("FxiOS")||r("Silk")||r("Android"))}function ab(){return(r("Chrome")||r("CriOS"))&&!r("Edge")};function bb(){this.a="";this.b=cb}function db(){var a=eb;if(a instanceof bb&&a.constructor===bb&&a.b===cb)return a.a;ua(a);return"type_error:SafeHtml"}var cb={};function fb(a){var b=new bb;b.a=a;return b}fb("<!DOCTYPE html>");var eb=fb("");fb("<br>");function gb(a){var b=new Ra;b.a=Qa instanceof Na&&Qa.constructor===Na&&Qa.b===Pa?Qa.a:"type_error:Const";b instanceof Ra&&b.constructor===Ra&&b.b===Sa?b=b.a:(ua(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function hb(a){qa.setTimeout(function(){throw a;},0)}var ib;
function jb(){var a=qa.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!r("Presto")&&(a=function(){var e=document.createElement("IFRAME");e.style.display="none";gb(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(db());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=Ca(function(l){if(("*"==h||l.origin==h)&&l.data==
g)this.port1.onmessage()},this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!r("Trident")&&!r("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Ib;c.Ib=null;e()}};return function(e){d.next={Ib:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var f=document.createElement("SCRIPT");
f.onreadystatechange=function(){f.onreadystatechange=null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){qa.setTimeout(e,0)}};function kb(a,b){this.c=a;this.f=b;this.b=0;this.a=null}kb.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};kb.prototype.put=function(a){this.f(a);100>this.b&&(this.b++,a.next=this.a,this.a=a)};function lb(){this.b=this.a=null}var nb=new kb(function(){return new mb},function(a){a.reset()});lb.prototype.add=function(a,b){var c=nb.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};lb.prototype.remove=function(){var a=null;this.a&&(a=this.a,this.a=this.a.next,this.a||(this.b=null),a.next=null);return a};function mb(){this.next=this.b=this.a=null}mb.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};mb.prototype.reset=function(){this.next=this.b=this.a=null};function ob(a,b){pb||qb();rb||(pb(),rb=!0);sb.add(a,b)}var pb;function qb(){if(qa.Promise&&qa.Promise.resolve){var a=qa.Promise.resolve(void 0);pb=function(){a.then(tb)}}else pb=function(){var b=tb;!wa(qa.setImmediate)||qa.Window&&qa.Window.prototype&&!r("Edge")&&qa.Window.prototype.setImmediate==qa.setImmediate?(ib||(ib=jb()),ib(b)):qa.setImmediate(b)}}var rb=!1,sb=new lb;function tb(){for(var a;a=sb.remove();){try{a.a.call(a.b)}catch(b){hb(b)}nb.put(a)}rb=!1};function ub(a,b,c,d){c=c||function(p,B){return p==B};d=d||function(p){return a[p]};for(var e=a.length,f=b.length,g=[],h=0;h<e+1;h++)g[h]=[],g[h][0]=0;for(var l=0;l<f+1;l++)g[0][l]=0;for(h=1;h<=e;h++)for(l=1;l<=f;l++)c(a[h-1],b[l-1])?g[h][l]=g[h-1][l-1]+1:g[h][l]=Math.max(g[h-1][l],g[h][l-1]);var m=[];h=e;for(l=f;0<h&&0<l;)c(a[h-1],b[l-1])?(m.unshift(d(h-1,l-1)),h--,l--):g[h-1][l]>g[h][l-1]?h--:l--;return m}function vb(a){return Ia(arguments,function(b,c){return b+c},0)}
function wb(a){return vb.apply(null,arguments)/arguments.length}function xb(a){var b=arguments.length;if(2>b)return 0;var c=wb.apply(null,arguments);return vb.apply(null,Ha(arguments,function(d){return Math.pow(d-c,2)}))/(b-1)}function yb(a){return Math.sqrt(xb.apply(null,arguments))};var zb="StopIteration"in qa?qa.StopIteration:{message:"StopIteration",stack:""};function Ab(){}Ab.prototype.next=function(){throw zb;};Ab.prototype.Ta=function(){return this};function Bb(a){if(a instanceof Ab)return a;if("function"==typeof a.Ta)return a.Ta(!1);if(va(a)){var b=0,c=new Ab;c.next=function(){for(;;){if(b>=a.length)throw zb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Cb(a,b){if(va(a))try{Ga(a,b,void 0)}catch(c){if(c!==zb)throw c;}else{a=Bb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==zb)throw c;}}}function Db(a){if(Ja(arguments,function(e){return!e.length})||!arguments.length)return new Ab;var b=new Ab,c=arguments,d=La(c.length);b.next=function(){if(d){for(var e=Ha(d,function(g,h){return c[h][g]}),f=d.length-1;0<=f;f--){if(d[f]<c[f].length-1){d[f]++;break}if(0==f){d=null;break}d[f]=0}return e}throw zb;};return b};function Eb(){return r("iPhone")&&!r("iPod")&&!r("iPad")};function t(a,b){this.a=Fb;this.l=void 0;this.c=this.b=this.w=null;this.f=this.h=!1;if(a!=ta)try{var c=this;a.call(b,function(d){Gb(c,Hb,d)},function(d){Gb(c,Ib,d)})}catch(d){Gb(this,Ib,d)}}var Fb=0,Hb=2,Ib=3;function Jb(){this.next=this.context=this.b=this.c=this.a=null;this.f=!1}Jb.prototype.reset=function(){this.context=this.b=this.c=this.a=null;this.f=!1};var Kb=new kb(function(){return new Jb},function(a){a.reset()});function Lb(a,b,c){var d=Kb.get();d.c=a;d.b=b;d.context=c;return d}
function u(a){if(a instanceof t)return a;var b=new t(ta);Gb(b,Hb,a);return b}function Mb(a){return new t(function(b,c){c(a)})}function Nb(a,b,c){Ob(a,b,c,null)||ob(Da(b,a))}function Pb(a){return new t(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,p){d--;e[m]=p;0==d&&b(e)},g=function(m){c(m)},h=0,l;h<a.length;h++)l=a[h],Nb(l,Da(f,h),g);else b(e)})}function Qb(){var a,b,c=new t(function(d,e){a=d;b=e});return new Rb(c,a,b)}
t.prototype.then=function(a,b,c){return Sb(this,wa(a)?a:null,wa(b)?b:null,c)};t.prototype.$goog_Thenable=!0;k=t.prototype;k.Db=function(a,b){return Sb(this,null,a,b)};k.cancel=function(a){this.a==Fb&&ob(function(){var b=new Tb(a);Ub(this,b)},this)};
function Ub(a,b){if(a.a==Fb)if(a.w){var c=a.w;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.f||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==Fb&&1==d?Ub(c,b):(f?(d=f,d.next==c.c&&(c.c=d),d.next=d.next.next):Vb(c),Wb(c,e,Ib,b)))}a.w=null}else Gb(a,Ib,b)}function Xb(a,b){a.b||a.a!=Hb&&a.a!=Ib||Yb(a);a.c?a.c.next=b:a.b=b;a.c=b}
function Sb(a,b,c,d){var e=Lb(null,null,null);e.a=new t(function(f,g){e.c=b?function(h){try{var l=b.call(d,h);f(l)}catch(m){g(m)}}:f;e.b=c?function(h){try{var l=c.call(d,h);void 0===l&&h instanceof Tb?g(h):f(l)}catch(m){g(m)}}:g});e.a.w=a;Xb(a,e);return e.a}k.Nc=function(a){this.a=Fb;Gb(this,Hb,a)};k.Oc=function(a){this.a=Fb;Gb(this,Ib,a)};
function Gb(a,b,c){a.a==Fb&&(a===c&&(b=Ib,c=new TypeError("Promise cannot resolve to itself")),a.a=1,Ob(c,a.Nc,a.Oc,a)||(a.l=c,a.a=b,a.w=null,Yb(a),b!=Ib||c instanceof Tb||Zb(a,c)))}function Ob(a,b,c,d){if(a instanceof t)return Xb(a,Lb(b||ta,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(wa(f))return $b(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function $b(a,b,c,d,e){function f(l){h||(h=!0,d.call(e,l))}function g(l){h||(h=!0,c.call(e,l))}var h=!1;try{b.call(a,g,f)}catch(l){f(l)}}function Yb(a){a.h||(a.h=!0,ob(a.lc,a))}function Vb(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.c=null);return b}k.lc=function(){for(var a;a=Vb(this);)Wb(this,a,this.a,this.l);this.h=!1};
function Wb(a,b,c,d){if(c==Ib&&b.b&&!b.f)for(;a&&a.f;a=a.w)a.f=!1;if(b.a)b.a.w=null,ac(b,c,d);else try{b.f?b.c.call(b.context):ac(b,c,d)}catch(e){bc.call(null,e)}Kb.put(b)}function ac(a,b,c){b==Hb?a.c.call(a.context,c):a.b&&a.b.call(a.context,c)}function Zb(a,b){a.f=!0;ob(function(){a.f&&bc.call(null,b)})}var bc=hb;function Tb(a){Ea.call(this,a)}q(Tb,Ea);Tb.prototype.name="cancel";function Rb(a,b,c){this.a=a;this.resolve=b;this.b=c};function cc(a,b){this.a={};this.i=[];this.c=this.b=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof cc)for(c=dc(a),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}k=cc.prototype;k.ca=function(){ec(this);for(var a=[],b=0;b<this.i.length;b++)a.push(this.a[this.i[b]]);return a};function dc(a){ec(a);return a.i.concat()}k.lb=function(){return 0==this.b};
k.clear=function(){this.a={};this.c=this.b=this.i.length=0};k.remove=function(a){return fc(this.a,a)?(delete this.a[a],this.b--,this.c++,this.i.length>2*this.b&&ec(this),!0):!1};function ec(a){if(a.b!=a.i.length){for(var b=0,c=0;b<a.i.length;){var d=a.i[b];fc(a.a,d)&&(a.i[c++]=d);b++}a.i.length=c}if(a.b!=a.i.length){var e={};for(c=b=0;b<a.i.length;)d=a.i[b],fc(e,d)||(a.i[c++]=d,e[d]=1),b++;a.i.length=c}}k.get=function(a,b){return fc(this.a,a)?this.a[a]:b};
k.set=function(a,b){fc(this.a,a)||(this.b++,this.i.push(a),this.c++);this.a[a]=b};k.forEach=function(a,b){for(var c=dc(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};k.clone=function(){return new cc(this)};k.Ta=function(a){ec(this);var b=0,c=this.c,d=this,e=new Ab;e.next=function(){if(c!=d.c)throw Error("The map has changed since the iterator was created");if(b>=d.i.length)throw zb;var f=d.i[b++];return a?f:d.a[f]};return e};
function fc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function gc(a){if(a.ca&&"function"==typeof a.ca)return a.ca();if(sa(a))return a.split("");if(va(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}b=[];c=0;for(d in a)b[c++]=a[d];return b};function hc(a){this.a=new cc;if(a){a=gc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function ic(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+xa(a):b.charAt(0)+a}k=hc.prototype;k.add=function(a){this.a.set(ic(a),a)};k.remove=function(a){return this.a.remove(ic(a))};k.clear=function(){this.a.clear()};k.lb=function(){return this.a.lb()};k.ca=function(){return this.a.ca()};k.clone=function(){return new hc(this)};k.Ta=function(){return this.a.Ta(!1)};function jc(a){var b=kc;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var lc=r("Opera"),mc=r("Trident")||r("MSIE"),nc=r("Edge"),oc=r("Gecko")&&!(Ua(Xa.toLowerCase(),"webkit")&&!r("Edge"))&&!(r("Trident")||r("MSIE"))&&!r("Edge"),pc=Ua(Xa.toLowerCase(),"webkit")&&!r("Edge"),qc=r("Macintosh"),rc=r("Windows"),sc=r("Android"),tc=Eb(),uc=r("iPad"),vc=r("iPod"),wc;
a:{var xc="",yc=function(){var a=Xa;if(oc)return/rv:([^\);]+)(\)|;)/.exec(a);if(nc)return/Edge\/([\d\.]+)/.exec(a);if(mc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(pc)return/WebKit\/(\S+)/.exec(a);if(lc)return/(?:Version)[ \/]?(\S+)/.exec(a)}();yc&&(xc=yc?yc[1]:"");if(mc){var zc,Ac=qa.document;zc=Ac?Ac.documentMode:void 0;if(null!=zc&&zc>parseFloat(xc)){wc=String(zc);break a}}wc=xc}var kc={};function Bc(){return jc(function(){return 0<=Va(wc)})};var Cc=function(){if(rc){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Xa))?a[1]:"0"}return qc?(a=/10[_.][0-9_.]+/,(a=a.exec(Xa))?a[0].replace(/_/g,"."):"10"):sc?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Xa))?a[1]:""):tc||uc||vc?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Xa))?a[1].replace(/_/g,"."):""):""}();var Dc=Eb()||r("iPod"),Ec=r("iPad");
var Fc={};n("lf.ConstraintAction",Fc);Fc.RESTRICT=0;Fc.CASCADE=1;var Gc={};n("lf.ConstraintTiming",Gc);Gc.IMMEDIATE=0;Gc.DEFERRABLE=1;var Hc={};n("lf.Order",Hc);Hc.DESC=0;Hc.ASC=1;var Ic={};n("lf.Type",Ic);Ic.ARRAY_BUFFER=0;Ic.BOOLEAN=1;Ic.DATE_TIME=2;Ic.INTEGER=3;Ic.NUMBER=4;Ic.STRING=5;Ic.OBJECT=6;var Jc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};n("lf.type.DEFAULT_VALUES",Jc);function Kc(a,b){this.O=a;this.u=b||this.Jb()}var Lc=0;k=Kc.prototype;k.id=function(){return this.O};k.Jb=function(){return{}};k.Wb=function(){return this.u};k.ia=function(){return{id:this.O,value:this.Wb()}};k.wa=function(a){return"#"==a.substr(-1)?this.O:null};function Mc(a){return new Kc(a.id,a.value)}function Nc(a){return new Kc(Lc++,a||{})}function Oc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};
function v(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}q(v,Error);function Pc(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new v(540,c);this.f=b;this.za=a.local;this.na=d[0];this.b=d[1];this.name=b+"."+c;this.c=a.action;this.a=a.timing};function Qc(a,b,c){this.a=a;this.c=b;this.b=c}n("lf.schema.Constraint",Qc);Qc.prototype.pc=function(){return this.a};Qc.prototype.getPrimaryKey=Qc.prototype.pc;Qc.prototype.oc=function(){return this.b};Qc.prototype.getForeignKeys=Qc.prototype.oc;function Rc(){var a;!(a=$a()&&!Bc())&&(a=Ec||Dc)&&(a=!(0<=Va(Cc)));this.a=a;this.b=!(this.a||mc&&!Bc());this.h=ab()||$a();this.c=void 0!==window.Map&&void 0!==window.Map.prototype.values&&void 0!==window.Map.prototype.forEach&&!this.a;this.f=void 0!==window.Set&&void 0!==window.Set.prototype.values&&void 0!==window.Set.prototype.forEach&&!this.a}var Sc;function Tc(){void 0===Sc&&(Sc=new Rc);return Sc};function w(){this.a=new cc;Object.defineProperty(this,"size",{get:function(){return this.a.b}})}w.prototype.clear=function(){this.a.clear()};w.prototype.clear=w.prototype.clear;w.prototype.delete=function(a){return this.a.remove(a)};w.prototype["delete"]=w.prototype.delete;w.prototype.forEach=function(a,b){return this.a.forEach(a,b)};w.prototype.forEach=w.prototype.forEach;w.prototype.get=function(a){return this.a.get(a)};w.prototype.get=w.prototype.get;
w.prototype.has=function(a){return fc(this.a.a,a)};w.prototype.has=w.prototype.has;w.prototype.set=function(a,b){return this.a.set(a,b)};w.prototype.set=w.prototype.set;var Uc=Tc().c;function x(){return Uc?new window.Map:new w}function Vc(a){return a instanceof w?dc(a.a):Array.from(a.keys())}function y(a){return a instanceof w?a.a.ca():Array.from(a.values())};function Wc(a){this.a=new hc(a);Object.defineProperty(this,"size",{get:function(){return this.a.a.b}})}Wc.prototype.add=function(a){this.a.add(a)};Wc.prototype.add=Wc.prototype.add;Wc.prototype.clear=function(){this.a.clear()};Wc.prototype.clear=Wc.prototype.clear;Wc.prototype.delete=function(a){return this.a.remove(a)};Wc.prototype["delete"]=Wc.prototype.delete;Wc.prototype.forEach=function(a,b){this.a.ca().forEach(a,b)};Wc.prototype.has=function(a){a=ic(a);return fc(this.a.a.a,a)};
Wc.prototype.has=Wc.prototype.has;var Xc=Tc().f;function z(a){return Xc?void 0!==a?new window.Set(a):new window.Set:new Wc(a)}function A(a){return a instanceof Wc?a.a.ca():Array.from(a)}function Yc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(d){c=c&&a.has(d)});return c};function Zc(){this.a=x();this.size=0}k=Zc.prototype;k.has=function(a){return this.a.has(a)};k.set=function(a,b){var c=this.a.get(a)||null;null===c&&(c=z(),this.a.set(a,c));c.has(b)||(c.add(b),this.size++);return this};function $c(a,b,c){var d=a.a.get(b)||null;null===d&&(d=z(),a.a.set(b,d));c.forEach(function(e){d.has(e)||(d.add(e),this.size++)},a)}function ad(a,b){b.keys().forEach(function(c){var d=b.get(c);$c(this,c,d)},a)}
k.delete=function(a,b){var c=this.a.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.a.delete(a);return b};k.get=function(a){a=this.a.get(a)||null;return null===a?null:A(a)};k.clear=function(){this.a.clear();this.size=0};k.keys=function(){return Vc(this.a)};k.values=function(){var a=[];this.a.forEach(function(b){a.push.apply(a,A(b))});return a};function bd(a){this.a=a;this.b=new Zc;this.c=new Zc;this.s=new Zc;this.l=x();this.m=new Zc;this.f=new Zc;this.L=new Zc;this.h=new Zc;cd(this)}function cd(a){a.a.X().forEach(function(b){var c=b.g();b.a.b.forEach(function(d){this.s.set(c,this.a.table(d.na));this.m.set(d.na,b);0==d.c?(this.c.set(d.na,d),this.L.set(d.na,b)):(this.b.set(d.na,d),this.f.set(d.na,b));this.l.set(b.g()+"."+d.za,d.na);this.h.set(d.na+"."+d.b,b.g())},this)},a)}
function dd(a,b,c){if(null!=c)return 1==c?a.b.get(b):a.c.get(b);c=a.b.get(b);a=a.c.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function ed(a,b){a=b.get(a);return null===a?[]:a}function fd(a,b){var c=z();b.forEach(function(d){(d=this.l.get(d))&&c.add(d)},a);return A(c).map(function(d){return this.a.table(d)},a)}function gd(a,b,c){return null==c?ed(b,a.m):0==c?ed(b,a.L):ed(b,a.f)}
function hd(a,b){var c=z();b.forEach(function(d){(d=this.h.get(d))&&d.forEach(function(e){c.add(e)})},a);return A(c).map(function(d){return this.a.table(d)},a)};var id={};n("lf.schema.DataStoreType",id);id.INDEXED_DB=0;id.MEMORY=1;id.LOCAL_STORAGE=2;id.FIREBASE=3;id.WEB_SQL=4;id.OBSERVABLE_STORE=5;function jd(a,b,c,d){this.b=a;this.name=b;this.$a=c;this.a=d}jd.prototype.o=function(){return this.b+"."+this.name};function kd(a){return a.a.some(function(b){return b.S.Pa()})}function C(a,b,c,d){this.b=a;this.h=c;this.f=b;this.l=d;this.la=null}n("lf.schema.Table",C);C.prototype.g=function(){return this.b};C.prototype.getName=C.prototype.g;
function ld(a){return a.la||a.b}C.prototype.as=function(a){var b=new this.constructor(this.b);b.la=a;b.Ic=this.Ic;return b};C.prototype.as=C.prototype.as;C.prototype.createRow=C.prototype.Ba;C.prototype.deserializeRow=C.prototype.ua;C.prototype.ga=function(){return this.h};C.prototype.getIndices=C.prototype.ga;C.prototype.va=function(){return this.f};C.prototype.getColumns=C.prototype.va;C.prototype.getConstraint=C.prototype.Lb;C.prototype.Ha=function(){return this.l};
C.prototype.persistentIndex=C.prototype.Ha;function md(a){return a.b+".#"};function D(a,b){this.a=a;this.b=b;this.la=null}k=D.prototype;k.g=function(){return this.b+"("+this.a.g()+")"};k.o=function(){return this.b+"("+this.a.o()+")"};k.Y=function(){return this.a.Y()};k.toString=function(){return this.o()};k.D=function(){return this.a.D()};k.Qa=function(){return this.la};k.ga=function(){return[]};k.bb=function(){return null};k.Pa=function(){return!1};k.as=function(a){this.la=a;return this};D.prototype.as=D.prototype.as;
function nd(a){for(var b=[a];a instanceof D;)b.push(a.a),a=a.a;return b}function od(){this.la=null;this.a=new C("#UnknownTable",[],[],!1)}k=od.prototype;k.g=function(){return"*"};k.o=function(){return this.g()};k.toString=function(){return this.o()};k.Y=function(){return this.a};k.D=function(){return 4};k.Qa=function(){return this.la};k.ga=function(){return[]};k.bb=function(){return null};k.Pa=function(){return!1};function F(a,b,c,d,e){this.f=a;this.c=b;this.h=c;this.b=d;this.a=e}n("lf.TransactionStats",F);F.prototype.Lc=function(){return this.f};F.prototype.success=F.prototype.Lc;F.prototype.wc=function(){return this.c};F.prototype.insertedRowCount=F.prototype.wc;F.prototype.Pc=function(){return this.h};F.prototype.updatedRowCount=F.prototype.Pc;F.prototype.jc=function(){return this.b};F.prototype.deletedRowCount=F.prototype.jc;F.prototype.ec=function(){return this.a};F.prototype.changedTableCount=F.prototype.ec;var pd={};n("lf.TransactionType",pd);pd.READ_ONLY=0;pd.READ_WRITE=1;function qd(a){this.da=x();this.Z=x();this.ea=x();this.a=a}k=qd.prototype;k.g=function(){return this.a};k.add=function(a){if(this.ea.has(a.id())){var b=[this.ea.get(a.id()),a];this.Z.set(a.id(),b);this.ea.delete(a.id())}else this.da.set(a.id(),a)};k.modify=function(a){var b=a[1],c=a[0].id();this.da.has(c)?this.da.set(c,b):this.Z.has(c)?(a=[this.Z.get(a[0].id())[0],b],this.Z.set(c,a)):this.Z.set(c,a)};
k.delete=function(a){if(this.da.has(a.id()))this.da.delete(a.id());else if(this.Z.has(a.id())){var b=this.Z.get(a.id())[0];this.Z.delete(a.id());this.ea.set(a.id(),b)}else this.ea.set(a.id(),a)};function rd(a){var b=[];a.da.forEach(function(c){b.push([null,c])});a.Z.forEach(function(c){b.push(c)});a.ea.forEach(function(c){b.push([c,null])});return b}k.toString=function(){return"["+Vc(this.da).toString()+"], ["+Vc(this.Z).toString()+"], ["+Vc(this.ea).toString()+"]"};
function sd(a){var b=new qd(a.a);a.da.forEach(function(c){b.delete(c)});a.ea.forEach(function(c){b.add(c)});a.Z.forEach(function(c){b.modify([c[1],c[0]])});return b}k.lb=function(){return 0==this.da.size&&0==this.ea.size&&0==this.Z.size};function td(){this.a=0;this.b=null}td.prototype.add=function(a,b){this.a+=b;this.b=null===this.b?a:a>this.b?a:this.b};td.prototype.remove=function(a,b){this.a-=b};td.prototype.clear=function(){this.a=0};function ud(a,b){a.clear();b.forEach(function(c){this.a+=c.a},a)};function vd(a,b){this.l=a;this.b=b||null;this.J=Qb();this.L=!1;this.h=null}vd.prototype.V=function(){return(0==this.l?this.f():wd(this)).then(function(a){this.L=!0;return a}.bind(this))};function wd(a){try{xd(a.b)}catch(b){return Mb(b)}return yd(a).then(function(b){this.b.V();return b}.bind(a))}function yd(a){zd(a);Ad(a);return a.f()}
function zd(a){a.b.b.forEach(function(b,c){c=this.b.f.get(c);c=this.a(c.g(),c.ua.bind(c),0);var d=y(b.ea).map(function(f){return f.id()});b=y(b.Z).map(function(f){return f[1]}).concat(y(b.da));var e=0<b.length;0<d.length&&c.remove(d,e).Db(this.s,this);c.put(b).Db(this.s,this)},a)}function Ad(a){Bd(a.b).forEach(function(b){var c=this.a(b.g(),Mc,1);c.remove([]);c.put(b.ia())},a)}vd.prototype.s=function(a){this.J.b(a)};
vd.prototype.N=function(){if(null===this.h)if(this.L)if(0==this.l)this.h=new F(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.b.b.forEach(function(e){d++;a+=e.da.size;c+=e.Z.size;b+=e.ea.size});this.h=new F(!0,a,c,b,d)}else this.h=new F(!1,0,0,0,0);return this.h};function Cd(a,b){this.O=a;this.Ga=b||{}}function Dd(a){var b=z();a.forEach(function(c){b.add(c>>9)});return A(b)}Cd.prototype.K=function(){return this.O};function Ed(a,b){b.forEach(function(c){this.Ga[c.id()]=c.ia()},a)}function Fd(a,b){b.forEach(function(c){delete this.Ga[c]},a)}Cd.prototype.ia=function(){return{id:this.O,value:JSON.stringify(this.Ga)}};function Gd(a){return new Cd(a.id,JSON.parse(a.value))};function Hd(a){this.a=a}Hd.prototype.toString=function(){return this.a};var Id=new Hd("backstore"),Jd=new Hd("cache"),Kd=new Hd("indexstore"),Ld=new Hd("engine"),Md=new Hd("runner"),Nd=new Hd("observerregistry"),Od=new Hd("schema");function Pd(a,b,c){this.a=a;this.b=b;this.c=c}Pd.prototype.get=function(a){if(0==a.length)return Qd(this);var b=this.b;return Rd(this,a).then(function(c){return a.map(function(d){var e=c.get(d>>9);return b(e.Ga[d])})})};function Rd(a,b){var c=x(),d=Qb();a=Dd(b).map(function(e){return new t(function(f,g){try{var h=this.a.get(e)}catch(l){g(l);return}h.onerror=g;h.onsuccess=function(l){l=Gd(l.target.result);c.set(l.K(),l);f()}},this)},a);Pb(a).then(function(){d.resolve(c)});return d.a}
function Qd(a){return new t(function(b,c){var d=[];try{var e=this.a.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var f=e.result;if(f){var g=Gd(f.value).Ga,h;for(h in g)d.push(this.b(g[h]));f.continue()}else b(d)}.bind(this)},a)}function Sd(a,b){return new t(function(c,d){try{var e=b()}catch(f){d(f);return}e.onsuccess=c;e.onerror=d},a)}
Pd.prototype.put=function(a){if(0==a.length)return u();var b=x();a.forEach(function(c){var d=c.id()>>9,e=b.get(d)||null;null===e&&(e=this.c(this.a.name,d));Ed(e,[c]);b.set(d,e)},this);a=y(b).map(function(c){return Sd(this,function(){return this.a.put(c.ia())}.bind(this))},this);return Pb(a)};
Pd.prototype.remove=function(a){if(0==a.length)return Sd(this,function(){return this.a.clear()}.bind(this));var b=x();a.forEach(function(c){var d=c>>9,e=b.get(d)||null;null===e&&(e=this.c(this.a.name,d));Fd(e,[c]);b.set(d,e)},this);a=y(b).map(function(c){return Sd(this,function(){return 0==Object.keys(c.Ga).length?this.a.delete(c.K()):this.a.put(c.ia())}.bind(this))},this);return Pb(a)};function Td(a,b,c){a=a.j(Jd);var d=[c<<9,(c+1<<9)-1];b=Ud(a,b,d[0],d[1]);c=new Cd(c);Ed(c,b);return c}
function Vd(a,b){return new Cd(b)};function Wd(a){this.a=a.j(Jd);this.b=a.j(Kd);this.c=a.j(Od)}Wd.prototype.update=function(a){a.forEach(function(b){Xd(this,b);Yd(this,b)},this)};function Yd(a,b){var c=b.g();b.ea.forEach(function(d,e){this.a.remove(c,e)},a);b.da.forEach(function(d){this.a.set(c,d)},a);b.Z.forEach(function(d){this.a.set(c,d[1])},a)}function Xd(a,b){var c=a.c.table(b.g());rd(b).forEach(function(d){Zd(this,c,d)},a)}
function Zd(a,b,c){var d=a.b.a.get(b.g())||[],e=0;d.forEach(function(f){try{$d(f,c),e++}catch(g){throw d.slice(0,e).forEach(function(h){$d(h,[c[1],c[0]])},this),g;}},a)}
function $d(a,b){var c=null===b[1]?void 0:b[1].wa(a.g()),d=null===b[0]?void 0:b[0].wa(a.g());if(void 0===d&&void 0!==c)a.add(c,b[1].id());else if(void 0!==d&&void 0!==c){if(null===c||null===d){if(c==d)return}else if(0==a.ta().Sa(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else void 0!==d&&void 0===c&&a.remove(d,b[0].id())};function ae(a){this.c=a.j(Kd);this.b=a.j(Od);this.f=a.j(Jd);this.a=null}function be(a,b,c){var d=b.a.c;c.forEach(function(e){d.forEach(function(f){if(null==e.u[f.g()])throw new v(202,f.o());},this)},a)}function ce(a,b,c,d){b.a.b.forEach(function(e){e.a==d&&de(this,e,c)},a)}function de(a,b,c){var d=ee(a,b);c.forEach(function(e){if(fe(e[0],e[1],b.name)&&(e=e[1].wa(b.name),null!==e&&!d.Ra(e)))throw new v(203,b.name);},a)}
function ee(a,b){null===a.a&&(a.a=x());var c=a.a.get(b.name)||null;null===c&&(c=a.b.table(b.na)[b.b].bb(),c=a.c.get(c.o()),a.a.set(b.name,c));return c}function fe(a,b,c){return(null===a?null!==b:null===b)||a.wa(c)!=b.wa(c)}function ge(a,b,c,d){b=dd(he(a.b),b.g(),0);null!==b&&(b=b.filter(function(e){return e.a==d}),0!=b.length&&ie(a,b,c,function(e,f,g){if(f.Ra(g))throw new v(203,e.name);}))}
function je(a,b,c){b=dd(he(a.b),b.g(),1);if(null===b)return null;var d=new Zc;ie(a,b,c,function(e,f,g){f=f.get(g);0<f.length&&$c(d,e.f,f)});return d}function ke(a,b,c){var d=new Zc;ie(a,c,b,function(e,f,g,h){f.get(g).forEach(function(l){d.set(l,{rb:e,Fc:h[1]})})});return d}function ie(a,b,c,d){b.forEach(function(e){var f=this.c.get(e.name),g=ee(this,e);c.forEach(function(h){if(fe(h[0],h[1],g.g())){var l=h[0].wa(g.g());d(e,f,l,h)}},this)},a)}
function le(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[null,e]}),ce(a,b,c,d))}function me(a,b,c,d){0!=c.length&&(ce(a,b,c,d),ge(a,b,c,d))}function ne(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[e,null]}),ge(a,b,c,d))}
function oe(a,b,c){var d={Cb:[],Tb:new Zc},e=new Zc;$c(e,b.g(),c.map(function(g){return g.id()}));do{var f=new Zc;e.keys().forEach(function(g){var h=this.b.table(g);g=e.get(g).map(function(l){return[this.f.get(l),null]},this);h=je(this,h,g);null!==h&&(d.Cb.unshift.apply(d.Cb,h.keys()),ad(f,h))},a);e=f;ad(d.Tb,e)}while(0<e.size);return d};function pe(a,b){this.f=x();b.forEach(function(c){this.f.set(c.g(),c)},this);this.h=a.j(Od);this.c=a.j(Jd);this.s=a.j(Kd);this.a=new ae(a);this.l=new Wd(a);this.b=x()}function Bd(a){var b=[];Vc(a.b).map(function(c){return this.f.get(c)},a).forEach(function(c){c.Ha()&&(c.ga().forEach(function(d){b.push(this.s.get(d.o()))},this),b.push(this.s.get(c.g()+".#")))},a);return b}k=pe.prototype;k.Ea=function(a,b){qe(this,a);be(this.a,a,b);le(this.a,a,b,0);for(var c=0;c<b.length;c++)re(this,a,[null,b[c]])};
function re(a,b,c){var d=b.g(),e=a.b.get(d)||new qd(d);a.b.set(d,e);try{Zd(a.l,b,c)}catch(g){throw g;}b=c[0];var f=c[1];null===b&&null!==f?(a.c.set(d,f),e.add(f)):null!==b&&null!==f?(a.c.set(d,f),e.modify(c)):null!==b&&null===f&&(a.c.remove(d,b.id()),e.delete(b))}k.update=function(a,b){qe(this,a);be(this.a,a,b);b=b.map(function(c){return[this.c.get(c.id()),c]},this);se(this,a,b);me(this.a,a,b,0);b.forEach(function(c){re(this,a,c)},this)};
k.sb=function(a,b){qe(this,a);be(this.a,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.a.a;if(null===f)var g=null;else{g=this.a;var h=d;f=f.o();h=h.wa(f);g=g.c.get(f).get(h);g=0==g.length?null:g[0]}null!=g?(e=this.c.get(g),d.O=g,me(this.a,a,[[e,d]],0)):le(this.a,a,[d],0);re(this,a,[e,d])}};k.remove=function(a,b){qe(this,a);te(this,a,b);ne(this.a,a,b,0);for(var c=0;c<b.length;c++)re(this,a,[b[c],null])};
function se(a,b,c){b=dd(he(a.h),b.g(),1);if(null!==b){var d=ke(a.a,c,b);d.keys().forEach(function(e){d.get(e).forEach(function(f){var g=this.h.table(f.rb.f),h=this.c.get(e),l=g.ua(h.ia());l.u[f.rb.za]=f.Fc.u[f.rb.b];re(this,g,[h,l])},this)},a)}}function te(a,b,c){if(null!==dd(he(a.h),b.g(),1)){b=oe(a.a,b,c);var d=b.Tb;b.Cb.forEach(function(e){var f=this.h.table(e);e=d.get(e).map(function(g){return this.c.get(g)},this);ne(this.a,f,e,0);e.forEach(function(g){re(this,f,[g,null])},this)},a)}}
function xd(a){a.b.forEach(function(b){var c=this.f.get(b.g());le(this.a,c,y(b.da),1);ne(this.a,c,y(b.ea),1);me(this.a,c,y(b.Z),1)},a)}k.V=function(){};k.Na=function(){var a=y(this.b).map(function(b){return sd(b)});this.l.update(a)};function qe(a,b){if(!a.f.has(b.g()))throw new v(106,b.g());};function ue(a,b){this.a=a;this.b=b}ue.prototype.oa=function(){return this.a};function ve(a){var b=z();a.forEach(function(c){c.b.forEach(b.add.bind(b))});return b};n("lf.bind",function(a){return new we(a)});function we(a){this.a=a}n("lf.Binder",we);function xe(){this.b=ye();var a=ze();this.a=x();this.a.set(1,Ae());this.a.set(2,Be());this.a.set(4,a);this.a.set(3,a);this.a.set(5,Ce());this.a.set(6,De())}var Ee;function Fe(){null==Ee&&(Ee=new xe);return Ee}function Ge(a,b,c){a=a.a.get(b)||null;if(null===a)throw new v(550);c=a.get(c)||null;if(null===c)throw new v(550);return c}
function ye(){function a(c){return c}var b=x();b.set(1,function(c){return null===c?null:c?1:0});b.set(2,function(c){return null===c?null:c.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Ae(){var a=x();a.set("eq",function(b,c){return b==c});a.set("neq",function(b,c){return b!=c});return a}
function ze(){var a=Ae();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b>=c[0]&&b<=c[1]});a.set("gte",function(b,c){return null===b||null===c?!1:b>=c});a.set("gt",function(b,c){return null===b||null===c?!1:b>c});a.set("in",function(b,c){return-1!=c.indexOf(b)});a.set("lte",function(b,c){return null===b||null===c?!1:b<=c});a.set("lt",function(b,c){return null===b||null===c?!1:b<c});return a}
function Ce(){var a=ze();a.set("match",function(b,c){return null===b||null===c?!1:(new RegExp(c)).test(b)});return a}function De(){var a=x();a.set("eq",function(b,c){if(null!==c)throw new v(550);return null===b});a.set("neq",function(b,c){if(null!==c)throw new v(550);return null!==b});return a}
function Be(){var a=x();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b.getTime()>=c[0].getTime()&&b.getTime()<=c[1].getTime()});a.set("eq",function(b,c){return(null===b?-1:b.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(b,c){return null===b||null===c?!1:b.getTime()>=c.getTime()});a.set("gt",function(b,c){return null===b||null===c?!1:b.getTime()>c.getTime()});a.set("in",function(b,c){return c.some(function(d){return d.getTime()==b.getTime()})});a.set("lte",
function(b,c){return null===b||null===c?!1:b.getTime()<=c.getTime()});a.set("lt",function(b,c){return null===b||null===c?!1:b.getTime()<c.getTime()});a.set("neq",function(b,c){return(null===b?-1:b.getTime())!=(null===c?-1:c.getTime())});return a};function He(a,b,c,d){this.from=a;this.C=b;this.W=this.from==G?!1:c;this.$=this.C==G?!1:d}var G=new function(){};He.prototype.toString=function(){return(this.W?"(":"[")+(this.from==G?"unbound":this.from)+", "+(this.C==G?"unbound":this.C)+(this.$?")":"]")};function Ie(a){if(Je(a))return[];var b=null,c=null;a.from==G||(b=new He(G,a.from,!1,!a.W));a.C==G||(c=new He(a.C,G,!a.$,!1));return[b,c].filter(function(d){return null!==d})}He.prototype.reverse=function(){return new He(this.C,this.from,this.$,this.W)};
function Ke(a,b){var c=Le(a.from,b.from,!0,a.W,b.W);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.C==G||d.C>a.from||d.C==a.from&&!d.$&&!a.W}function Me(){return new He(G,G,!1,!1)}function Je(a){return a.from==G&&a.C==G}function Ne(a){return a.from==a.C&&a.from!=G&&!a.W&&!a.$}function Le(a,b,c,d,e){function f(g){return c?g:1==g?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}
function Oe(a,b){var c=Le(a.from,b.from,!0,a.W,b.W);0==c&&(c=Le(a.C,b.C,!1,a.$,b.$));return c}function Pe(a){if(0==a.length)return[];a.sort(Oe);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new He(G,a[c].from,!1,!0):c==b.length-1?new He(a[c-1].C,G,!0,!1):new He(a[c-1].C,a[c].from,!0,!0);return b};function Qe(a){this.a=[];void 0!==a&&this.add(a)}Qe.prototype.toString=function(){return this.a.map(function(a){return a.toString()}).join(",")};Qe.prototype.ca=function(){return this.a};
Qe.prototype.add=function(a){if(0!=a.length)if(a=this.a.concat(a),1==a.length)this.a=a;else{a.sort(Oe);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Ke(c,a[d])){var e=a[d],f=Me();if(c.from!=G&&e.from!=G){var g=Le(c.from,e.from,!0);1!=g?(f.from=c.from,f.W=0!=g?c.W:c.W&&e.W):(f.from=e.from,f.W=e.W)}c.C!=G&&e.C!=G&&(g=Le(c.C,e.C,!1),-1!=g?(f.C=c.C,f.$=0!=g?c.$:c.$&&e.$):(f.C=e.C,f.$=e.$));c=f}else b.push(c),c=a[d];b.push(c);this.a=b}};
function Re(a,b){var c=[];a.ca().map(function(d){return b.ca().map(function(e){if(Ke(d,e)){var f=Me();var g=Le(d.from,e.from,!0);g=0==g?d.W?d:e:-1!=g?d:e;f.from=g.from;f.W=g.W;d.C==G||e.C==G?e=d.C==G?e:d:(g=Le(d.C,e.C,!1),e=0==g?d.$?d:e:-1==g?d:e);f.C=e.C;f.$=e.$}else f=null;return f})}).forEach(function(d){c=c.concat(d)});return new Qe(c.filter(function(d){return null!==d}))};function J(){this.m=this.w=null}var Se=[];J.prototype.getParent=function(){return this.w};J.prototype.oa=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function Te(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function K(a){return a.m||Se}function Ue(a,b){return K(a)[b]||null}function Ve(a,b,c){b.w=a;null===a.m?a.m=[b]:a.m.splice(c,0,b)}function L(a,b){b.w=a;null===a.m?a.m=[b]:a.m.push(b)}
function We(a,b){var c=a.m&&a.m[b];return c?(c.w=null,a.m.splice(b,1),0==a.m.length&&(a.m=null),c):null}J.prototype.removeChild=function(a){return We(this,K(this).indexOf(a))};function Xe(a,b,c){Ue(a,c).w=null;b.w=a;a.m[c]=b}function Ye(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(d){Ye(d,b,c)})};function Ze(){J.call(this);this.O=$e++}q(Ze,J);var $e=0;Ze.prototype.K=function(){return this.O};function M(a,b){this.entries=a;this.b=z(b);this.a=null}M.prototype.A=function(){return A(this.b)};function af(a){return a.entries.map(function(b){return b.ba.u})}function bf(a){return a.entries.map(function(b){return b.ba.id()})}function cf(a,b){return a.a.get(b.o())}var df=null;function ef(){null===df&&(df=new M([],[]));return df}
function ff(a){if(0==a.length)return ef();var b=a.reduce(function(g,h){return g+h.entries.length},0),c=Array(b),d=0;b=a.map(function(g){var h=x();g.entries.forEach(function(l){c[d++]=l;h.set(l.id,l)});return h});for(var e=x(),f=0;f<c.length;f++)b.every(function(g){return g.has(c[f].id)})&&e.set(c[f].id,c[f]);return new M(y(e),A(a[0].b))}function gf(a){if(0==a.length)return ef();var b=x();a.forEach(function(c){c.entries.forEach(function(d){b.set(d.id,d)})});return new M(y(b),A(a[0].b))}
function hf(a,b){var c=1<b.length;a=a.map(function(d){return new jf(d,c)});return new M(a,b)}function jf(a,b){this.ba=a;this.id=kf++;this.ub=b}var kf=0;function N(a,b){var c=b.Qa();return null!==c&&a.ba.u.hasOwnProperty(c)?a.ba.u[c]:a.ub?a.ba.u[ld(b.Y())][b.g()]:a.ba.u[b.g()]}function mf(a,b,c){var d=b.Qa();if(null!=d)a.ba.u[d]=c;else if(a.ub){d=ld(b.Y());var e=a.ba.u[d];null==e&&(e={},a.ba.u[d]=e);e[b.g()]=c}else a.ba.u[b.g()]=c}
function nf(a,b,c,d){function e(g,h){if(g.ub){g=g.ba.u;for(var l in g)f[l]=g[l]}else f[h[0]]=g.ba.u}var f={};e(a,b);e(c,d);a=new Kc(-1,f);return new jf(a,!0)};function of(a,b,c){Ze.call(this);this.F=a;this.value=b;this.a=c;this.f=Ge(Fe(),this.F.D(),this.a);this.b=!1;this.c=b}q(of,Ze);k=of.prototype;k.Oa=function(){var a=new of(this.F,this.value,this.a);a.c=this.c;a.ob(this.b);var b=this.K();a.O=b;return a};k.va=function(a){return null!=a?(a.push(this.F),a):[this.F]};k.A=function(a){a=null!=a?a:z();a.add(this.F.Y());return a};k.ob=function(a){this.b=a};
function pf(a){var b=!1;a.value instanceof we||(b="array"==ua(a.value)?!a.value.some(function(c){return c instanceof we}):!0);if(!b)throw new v(501);}k.eval=function(a){pf(this);if("in"==this.a)return qf(this,a);var b=a.entries.filter(function(c){return this.f(N(c,this.F),this.value)!=this.b},this);return new M(b,a.A())};
k.bind=function(a){if(this.c instanceof we){var b=this.c.a;if(a.length<=b)throw new v(510);this.value=a[b]}else"array"==ua(this.c)&&(this.value=this.c.map(function(c){if(c instanceof we){if(a.length<=c.a)throw new v(510);return a[c.a]}return c}))};function qf(a,b){var c=z(a.value),d=function(e){return null===e?!1:c.has(e)!=this.b}.bind(a);a=b.entries.filter(function(e){return d(N(e,this.F))},a);return new M(a,b.A())}
k.toString=function(){return"value_pred("+this.F.o()+" "+this.a+(this.b?"(complement)":"")+" "+this.value+")"};function rf(a){pf(a);return null!==a.value&&("between"==a.a||"in"==a.a||"eq"==a.a||"gt"==a.a||"gte"==a.a||"lt"==a.a||"lte"==a.a)}
k.Eb=function(){var a=null;if("between"==this.a)a=new He(sf(this,this.value[0]),sf(this,this.value[1]),!1,!1);else{if("in"==this.a)return a=this.value.map(function(b){return new He(b,b,!1,!1)}),new Qe(this.b?Pe(a):a);a=sf(this,this.value);a="eq"==this.a?new He(a,a,!1,!1):"gte"==this.a?new He(a,G,!1,!1):"gt"==this.a?new He(a,G,!0,!1):"lte"==this.a?new He(G,a,!1,!1):new He(G,a,!1,!0)}return new Qe(this.b?Ie(a):[a])};function sf(a,b){return 2==a.F.D()?b.getTime():b};function tf(a){this.S=a;this.h=this.s=null}function uf(a,b){null===a.s&&null!=a.B&&(a.s=vf(a.B));return a.s.get(b)||null}function vf(a){var b=x();Ye(a,function(c){b.set(c.K(),c)});return b}function wf(a,b){b.B&&(a.B=b.B.Oa());a.h=b}tf.prototype.bind=function(){return this};function xf(a,b){a=a.B;null!=a&&Ye(a,function(c){c instanceof of&&c.bind(b)})};function yf(a){tf.call(this,a)}q(yf,tf);function zf(a){var b="";a.forEach(function(c,d){b+=c.F.o()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}yf.prototype.l=function(){return z(this.from)};yf.prototype.clone=function(){var a=new yf(this.S);wf(a,this);this.a&&(a.a=this.a.slice());this.from&&(a.from=this.from.slice());a.M=this.M;a.G=this.G;this.H&&(a.H=this.H.slice());this.aa&&(a.aa=this.aa.slice());this.f&&(a.f=this.f);this.c&&(a.c=this.c);a.b=this.b;return a};
yf.prototype.bind=function(a){yf.sa.bind.call(this,a);null!=this.f&&(this.M=a[this.f.a]);null!=this.c&&(this.G=a[this.c.a]);xf(this,a);return this};function Af(a,b){this.h=a;this.L=a.j(Id);this.a=b.map(function(c){return c.context});this.s=b.map(function(c){return c.yb});this.b=ve(this.s);this.f=Bf(this);this.ha=Qb()}function Bf(a){return a.a.some(function(b){return!(b instanceof yf)})?1:0}k=Af.prototype;
k.exec=function(){function a(){var f=d.shift();if(f){var g=e[c.length];return f.oa().exec(b,g).then(function(h){c.push(h[0]);return a()})}return u()}var b=0==this.f?void 0:new pe(this.h,this.b),c=[],d=this.s.slice(),e=this.a;return a().then(function(){this.c=this.L.Ja(this.f,A(this.b),b);return this.c.V()}.bind(this)).then(function(){this.xb(c);return c}.bind(this),function(f){null!=b&&b.Na();throw f;})};k.D=function(){return this.f};k.qa=function(){return this.b};k.Ka=function(){return this.ha};
k.K=function(){return xa(this)};k.xb=function(){};k.N=function(){var a=null;null!=this.c&&(a=this.c.N());return null===a?new F(!1,0,0,0,0):a};function Cf(a,b){Af.call(this,a,b);this.l=a.j(Nd)}q(Cf,Af);Cf.prototype.xa=function(){return 0};Cf.prototype.xb=function(a){this.a.forEach(function(b,c){Df(this.l,b,a[c])},this)};function Ef(a,b){this.c=a;this.h=a.j(Nd);this.s=a.j(Md);this.f=new Wd(a);this.b=b;var c=a.j(Od);a=this.b.map(function(d){return c.table(d.g())});this.a=z(a);this.l=Qb()}k=Ef.prototype;k.exec=function(){this.f.update(this.b);var a=Ff(this.h,this.a);0!=a.length&&(a=new Cf(this.c,a),Gf(this.s,a));return u()};k.D=function(){return 1};k.qa=function(){return this.a};k.Ka=function(){return this.l};k.K=function(){return xa(this)};k.xa=function(){return 1};function Hf(a){this.b=a;this.a=a.j(Id);this.c=a.j(Md)}Hf.prototype.f=function(a){a=new Ef(this.b,a);Gf(this.c,a)};
function P(a,b){this.f=a;this.a=b;this.b=x()}n("lf.backstore.FirebaseRawBackStore",P);P.prototype.jb=function(){return this.a};P.prototype.kb=function(){throw new v(351);};function If(a,b){var c=Qb(),d=a;b.length&&(d=a.child(b));d.once("value",function(e){c.resolve(e.val())},function(e){c.b(e)});return c.a}function Jf(a,b,c){function d(f){f?e.b(f):e.resolve()}c=c||!1;var e=Qb();c?a.set(b,d):a.update(b,d);return e.a}
P.prototype.U=function(a){return If(this.a,"@rev/R").then(function(b){this.c=b;return If(this.a,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.b.set(d,b[d]),b[d]>c&&(c=b[d]);a.X().forEach(function(e){this.b.has(e.g())||(b[e.g()]=++c)},this);var d=this.a.child("@table");return Jf(d,b)}.bind(this))};
function Kf(a,b,c){var d=a.b.get(b);return null==d?u():function(){var e={},f=Qb();this.a.orderByChild("T").equalTo(d).once("value",function(g){g.forEach(function(h){var l=c(h.val());e[parseInt(h.key(),10)]=l});f.resolve(e)});return f.a}.call(a).then(function(e){e["@rev"]={R:++this.c};return Jf(this.a,e)}.bind(a))}P.prototype.Va=function(a){return Kf(this,a,function(){return null}).then(function(){this.b.delete(a);return Jf(this.a.child("@table/"+a),null,!0)}.bind(this))};P.prototype.dropTable=P.prototype.Va;
P.prototype.Ua=function(a,b,c){return Kf(this,a,function(d){var e=d.P;e[b]=c;return{R:this.c+1,T:d.T,P:e}}.bind(this))};P.prototype.addTableColumn=P.prototype.Ua;P.prototype.Wa=function(a,b){return Kf(this,a,function(c){var d=c.P;delete d[b];return{R:this.c+1,T:c.T,P:d}}.bind(this))};P.prototype.dropTableColumn=P.prototype.Wa;P.prototype.eb=function(a,b,c){return Kf(this,a,function(d){var e=d.P;e[c]=e[b];delete e[b];return{R:this.c+1,T:d.T,P:e}}.bind(this))};P.prototype.renameTableColumn=P.prototype.eb;
P.prototype.Ba=function(){throw new v(351);};P.prototype.createRow=P.prototype.Ba;P.prototype.Za=function(){return this.f};P.prototype.getVersion=P.prototype.Za;function Lf(a,b){var c=Qb();b=a.b.get(b);a.a.orderByChild("T").equalTo(b).once("value",function(d){var e=[];d.forEach(function(f){e.push(f.val().P)});c.resolve(e)});return c.a}P.prototype.dump=function(){var a={},b=Vc(this.b).map(function(c){return Lf(this,c).then(function(d){a[c]=d})}.bind(this));return Pb(b).then(function(){return a})};
P.prototype.dump=P.prototype.dump;function Mf(a,b,c){vd.call(this,b,c);this.c=a}q(Mf,vd);Mf.prototype.a=function(a){return this.c.Xa(a)};
Mf.prototype.f=function(){if(0==this.l)return this.J.resolve(),this.J.a;var a=this.b.b;if(0==a.size)this.J.resolve();else{var b=this.c.c+1;this.c.c=b;var c={"@rev":{R:b}};a.forEach(function(d,e){var f=this.c.h.get(e);d.da.forEach(function(g,h){c[h]={R:b,T:f,P:g.u}});d.Z.forEach(function(g,h){c[h]={R:b,T:f,P:g[1].u}});d.ea.forEach(function(g,h){c[h]=null})},this);this.c.a.update(c,function(d){null!==d?(this.c.c=b-1,d=y(a).map(function(e){return Nf(this.c,e.g())},this),Pb(d).then(this.J.b.bind(this.J),
this.J.b.bind(this.J))):this.J.resolve()}.bind(this))}return this.J.a};function Of(){this.a=x()}function Pf(a,b){if(0==b.length)return y(a.a);var c=[];b.forEach(function(d){d=this.a.get(d)||null;null!==d&&c.push(d)},a);return c}Of.prototype.getData=function(){return this.a};Of.prototype.get=function(a){return u(Pf(this,a))};function Qf(a,b){b.forEach(function(c){this.a.set(c.id(),c)},a)}Of.prototype.put=function(a){Qf(this,a);return u()};function Rf(a,b){0==b.length||b.length==a.a.size?a.a.clear():b.forEach(function(c){this.a.delete(c)},a)}
Of.prototype.remove=function(a){Rf(this,a);return u()};function Sf(a){return 0==a.a.size?0:Vc(a.a).reduce(function(b,c){return b>c?b:c},0)};
function Tf(a,b){this.b=a;this.ha=b;this.l=x();this.c=-1;this.f=x();this.h=x();this.s=null}k=Tf.prototype;
k.U=function(a){this.a=this.ha.child(this.b.name());var b=a||function(){return u()};return If(this.a,"@db/version").then(function(c){return null===c?Jf(this.a,Uf(this),!0).then(function(){var d=new P(0,this.a);return b(d)}.bind(this)).then(function(){return this.U()}.bind(this)):c==this.b.version()?If(this.a,"@rev/R").then(function(d){this.c=d;return If(this.a,"@table")}.bind(this)).then(function(d){for(var e in d)this.h.set(e,d[e]);d=this.b.X().map(function(f){return Nf(this,f.g())},this);return Pb(d)}.bind(this)).then(function(){Vf(this);
Wf(this);return u()}.bind(this)):Xf(this,c,b).then(function(){return this.U()}.bind(this))}.bind(this))};function Xf(a,b,c){var d=new P(b,a.a);return d.U(a.b).then(function(){return u()}.bind(a)).then(function(){return c(d)}).then(function(){var e=this.a.child("@db");return Jf(e,{version:this.b.version()},!0)}.bind(a))}function Wf(a){a.a.off();a.a.on("child_removed",a.Ec.bind(a));a.L&&(a.L.off(),a.l.clear());a.L=a.a.orderByChild("R").startAt(a.c+1);a.L.on("value",a.Ac.bind(a))}
function Vf(a){Lc=y(a.f).map(function(b){return Sf(b)}).reduce(function(b,c){return b>c?b:c},0)+1}k.Ec=function(a){var b=a.val(),c=this.l.get(b.T)||null;null===c&&(c=z(),this.l.set(b.T,c));c.add(parseInt(a.key(),10))};k.Ac=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.c&&(this.c=b,a=Yf(this,a),a.forEach(function(c){var d=this.f.get(c.g()),e=Vc(c.ea);0<e.length&&Rf(d,e);var f=y(c.da);c.Z.forEach(function(g){f.push(g[1])});Qf(d,f)},this),0<a.length&&this.notify(a),Wf(this))};
function Yf(a,b){var c=z(),d=x();a.h.forEach(function(e,f){var g=this.f.get(f),h=new qd(f);this.l.has(e)&&(f=A(this.l.get(e)),f.forEach(function(l){c.add(l)}),Pf(g,f).forEach(function(l){h.delete(l)}));d.set(e,h)}.bind(a));b.forEach(function(e){if("@rev"!=e.key()){var f=parseInt(e.key(),10);if(!c.has(f)){var g=e.val();e=d.get(g.T);var h=this.f.get(e.g());g=this.b.table(e.g()).ua({id:f,value:g.P});h.getData().has(f)?e.modify([Pf(h,[f])[0],g]):e.add(g)}}}.bind(a));return y(d).filter(function(e){return!e.lb()})}
function Nf(a,b){var c=Qb(),d=a.h.get(b),e=a.b.table(b);a.a.orderByChild("T").equalTo(d).once("value",function(f){var g=new Of,h=[];f.forEach(function(l){h.push(e.ua({id:parseInt(l.key(),10),value:l.val().P}))});Qf(g,h);this.f.set(b,g);c.resolve()}.bind(a));return c.a}function Uf(a){var b={};b["@db"]={version:a.b.version()};b["@rev"]={R:1};a.c=1;b["@table"]={};a.b.X().forEach(function(c,d){c=c.g();b["@table"][c]=d;this.f.set(c,new Of);this.h.set(c,d)},a);return b}
k.Ja=function(a,b,c){return new Mf(this,a,c)};k.Xa=function(a){var b=this.f.get(a)||null;if(null!==b)return b;throw new v(101,a);};k.close=function(){};k.ab=function(a){this.s=a};k.notify=function(a){null!=this.s&&this.s(a)};k.fb=function(){return!1};function Q(a,b,c,d){this.a=b;this.b=c;this.f=a;this.c=d}n("lf.backstore.IndexedDBRawBackStore",Q);Q.prototype.jb=function(){return this.a};Q.prototype.getRawDBInstance=Q.prototype.jb;Q.prototype.kb=function(){return this.b};Q.prototype.getRawTransaction=Q.prototype.kb;Q.prototype.Va=function(a){return new t(function(b,c){try{this.a.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};Q.prototype.dropTable=Q.prototype.Va;
function Zf(a,b,c,d){return new t(function(e,f){try{var g=this.b.objectStore(b);var h=g.openCursor()}catch(l){f(l);return}h.onsuccess=function(){var l=h.result;l?(c(l),l.continue()):(d(g),e())};h.onerror=f},a)}function $f(a){var b=null;a instanceof ArrayBuffer?b=Oc(a):a instanceof Date?b=a.getTime():b=a;return b}
function ag(a,b,c){function d(f){var g=Gd(f.value),h=g.Ga,l;for(l in h){var m=Mc(h[l]);c(m);h[l]=m.ia()}f.update(g.ia())}function e(f){var g=Mc(f.value);c(g);f.update(g.ia())}return Zf(a,b,a.c?d:e,function(){})}Q.prototype.Ua=function(a,b,c){var d=$f(c);return ag(this,a,function(e){e.u[b]=d})};Q.prototype.addTableColumn=Q.prototype.Ua;Q.prototype.Wa=function(a,b){return ag(this,a,function(c){delete c.u[b]})};Q.prototype.dropTableColumn=Q.prototype.Wa;
Q.prototype.eb=function(a,b,c){return ag(this,a,function(d){d.u[c]=d.u[b];delete d.u[b]})};Q.prototype.renameTableColumn=Q.prototype.eb;function bg(a,b){var c=[];return new t(function(d,e){try{var f=this.b.objectStore(b).openCursor()}catch(g){e(g);return}f.onsuccess=function(){var g=f.result;if(g){if(this.c){var h=Gd(g.value).Ga,l;for(l in h)c.push(h[l])}else c.push(g.value);g.continue()}else d(c)}.bind(this);f.onerror=e},a)}Q.prototype.Ba=function(a){var b={},c;for(c in a)b[c]=$f(a[c]);return Nc(b)};
Q.prototype.createRow=Q.prototype.Ba;Q.prototype.Za=function(){return this.f};Q.prototype.getVersion=Q.prototype.Za;Q.prototype.dump=function(){for(var a=this.a.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(cg(this,d))}return Pb(b).then(function(e){var f={};e.forEach(function(g,h){f[a.item(h)]=g});return f})};Q.prototype.dump=Q.prototype.dump;function cg(a,b){return bg(a,b).then(function(c){return c.map(function(d){return d.value})})};function dg(a,b){this.a=a;this.b=b}dg.prototype.get=function(a){if(0==a.length)return eg(this);a=a.map(function(b){return new t(function(c,d){try{var e=this.a.get(b)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(f){c(this.b(f.target.result))}.bind(this)},this)},this);return Pb(a)};
function eg(a){return new t(function(b,c){var d=[];try{var e=this.a.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var f=e.result;f?(d.push(this.b(f.value)),f.continue()):b(d)}.bind(this)},a)}function fg(a,b){return new t(function(c,d){try{var e=b()}catch(f){d(f);return}e.onsuccess=c;e.onerror=d},a)}dg.prototype.put=function(a){if(0==a.length)return u();a=a.map(function(b){return fg(this,function(){return this.a.put(b.ia())}.bind(this))},this);return Pb(a)};
dg.prototype.remove=function(a,b){function c(){var e=a.map(function(f){return fg(d,function(){return d.a.delete(f)})});return Pb(e)}var d=this;return b?c():new t(function(e,f){var g=d.a.count();g.onsuccess=function(h){0==a.length||h.target.result==a.length?fg(d,function(){return d.a.clear()}).then(e,f):c().then(e,f)};g.onerror=f})};function gg(a,b,c,d,e){vd.call(this,c,e);this.ra=a;this.c=b;this.ha=d;this.c.oncomplete=this.J.resolve.bind(this.J);this.c.onabort=this.J.b.bind(this.J)}q(gg,vd);gg.prototype.a=function(a,b,c){return this.ha?(c=null!=c?c:0,a=this.c.objectStore(a),new Pd(a,b,0==c?Da(Td,this.ra):Vd)):new dg(this.c.objectStore(a),b)};gg.prototype.abort=function(){this.c.abort()};gg.prototype.f=function(){return this.J.a};function hg(a,b){this.f=a;this.b=b;this.c=b.b.kc||!1}k=hg.prototype;
k.U=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new v(352);var c=a||function(){return u()};return new t(function(d,e){try{var f=b.open(this.b.name(),this.b.version())}catch(g){e(g);return}f.onerror=function(g){g=g.target.error;e(new v(361,g.name,g.message))};f.onupgradeneeded=function(g){ig(this,c,g).then(function(){},e)}.bind(this);f.onsuccess=function(g){this.a=g.target.result;jg(this).then(function(h){Lc=Math.max(Lc,h+1);
d(this.a)}.bind(this))}.bind(this)},this)};function ig(a,b,c){var d=c.target.result;c=new Q(c.oldVersion,d,c.target.transaction,a.c);kg(d);a.b.X().forEach(Da(a.fc,d),a);return b(c)}function kg(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(e){try{a.deleteObjectStore(e)}catch(f){}})}
k.fc=function(a,b){a.objectStoreNames.contains(b.g())||a.createObjectStore(b.g(),{keyPath:"id"});b.Ha()&&(b.ga().forEach(function(c){lg(a,c.o())},this),lg(a,md(b)))};function lg(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}k.Ja=function(a,b,c){b=this.a.transaction(mg(b),0==a?"readonly":"readwrite");return new gg(this.f,b,a,this.c,c)};
function mg(a){var b=z();a.forEach(function(c){b.add(c.g());c.Ha()&&(c.ga().forEach(function(d){b.add(d.o())}),b.add(md(c)))});return A(b)}
function jg(a){function b(){if(0==d.length)return u();var h=d.shift();return c(h).then(b)}function c(h){return new t(function(l,m){try{var p=e.transaction([h]).objectStore(h).openCursor(null,"prev")}catch(B){m(B);return}p.onsuccess=function(B){(B=B.target.result)&&(f=Math.max(f,g(B)));l(f)};p.onerror=function(){l(f)}})}var d=a.b.X().map(function(h){return h.g()}),e=a.a,f=0,g=function(h){return this.c?(h=Gd(h.value),Object.keys(h.Ga).reduce(function(l,m){return Math.max(l,m)},0)):h.key}.bind(a);return new t(function(h){b().then(function(){h(f)})})}
k.close=function(){this.a.close()};k.Xa=function(){throw new v(511);};k.ab=function(){};k.notify=function(){};k.fb=function(){return!0};function ng(a,b,c){vd.call(this,b,c);this.c=a;0==b&&this.J.resolve()}q(ng,vd);ng.prototype.a=function(a){return this.c.Xa(a)};ng.prototype.abort=function(){this.J.b(void 0)};ng.prototype.f=function(){this.J.resolve();return this.J.a};function og(a){this.c=a;this.b=x()}k=og.prototype;k.U=function(){this.c.X().forEach(this.uc,this);return u()};k.Xa=function(a){var b=this.b.get(a)||null;if(null===b)throw new v(101,a);return b};k.Ja=function(a,b,c){return new ng(this,a,c)};function pg(a,b){if(!a.b.has(b)){var c=new Of;a.b.set(b,c)}}k.uc=function(a){pg(this,a.g());a.Ha()&&(a.ga().forEach(function(b){pg(this,b.o())},this),pg(this,md(a)))};k.close=function(){};k.ab=function(){};k.notify=function(){};k.fb=function(){return!0};function qg(a){og.call(this,a);this.a=null}q(qg,og);qg.prototype.ab=function(a){null===this.a&&(this.a=a)};qg.prototype.notify=function(a){null!==this.a&&this.a(a)};qg.prototype.fb=function(){return!1};function rg(a,b,c){this.b=a;this.a='"'+b+'"';this.c=c}rg.prototype.get=function(a){var b=this.c;return sg(this.b,"SELECT id, value FROM "+this.a+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(c){for(var d=c.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:c.rows.item(f).id,value:JSON.parse(c.rows.item(f).value)});return e})};
rg.prototype.put=function(a){if(0==a.length)return u();var b="INSERT OR REPLACE INTO "+this.a+"(id, value) VALUES (?, ?)";a.forEach(function(c){sg(this.b,b,[c.id(),JSON.stringify(c.u)])},this);return u()};rg.prototype.remove=function(a){sg(this.b,"DELETE FROM "+this.a+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return u()};function tg(a,b,c){vd.call(this,b,c);this.ha=a;this.ra=x();this.c=[]}q(tg,vd);function ug(a){return a.replace(".","__d__").replace("#","__s__")}tg.prototype.a=function(a,b){var c=this.ra.get(a)||null;null===c&&(c=new rg(this,ug(a),b),this.ra.set(a,c));return c};function sg(a,b,c,d){var e=Qb();a.c.push({Kc:b,Gc:c,transform:d,J:e});return e.a}
tg.prototype.f=function(){var a=null,b=this.J.b.bind(this.J),c=function(f,g){this.J.b(g)}.bind(this),d=[],e=function(f,g){if(null!==a){var h=g;null!=a.transform&&null!=g&&(h=a.transform(g));d.push(h);a.J.resolve(h)}0<this.c.length?(a=g=this.c.shift(),f.executeSql(g.Kc,g.Gc,e,c)):this.J.resolve(d)}.bind(this);0==this.l?this.ha.readTransaction(e,b):this.ha.transaction(e,b);return this.J.a};tg.prototype.abort=function(){this.c=[]};function R(a,b,c){this.a=c;this.b=a;this.c=b}n("lf.backstore.WebSqlRawBackStore",R);R.prototype.jb=function(){return this.a};R.prototype.getRawDBInstance=R.prototype.jb;R.prototype.kb=function(){throw new v(356);};R.prototype.getRawTransaction=R.prototype.kb;function vg(a){return new tg(a.a,1,new pe(a.b,z()))}R.prototype.Va=function(a){var b=vg(this);sg(b,"DROP TABLE "+a,[]);return b.V()};R.prototype.dropTable=R.prototype.Va;
function wg(a,b){a=vg(a);sg(a,"SELECT id, value FROM "+b,[]);return a.V().then(function(c){for(var d=c[0].rows.length,e=Array(d),f=0;f<d;++f)e[f]={id:c[0].rows.item(f).id,value:JSON.parse(c[0].rows.item(f).value)};return u(e)})}function xg(a,b,c){var d=vg(a),e="UPDATE "+b+" SET value=? WHERE id=?";return wg(a,b).then(function(f){f.forEach(function(g){g=c(g);sg(d,e,[JSON.stringify(g.value),g.id])});return d.V()})}
R.prototype.Ua=function(a,b,c){var d=$f(c);return xg(this,a,function(e){e.value[b]=d;return e})};R.prototype.addTableColumn=R.prototype.Ua;R.prototype.Wa=function(a,b){return xg(this,a,function(c){delete c.value[b];return c})};R.prototype.dropTableColumn=R.prototype.Wa;R.prototype.eb=function(a,b,c){return xg(this,a,function(d){d.value[c]=d.value[b];delete d.value[b];return d})};R.prototype.renameTableColumn=R.prototype.eb;R.prototype.Ba=function(a){var b={},c;for(c in a)b[c]=$f(a[c]);return Nc(b)};
R.prototype.createRow=R.prototype.Ba;R.prototype.Za=function(){return this.c};R.prototype.getVersion=R.prototype.Za;function yg(a){sg(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(b){for(var c=Array(b.rows.length),d=0;d<c.length;++d)c[d]=b.rows.item(d).tbl_name;return c})}
R.prototype.dump=function(){var a=Qb(),b=vg(this);yg(b);var c={};b.V().then(function(d){d=d[0].filter(function(e){return"__lf_ver"!=e&&"__WebKitDatabaseInfoTable__"!=e}).map(function(e){return wg(this,e).then(function(f){c[e]=f})},this);Pb(d).then(function(){a.resolve(c)})}.bind(this));return a.a};R.prototype.dump=R.prototype.dump;function zg(a,b,c){this.c=a;this.b=b;this.f=c||1}k=zg.prototype;k.U=function(a){if(null==window.openDatabase)throw new v(353);var b=a||function(){return u()};return new t(function(c,d){var e=window.openDatabase(this.b.name(),"",this.b.name(),this.f);if(null!=e)this.a=e,Ag(this,b).then(function(){Bg(this).then(c,d)}.bind(this),function(f){if(f instanceof v)throw f;throw new v(354,f.message);});else throw new v(354);},this)};
function Ag(a,b){var c=Qb(),d=new tg(a.a,1,new pe(a.c,z()));sg(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);sg(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.V().then(function(e){var f=0;e[1].rows.length&&(f=e[1].rows.item(0).v);f<this.b.version()?Cg(this,b,f).then(c.resolve.bind(c)):f>this.b.version()?c.b(new v(108)):c.resolve()}.bind(a),c.b.bind(c));return c.a}k.Ja=function(a,b,c){if(null!=this.a)return new tg(this.a,a,c);throw new v(2);};k.close=function(){};
k.Xa=function(){throw new v(512);};k.ab=function(){throw new v(355);};k.notify=function(){throw new v(355);};function Cg(a,b,c){return Dg(a).then(function(){return b(new R(this.c,c,this.a))}.bind(a))}
function Dg(a){var b=a.b.X(),c=new tg(a.a,1,new pe(a.c,z())),d=new tg(a.a,1,new pe(a.c,z()));sg(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.b.version()]);yg(c);return c.V().then(function(e){var f=e[1];f.filter(function(m){return-1!=m.indexOf("__d__")}).forEach(function(m){sg(d,'DROP TABLE "'+(m+'"'),[])});var g=[],h=[],l=[];b.map(function(m){-1==f.indexOf(m.g())&&g.push(m.g());m.Ha&&(m.ga().forEach(function(p){p=ug(p.o());g.push(p);h.push(p)}),m=ug(md(m)),g.push(m),l.push(m))});g.forEach(function(m){sg(d,
'CREATE TABLE "'+(m+'"(id INTEGER PRIMARY KEY, value TEXT)'),[])});return d.V()})}function Bg(a){var b=0,c=Qb(),d=function(e){var f=new tg(this.a,0);sg(f,'SELECT MAX(id) FROM "'+(e+'"'),[]);return f.V().then(function(g){g=g[0].rows.item(0)["MAX(id)"];b=Math.max(g,b)})}.bind(a);a=a.b.X().map(function(e){return d(e.g())});Pb(a).then(function(){Lc=Math.max(Lc,b+1);c.resolve()},function(e){c.b(e)});return c.a}k.fb=function(){return!0};function Eg(a,b){this.h=Fe();this.b=a;this.a=b;this.f=Fg(this)}function Fg(a){if(0<a.b.a.length)return a.b.a;var b=[];a.b.from.forEach(function(c){c.va().forEach(function(d){b.push(d)})});return b}Eg.prototype.c=function(a,b){return this.f.every(function(c){return 6==c.D()||0==c.D()?N(a,c)===N(b,c):Ge(this.h,c.D(),"eq")(N(a,c),N(b,c))},this)};
function Gg(a,b,c){var d=null===b?[]:b.entries,e=ub(d,c.entries,a.c.bind(a),function(l){return d[l]});b=[];for(var f=0,g=0;g<d.length;g++){var h=d[g];e[f]==h?f++:(h=a.a.splice(f,1),h=Hg(g,h,0,a.a),b.push(h))}e=ub(d,c.entries,a.c.bind(a),function(l,m){return c.entries[m]});for(g=f=0;g<c.entries.length;g++)h=c.entries[g],e[f]==h?f++:(a.a.splice(g,0,h.ba.u),h=Hg(g,[],1,a.a),b.push(h));return b}function Hg(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function Ig(){this.a=x()}Ig.prototype.pb=function(a,b){var c=xa(a.a).toString(),d=this.a.get(c)||null;null===d&&(d=new Jg(a),this.a.set(c,d));d.pb(b)};Ig.prototype.zb=function(a,b){a=xa(a.a).toString();var c=this.a.get(a)||null;c.zb(b);0<c.cb.size||this.a.delete(a)};function Ff(a,b){var c=z();b.forEach(function(e){c.add(e.g())});var d=[];a.a.forEach(function(e){e=e.Ya();e.context.from.some(function(f){return c.has(f.g())})&&d.push(e)});return d}
function Df(a,b,c){b=xa(null!=b.h?b.h:b).toString();a=a.a.get(b)||null;null!==a&&Kg(a,c)}function Jg(a){this.b=a;this.cb=z();this.f=[];this.a=null;this.c=new Eg(a.a,this.f)}Jg.prototype.pb=function(a){this.cb.has(a)||this.cb.add(a)};Jg.prototype.zb=function(a){this.cb.delete(a)};Jg.prototype.Ya=function(){var a=this.b;return{context:a.a,yb:Lg(a)}};function Kg(a,b){var c=Gg(a.c,a.a,b);a.a=b;0<c.length&&a.cb.forEach(function(d){d(c)})};function Mg(a){this.a=x();this.b=x();this.U(a)}k=Mg.prototype;k.U=function(a){a.X().forEach(function(b){this.b.set(b.g(),z())},this)};k.set=function(a,b){this.a.set(b.id(),b);this.b.get(a).add(b.id())};function Ng(a,b,c){var d=a.b.get(b);c.forEach(function(e){this.a.set(e.id(),e);d.add(e.id())},a)}k.get=function(a){return this.a.get(a)||null};function Og(a,b){return b.map(function(c){return this.get(c)},a)}
function Ud(a,b,c,d){var e=[],f=Math.min(c,d),g=Math.max(c,d);b=a.b.get(b);if(b.size<g-f)b.forEach(function(h){h>=f&&h<=g&&(h=this.a.get(h),e.push(h))},a);else for(c=f;c<=g;++c)b.has(c)&&(d=a.a.get(c),e.push(d));return e}k.remove=function(a,b){this.a.delete(b);this.b.get(a).delete(b)};k.clear=function(){this.a.clear();this.b.clear()};function Pg(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(void 0!==c?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Qg(a,b,c){var d=0,e=a.length;for(c=c||Rg;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Rg(a,b){return a-b}function Sg(a,b,c){c=Qg(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Tg(a,b,c){this.h=a;this.b=b;this.f=c;this.c=new td;this.clear()}var Ug=[];k=Tg.prototype;k.g=function(){return this.h};k.toString=function(){return this.a.toString()};k.add=function(a,b){this.a=this.a.Ea(a,b)};k.set=function(a,b){this.a=this.a.Ea(a,b,!0)};k.remove=function(a,b){this.a=this.a.remove(a,b)};k.get=function(a){return this.a.get(a)};k.ib=function(a){if(null==a)return this.N().a;if(a instanceof He){if(Je(a))return this.N().a;if(Ne(a))return this.get(a.from).length}return this.La([a]).length};
k.N=function(){return this.c};function Vg(a,b,c,d){var e=Array(b);a.a.fill({offset:c?a.c.a-b-d:d,count:b,Bb:0},e);return c?e.reverse():e}
k.La=function(a,b,c,d){var e=Wg(this.a).i[0];if(void 0===e||0==c)return Ug;b=b||!1;c=null!=c?Math.min(c,this.c.a):this.c.a;d=d||0;var f=Math.min(Math.max(this.c.a-d,0),c);if(0==f)return Ug;if(void 0===a||1==a.length&&a[0]instanceof He&&Je(a[0]))return Vg(this,f,b,d);a=this.b.Vb(a);var g=Array(b?this.c.a:f),h={count:0,M:g.length,reverse:b,G:d},l=1<this.ta().vb();a.forEach(function(m){var p=this.b.nb(m);p=this.b.tb(m)?e:p[0];p=this.a.l(p);for(var B=0;null!=p&&h.count<h.M;){if(l){for(var H=p,O=m,I=h,
E=g,ka=H.a.ta(),oa=-1,ra=0;ra<H.i.length;++ra)if(ka.Fa(H.i[ra],O)){oa=ra;break}if(-1!=oa)for(ra=oa;ra<H.i.length&&I.count<I.M;++ra)ka.Fa(H.i[ra],O)&&Xg(H,I,E,ra)}else Yg(p,m,h,g);0!=h.G||p.a.ta().Qb(p.i[0],m)?B=0:B++;p=2==B?null:p.next()}},this);g.length>h.count&&g.splice(h.count,g.length-h.count);return b?Pg(g,b,c,d):g};k.clear=function(){this.a=Zg(this);this.c.clear()};k.Ra=function(a){return $g(this.a,a)};k.min=function(){return ah(this,this.b.min.bind(this.b))};
k.max=function(){return ah(this,this.b.max.bind(this.b))};function bh(a,b,c){if(!a.b.qb(b.i[c]))if(1<b.i[c].length){if(null===b.i[c][0])return null}else return null;return[b.i[c],a.f?[b.b[c]]:b.b[c]]}
function ah(a,b){a:{var c=Wg(a.a);var d=0;do if(d>=c.i.length)c=c.c,d=0;else{var e=bh(a,c,d);if(null!==e){c=e;break a}d++}while(null!==c);c=null}a:{d=ch(a.a);e=d.i.length-1;do if(0>e)d=d.h,e=0;else{var f=bh(a,d,e);if(null!==f){a=f;break a}e--}while(null!==d);a=null}return null===c||null===a?null:1==b(c[0],a[0])?c:a}k.ka=function(){return this.f};k.ta=function(){return this.b};k.ma=function(a,b){return null!=a?0==this.b.Sa(a,b):!1};
k.ia=function(){for(var a=[],b=Wg(this.a);b;)a.push(new Kc(b.O,[b.i,b.b])),b=b.c;return a};function dh(a,b,c,d){a=new Tg(b,a,c);d=eh(d,a);a.a=d;return a}function fh(a,b){this.O=a;this.a=b;this.f=0;this.c=this.h=this.w=null;this.i=[];this.b=[];this.m=[];this.l=1==b.ta().vb()?this.Nb:this.Mb}function Zg(a){return new fh(Lc++,a)}function S(a){return 0==a.f}k=fh.prototype;k.next=function(){return this.c};
function gh(a){function b(g){return null!=g?g.O.toString():"_"}var c=a.O+"["+a.i.join("|")+"]",d=a.m.map(function(g){return g.O}).join("|"),e=a.b.join("/"),f=b(a.h)+"{";f=S(a)?f+e:f+d;f=f+"}"+b(a.w);a.c&&(a=gh(a.c),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}k.toString=function(){var a="",b=gh(this);a+=b[0]+"\n"+b[1]+"\n";this.m.length&&(a+=this.m[0].toString());return a};function Wg(a){return S(a)?a:Wg(a.m[0])}function ch(a){return S(a)?a:ch(a.m[a.m.length-1])}
function hh(a,b){b&&(b.h=a);a&&(a.c=b)}function ih(a){var b=a[0],c=Zg(b.a);c.f=b.f+1;c.m=a;for(b=0;b<a.length;++b)a[b].w=c,0<b&&c.i.push(a[b].i[0]);return c}function jh(a){var b=a,c=[];do c.push(b),b=b.c;while(b);if(512>=c.length)b=ih(c);else{var d=c.length,e=0;b=Zg(a.a);for(b.f=a.f+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),g=ih(f);g.w=b;b.m.length&&(b.i.push(f[0].i[0]),hh(b.m[b.m.length-1],g));b.m.push(g);e+=a;d-=a}}return b}
k.get=function(a){var b=kh(this,a);if(S(this)){var c=Ug;this.a.ma(this.i[b],a)&&(c=c.concat(this.b[b]));return c}b=this.a.ma(this.i[b],a)?b+1:b;return this.m[b].get(a)};function $g(a,b){var c=kh(a,b);return a.a.ma(a.i[c],b)?!0:S(a)?!1:$g(a.m[c],b)}k.remove=function(a,b){lh(this,a,-1,b);return null===this.w?(a=this,1==this.m.length&&(a=this.m[0],a.w=null),a):this};function mh(a){return S(a)?a.i[0]:mh(a.m[0])}function nh(a){a.i=[];for(var b=1;b<a.m.length;++b)a.i.push(mh(a.m[b]))}
function lh(a,b,c,d){var e=kh(a,b),f=S(a);if(!f){var g=a.a.ma(a.i[e],b)?e+1:e;if(lh(a.m[g],b,g,d))nh(a);else return!1}else if(!a.a.ma(a.i[e],b))return!1;if(a.i.length>e&&a.a.ma(a.i[e],b)){if(void 0!==d&&!a.a.ka()&&f&&(g=a.b[e],d=Qg(g,d,void 0),0>d?d=!1:(g.splice(d,1),d=!0),d&&a.a.N().remove(b,1),a.b[e].length))return!1;a.i.splice(e,1);f&&(f=a.a.ka()?1:a.b[e].length,a.b.splice(e,1),a.a.N().remove(b,f))}if(256>a.i.length&&null!==a.w){a:{if(a.c&&256<a.c.i.length)b=a.c,e=d=0,f=a.i.length+1;else if(a.h&&
256<a.h.i.length)b=a.h,d=a.h.i.length-1,e=S(a)?d:d+1,f=0;else{b=!1;break a}a.i.splice(f,0,b.i[d]);b.i.splice(d,1);d=S(a)?a.b:a.m;S(a)?g=b.b:(g=b.m,g[e].w=a);d.splice(f,0,g[e]);g.splice(e,1);S(b)||(nh(b),nh(a));b=!0}b||oh(a,c)}return!0}
function oh(a,b){var c;if(a.c&&511>a.c.i.length){var d=a.c;var e=c=0}else a.h&&(d=a.h,c=d.i.length,e=S(d)?d.b.length:d.m.length);c=[c,0].concat(a.i);Array.prototype.splice.apply(d.i,c);c=null;S(a)?c=a.b:(c=a.m,c.forEach(function(f){f.w=d}));c=[e,0].concat(c);Array.prototype.splice.apply(S(d)?d.b:d.m,c);hh(a.h,a.c);S(d)||nh(d);-1!=b&&(a.w.i.splice(b,1),a.w.m.splice(b,1))}
k.Ea=function(a,b,c){var d=kh(this,a);if(S(this)){if(this.a.ma(this.i[d],a)){if(c)this.a.N().remove(a,this.a.ka()?1:this.b[d].length),this.b[d]=this.a.ka()?b:[b];else{if(this.a.ka())throw new v(201,this.a.g(),JSON.stringify(a));if(!Sg(this.b[d],b))throw new v(109);}this.a.N().add(a,1);return this}this.i.splice(d,0,a);this.b.splice(d,0,this.a.ka()?b:[b]);this.a.N().add(a,1);512==this.i.length?(d=Zg(this.a),a=Zg(this.a),a.f=1,a.i=[this.i[256]],a.m=[this,d],a.w=this.w,this.w=a,d.i=this.i.splice(256),
d.b=this.b.splice(256),d.w=a,hh(d,this.c),hh(this,d),d=a):d=this;return d}d=this.a.ma(this.i[d],a)?d+1:d;a=this.m[d].Ea(a,b,c);S(a)||1!=a.i.length||(this.i.splice(d,0,a.i[0]),a.m[1].w=this,a.m[0].w=this,this.m.splice(d,1,a.m[1]),this.m.splice(d,0,a.m[0]));return 512==this.i.length?ph(this):this};
function ph(a){var b=Zg(a.a),c=Zg(a.a);b.w=a.w;b.f=a.f+1;b.i=[a.i[256]];b.m=[a,c];a.i.splice(256,1);c.w=b;c.f=a.f;c.i=a.i.splice(256);c.m=a.m.splice(257);c.m.forEach(function(d){d.w=c});a.w=b;hh(c,a.c);hh(a,c);return b}function kh(a,b){for(var c=0,d=a.i.length,e=a.a.ta();c<d;){var f=c+d>>1;-1==e.Sa(a.i[f],b)?c=f+1:d=f}return c}k.Nb=function(a){if(!S(this)){var b=kh(this,a);this.a.ma(this.i[b],a)&&b++;return this.m[b].Nb(a)}return this};
k.Mb=function(a){if(!S(this)){var b=kh(this,a);this.a.ma(this.i[b],a)&&(a.some(function(c){return c==G})||b++);return this.m[b].Mb(a)}return this};
function Yg(a,b,c,d){function e(I){return I[0]?I[1]?0:1:-1}var f=a.a.ta(),g=0,h=a.i.length-1,l=a.i,m=e(f.Aa(l[g],b)),p=e(f.Aa(l[h],b));if(1!=m&&(-1!=m||-1!=p)){var B=function(I,E){E=I+E>>1;return E==I?E+1:E},H=function(I,E,ka){if(I>=E)return 0==ka?E:-1;var oa=e(f.Aa(l[I],b));if(0==oa)return I;if(1==oa)return-1;oa=B(I,E);if(oa==E)return 0==ka?E:-1;var ra=e(f.Aa(l[oa],b));return 0==ra?H(I,oa,ra):-1==ra?H(oa+1,E,ka):H(I+1,oa,ra)},O=function(I,E){if(I>=E)return I;var ka=e(f.Aa(l[E],b));if(0==ka)return E;
if(-1==ka)return I;ka=B(I,E);if(ka==E)return I;var oa=e(f.Aa(l[ka],b));return 0==oa?O(ka,E):1==oa?O(I,ka-1):-1};0!=m&&(g=H(g+1,h,p));-1!=g&&(h=O(g,h),-1!=h&&h>=g&&qh(a,c,d,g,h+1))}}function Xg(a,b,c,d){if(a.a.ka())!b.reverse&&b.G?b.G--:c[b.count++]=a.b[d];else for(var e=0;e<a.b[d].length&&b.count<c.length;++e)!b.reverse&&b.G?b.G--:c[b.count++]=a.b[d][e]}function qh(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.M));++d)Xg(a,b,c,d)}
k.fill=function(a,b){if(S(this))for(var c=0;c<this.b.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.a.ka()?1:this.b[c].length,0>a.offset)for(var d=this.b[c].length+a.offset;d<this.b[c].length&&0<a.count;++d)b[a.Bb++]=this.b[c][d],a.count--}else if(this.a.ka())b[a.Bb++]=this.b[c],a.count--;else for(d=0;d<this.b[c].length&&0<a.count;++d)b[a.Bb++]=this.b[c][d],a.count--;else for(c=0;c<this.m.length&&0<a.count;++c)this.m[c].fill(a,b)};
function eh(a,b){var c=b.N();a=a.map(function(e){var f=new fh(e.id(),b);f.i=e.u[0];f.b=e.u[1];f.i.forEach(function(g,h){c.add(g,b.ka()?1:f.b[h].length)});return f});for(var d=0;d<a.length-1;++d)hh(a[d],a[d+1]);return 1<a.length?jh(a[0]):a[0]};function rh(a){this.a=0==a?sh:th;this.b=0==a?function(b){return null!=b?b.reverse():null}:function(b){return b||null};this.c=0==a?uh:vh}function th(a,b){return a>b?1:a<b?-1:0}function sh(a,b){return th(b,a)}function vh(a,b){return Oe(a,b)}function uh(a,b){return Oe(b,a)}k=rh.prototype;k.Aa=function(a,b){b=this.b(b);var c=[b.from==G,b.C==G];if(!c[0]){var d=this.a(a,b.from);c[0]=b.W?1==d:-1!=d}c[1]||(d=this.a(a,b.C),c[1]=b.$?-1==d:1!=d);return c};k.Sa=function(a,b){return this.a(a,b)};
k.min=function(a,b){return a<b?1:a==b?0:-1};k.max=function(a,b){return a>b?1:a==b?0:-1};k.Fa=function(a,b){a=this.Aa(a,b);return a[0]&&a[1]};k.Qb=function(a,b){return this.Fa(a,b)};k.Vb=function(a){return a.filter(function(b){return null!==b}).sort(function(b,c){return this.c(b,c)}.bind(this))};k.tb=function(a){return this.b(a).from==G};k.nb=function(a){a=this.b(a);return[a.from,a.C]};k.qb=function(a){return null!==a};k.vb=function(){return 1};
k.toString=function(){return this.Sa==sh?"SimpleComparator_DESC":"SimpleComparator_ASC"};function wh(a){rh.call(this,a);this.a=0==a?xh:yh}q(wh,rh);function yh(a,b){return null===a?null===b?0:-1:null===b?1:th(a,b)}function xh(a,b){return yh(b,a)}wh.prototype.Fa=function(a,b){return null===a?Je(b):wh.sa.Fa.call(this,a,b)};wh.prototype.min=function(a,b){var c=null===a?null===b?0:-1:null===b?1:null;null===c&&(c=wh.sa.min.call(this,a,b));return c};
wh.prototype.max=function(a,b){var c=null===a?null===b?0:-1:null===b?1:null;null===c&&(c=wh.sa.max.call(this,a,b));return c};function zh(a){this.a=a.map(function(b){return new rh(b)})}function Ah(a,b,c,d){for(var e=0,f=0;f<a.a.length&&0==e;++f)e=d(a.a[f],b[f],c[f]);return e}k=zh.prototype;k.Sa=function(a,b){return Ah(this,a,b,function(c,d,e){return d==G||e==G?0:c.Sa(d,e)})};k.min=function(a,b){return Ah(this,a,b,function(c,d,e){return c.min(d,e)})};k.max=function(a,b){return Ah(this,a,b,function(c,d,e){return c.max(d,e)})};
k.Aa=function(a,b){for(var c=[!0,!0],d=0;d<this.a.length&&(c[0]||c[1]);++d){var e=this.a[d].Aa(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};k.Fa=function(a,b){for(var c=!0,d=0;d<this.a.length&&c;++d)c=this.a[d].Fa(a[d],b[d]);return c};k.Qb=function(a,b){return this.a[0].Fa(a[0],b[0])};
k.Vb=function(a){var b=a.filter(function(d){return d.every(function(e){return null!=e})});a=Array(this.a.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(d){return d[c]});a.forEach(function(d,e){d.sort(function(f,g){return this.a[e].c(f,g)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(d){return d[c]});return b.sort(function(d,e){for(var f=0,g=0;g<this.a.length&&0==f;++g)f=this.a[g].c(d[g],e[g]);return f}.bind(this))};k.tb=function(a){return this.a[0].tb(a[0])};
k.nb=function(a){var b=a.map(function(c,d){return this.a[d].nb(c)[0]},this);a=a.map(function(c,d){return this.a[d].nb(c)[1]},this);return[b,a]};k.qb=function(a){return a.every(function(b,c){return this.a[c].qb(b)},this)};k.vb=function(){return this.a.length};function Bh(a){zh.call(this,a);this.a=a.map(function(b){return new wh(b)})}q(Bh,zh);function Ch(a){if(1==a.a.length)return new rh(a.a[0].order);var b=a.a.map(function(c){return c.order});return a.a.some(function(c){return c.S.Pa()})?new Bh(b):new zh(b)};function Dh(a){this.a=a;this.b=z();this.c=new td;this.f=new td}k=Dh.prototype;k.g=function(){return this.a.g()};k.add=function(a,b){null===a?(this.b.add(b),this.c.add(a,1)):this.a.add(a,b)};k.set=function(a,b){null===a?(this.b.clear(),this.c.clear(),this.add(a,b)):this.a.set(a,b)};k.remove=function(a,b){null===a?b?(this.b.delete(b),this.c.remove(a,1)):(this.b.clear(),this.c.clear()):this.a.remove(a,b)};k.get=function(a){return null===a?A(this.b):this.a.get(a)};k.ib=function(a){return this.a.ib(a)};
k.N=function(){ud(this.f,[this.a.N(),this.c]);return this.f};k.La=function(a,b,c,d){b=this.a.La(a,b,c,d);return null!=a?b:b.concat(A(this.b))};k.clear=function(){this.b.clear();this.a.clear()};k.Ra=function(a){return null===a?0!=this.b.size:this.a.Ra(a)};k.min=function(){return this.a.min()};k.max=function(){return this.a.max()};k.ia=function(){return[new Kc(-2,A(this.b))].concat(this.a.ia())};k.ta=function(){return this.a.ta()};
function Eh(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new v(102);d=b[c].u;b=b.slice(0);b.splice(c,1);a=a(b);var e=new Dh(a);d.forEach(function(f){e.b.add(f)});return e}k.ka=function(){return this.a.ka()};function Fh(a){this.c=a;this.a=z();this.b=new rh(1)}k=Fh.prototype;k.g=function(){return this.c};k.add=function(a){if("number"!=typeof a)throw new v(103);this.a.add(a)};k.set=function(a,b){this.add(a,b)};k.remove=function(a){this.a.delete(a)};k.get=function(a){return this.Ra(a)?[a]:[]};k.min=function(){return Gh(this,this.b.min.bind(this.b))};k.max=function(){return Gh(this,this.b.max.bind(this.b))};
function Gh(a,b){if(0==a.a.size)return null;a=A(a.a).reduce(function(c,d){return null===c||1==b(d,c)?d:c},null);return[a,[a]]}k.ib=function(){return this.a.size};k.La=function(a,b,c,d){var e=a||[Me()];a=A(this.a).filter(function(f){return e.some(function(g){return this.b.Fa(f,g)},this)},this);return Pg(a,b,c,d)};k.clear=function(){this.a.clear()};k.Ra=function(a){return this.a.has(a)};k.ia=function(){return[new Kc(0,A(this.a))]};k.ta=function(){return this.b};
function Hh(a,b){var c=new Fh(a);b[0].u.forEach(function(d){c.add(d,d)});return c}k.ka=function(){return!0};k.N=function(){var a=new td;a.a=this.a.size;return a};function Ih(a){this.b=a.j(Id);this.a=a.j(Kd);this.c=a.j(Jd)}Ih.prototype.U=function(a){var b=a.X(),c=function(){if(0==b.length)return u();var d=b.shift();return(d.Ha()?Jh(this,d):Kh(this,d)).then(c)}.bind(this);return c()};function Kh(a,b){var c=a.b.Ja(0,[b]);a=c.a(b.g(),b.ua.bind(b),0).get([]).then(function(d){Ng(this.c,b.g(),d);Lh(this,b,d)}.bind(a));c.V();return a}function Lh(a,b,c){var d=a.a.a.get(b.g())||[];c.forEach(function(e){d.forEach(function(f){var g=e.wa(f.g());f.add(g,e.id())})})}
function Jh(a,b){var c=a.b.Ja(0,[b]),d=c.a(b.g(),b.ua,0).get([]).then(function(e){Ng(this.c,b.g(),e)}.bind(a));a=b.ga().map(function(e){return Mh(this,e,c)},a).concat(Nh(a,b,c));c.V();return Pb(a.concat(d))}function Mh(a,b,c){c=c.a(b.o(),Mc,1);var d=Ch(b);return c.get([]).then(function(e){if(0<e.length)if(kd(b)){var f=dh.bind(void 0,d,b.o(),b.$a);e=Eh(f,e);this.a.set(b.b,e)}else e=dh(d,b.o(),b.$a,e),this.a.set(b.b,e)}.bind(a))}
function Nh(a,b,c){return c.a(md(b),Mc,1).get([]).then(function(d){0<d.length&&(d=Hh(md(b),d),this.a.set(b.g(),d))}.bind(a))};function Oh(){this.a=x()}var Ph;function Qh(){Ph||(Ph=new Oh);return Ph}Oh.prototype.clear=function(){this.a.clear()};Oh.prototype.clear=Oh.prototype.clear;Oh.prototype.ya=function(a,b){this.a.set(a.toString(),b);return b};Oh.prototype.registerService=Oh.prototype.ya;Oh.prototype.j=function(a){var b=this.a.get(a.toString())||null;if(null===b)throw new v(7,a.toString());return b};Oh.prototype.getService=Oh.prototype.j;Oh.prototype.mb=function(a){return this.a.has(a.toString())};
Oh.prototype.isRegistered=Oh.prototype.mb;function Rh(){var a=Qh();return Vc(a.a)};function Sh(a,b,c,d){return null==a?Th():null==b?Uh(a):Vh(a,b,c,d)}function Wh(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function Xh(a){var b=Qh();a=new Hd("ns_"+a);return b.mb(a)?b.j(a):null}function Th(){var a={};Rh().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=Xh(b).j(Od).version())});return Wh(a)}function Uh(a){a=Xh(a);var b={};if(null!=a){var c=a.j(Kd);a.j(Od).X().forEach(function(d){b[d.g()]=c.get(md(d)).N().a})}return Wh(b)}
function Vh(a,b,c,d){var e=Xh(a);a=[];if(null!=e){var f=null;try{f=e.j(Od).table(b)}catch(g){}null!=f&&(b=e.j(Kd),e=e.j(Jd),c=b.get(md(f)).La(void 0,!1,c,d),c.length&&(a=Og(e,c).map(function(g){return g.u})))}return Wh(a)};function Yh(){this.b=x();this.a=x()}Yh.prototype.U=function(a){a.X().forEach(function(b){var c=[];this.a.set(b.g(),c);var d=md(b);if(null===this.get(d)){var e=new Fh(d);c.push(e);this.b.set(d,e)}b.ga().forEach(function(f){var g=Ch(f);g=new Tg(f.o(),g,f.$a);g=kd(f)&&1==f.a.length?new Dh(g):g;c.push(g);this.b.set(f.o(),g)},this)},this);return u()};Yh.prototype.get=function(a){return this.b.get(a)||null};
Yh.prototype.set=function(a,b){var c=this.a.get(a)||null;null===c&&(c=[],this.a.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].g()==b.g()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.b.set(b.g(),b)};Yh.prototype.clear=function(){this.b.clear();this.a.clear()};function Zh(){};function $h(a,b){this.a=a;this.b=b}$h.prototype.oa=function(){return this.a};function ai(){J.call(this)}q(ai,J);function bi(a,b){J.call(this);this.table=a;this.values=b}q(bi,ai);function ci(a,b){bi.call(this,a,b)}q(ci,bi);function di(a){J.call(this);this.table=a}q(di,ai);di.prototype.toString=function(){return"delete("+this.table.g()+")"};function ei(a){J.call(this);this.table=a}q(ei,ai);ei.prototype.toString=function(){return"update("+this.table.g()+")"};function fi(a){J.call(this);this.I=a}
q(fi,ai);fi.prototype.toString=function(){return"select("+this.I.toString()+")"};function gi(a){J.call(this);this.table=a}q(gi,ai);gi.prototype.toString=function(){var a="table_access("+this.table.g();null!==this.table.la&&(a+=" as "+this.table.la);return a+")"};function hi(){J.call(this)}q(hi,ai);hi.prototype.toString=function(){return"cross_product"};function ii(a,b){J.call(this);this.b=a;this.a=b}q(ii,ai);
ii.prototype.toString=function(){var a="project("+this.b.toString();if(null!==this.a){var b=this.a.map(function(c){return c.o()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function ji(a){J.call(this);this.H=a}q(ji,ai);ji.prototype.toString=function(){return"order_by("+zf(this.H)+")"};function ki(a){J.call(this);this.a=a}q(ki,ai);ki.prototype.toString=function(){return"aggregation("+this.a.toString()+")"};function li(a){J.call(this);this.a=a}q(li,ai);
li.prototype.toString=function(){return"group_by("+this.a.toString()+")"};function mi(a){J.call(this);this.M=a}q(mi,ai);mi.prototype.toString=function(){return"limit("+this.M+")"};function ni(a){J.call(this);this.G=a}q(ni,ai);ni.prototype.toString=function(){return"skip("+this.G+")"};function oi(a,b){J.call(this);this.I=a;this.a=b}q(oi,ai);oi.prototype.toString=function(){return"join(type: "+(this.a?"outer":"inner")+", "+this.I.toString()+")"};function pi(a,b){var c=[],d=null,e=null;Ye(a,function(f){var g=b(f);null==f.getParent()?e=g:L(d,g);var h=f.getParent();null!==h&&K(h).length==K(d).length&&(h=c.indexOf(d),-1!=h&&c.splice(h,1));1<K(f).length&&c.push(g);d=null===f.m?c[c.length-1]:g});return e}function qi(a){return ri(a,function(b){return null===b.m})}
function si(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(e,f){a.removeChild(e);null!==b&&Ve(b,e,c+f)});return{parent:b,children:d}}function ti(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function ui(a){var b=Ue(a,0);si(a);ti(b,a);return b}
function vi(a,b,c){var d=Ue(a,0),e=K(d).slice();if(!e.some(function(f){return b(f)}))return a;si(a);e.forEach(function(f,g){if(b(f)){var h=c(a);We(d,g);L(h,f);Ve(d,h,g)}});return d}function wi(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),We(e,a),Ve(e,c,a));K(b).slice().forEach(function(f){b.removeChild(f);L(d,f)});return c}function ri(a,b,c){function d(f){b(f)&&e.push(f);null!=c&&c(f)||K(f).forEach(d)}var e=[];d(a);return e}
function xi(a,b){var c=b||function(e){return e.toString()+"\n"},d="";Ye(a,function(e){for(var f=0;f<Te(e);f++)d+="-";d+=c(e)});return d};function yi(){}q(yi,Zh);yi.prototype.b=function(a){this.a=a;zi(this,this.a);return this.a};function zi(a,b){if(b instanceof fi){var c=Ai(a,b.I);c=Bi(a,c);wi(b,b,c[0],c[1]);b==a.a&&(a.a=c[0]);b=c[0]}K(b).forEach(function(d){zi(this,d)},a)}function Ai(a,b){if(0==K(b).length||"and"!=b.a)return[b];a=K(b).slice().map(function(c){b.removeChild(c);return Ai(this,c)},a);return Ma(a)}function Bi(a,b){var c=null,d=null;b.map(function(e,f){e=new fi(e);0==f?c=e:L(d,e);d=e},a);return[c,d]};function Ci(){}q(Ci,Zh);Ci.prototype.b=function(a,b){if(3>b.from.length)return a;this.a=a;Di(this,this.a);return this.a};function Di(a,b){if(b instanceof hi)for(;2<K(b).length;){for(var c=new hi,d=0;2>d;d++){var e=We(b,0);L(c,e)}Ve(b,c,0)}K(b).forEach(function(f){Di(this,f)},a)};function Ei(a){this.a=a;this.f=null}Ei.prototype.c=function(){null===this.f&&(this.f=this.b());return this.f};function Fi(a){Ei.call(this,a)}q(Fi,Ei);Fi.prototype.b=function(){return this.a.a?new ci(this.a.ja,this.a.values):new bi(this.a.ja,this.a.values)};function Gi(a){Ei.call(this,a)}q(Gi,Ei);Gi.prototype.b=function(){var a=new ei(this.a.table),b=null!=this.a.B?new fi(this.a.B.Oa()):null,c=new gi(this.a.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function Hi(a,b,c){this.a=a;this.b=b;this.f=c}Hi.prototype.c=function(){this.f.forEach(function(a){this.a=a.b(this.a,this.b)},this);return this.a};function Ii(a,b){Ei.call(this,a);this.h=b}q(Ii,Ei);Ii.prototype.b=function(){var a=new di(this.a.from),b=null!=this.a.B?new fi(this.a.B.Oa()):null,c=new gi(this.a.from);null===b?L(a,c):(L(b,c),L(a,b));return(new Hi(a,this.a,this.h)).c()};function Ji(a,b,c){Ze.call(this);this.a=a;this.b=b;this.c=c;this.h=null;a=Fe();this.f=Ge(a,this.a.D(),this.c);this.l=a.b.get(this.a.D())||null}q(Ji,Ze);k=Ji.prototype;k.Oa=function(){var a=new Ji(this.a,this.b,this.c),b=this.K();a.O=b;return a};k.va=function(a){return null!=a?(a.push(this.a),a.push(this.b),a):[this.a,this.b]};k.A=function(a){a=null!=a?a:z();a.add(this.a.Y());a.add(this.b.Y());return a};
k.reverse=function(){var a=this.c;switch(this.c){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Ji(this.b,this.a,a)};k.eval=function(a){var b=a.entries.filter(function(c){var d=N(c,this.a);c=N(c,this.b);return this.f(d,c)},this);return new M(b,a.A())};k.toString=function(){return"join_pred("+this.a.o()+" "+this.c+" "+this.b.o()+")"};
function Ki(a,b,c){if(-1!=b.A().indexOf(ld(a.a.Y()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.a;a.a=a.b;a.b=c;switch(a.c){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.c=c;a.f=Ge(Fe(),a.a.D(),a.c)}return[b,d]}return[d,b]}function Li(a){var b={};a.va().forEach(function(c){b[c.g()]=null});return b}
function Mi(a,b,c){null===a.h&&(a.h=Li(a.b.Y()));var d=new jf(new Kc(-1,a.h),!1);return nf(b,c,d,[ld(a.b.Y())])}
function Ni(a,b,c,d){var e=[b,c];d||(e=Ki(a,b,c));b=e[0];c=e[1];e=b;var f=c,g=a.a,h=a.b;d&&(e=c,f=b,g=a.b,h=a.a);var l=new Zc,m=[];e.entries.forEach(function(H){var O=String(N(H,g));l.set(O,H)});var p=e.A(),B=f.A();f.entries.forEach(function(H){var O=N(H,h),I=String(O);null!==O&&l.has(I)?l.get(I).forEach(function(E){E=nf(H,B,E,p);m.push(E)}):d&&m.push(Mi(this,H,B))}.bind(a));a=b.A().concat(c.A());return new M(m,a)}
function Oi(a,b,c,d,e){function f(H,O){O=new jf(O,1<p.length);H=nf(H,B,O,p);m.push(H)}var g=d.tc.Y(),h=b,l=c;-1!=b.A().indexOf(ld(g))&&(h=c,l=b);var m=[],p=l.A(),B=h.A();h.entries.forEach(function(H){var O=this.l(N(H,d.Dc));O=d.index.get(O);0!=O.length&&(d.index.ka()?f(H,e.get(O[0])):Og(e,O).forEach(f.bind(null,H)))},a);a=h.A().concat(l.A());return new M(m,a)};function Pi(){}q(Pi,Zh);Pi.prototype.b=function(a,b){if(2>b.from.length)return a;this.a=a;Qi(this,this.a,b);return this.a};function Qi(a,b,c){if(b instanceof fi&&b.I instanceof Ji){var d=b.I.K(),e=Ue(b,0);e instanceof hi&&(d=null!=c.b&&c.b.has(d),d=new oi(b.I,d),wi(b,e,d,d),b==a.a&&(a.a=d),b=d)}K(b).forEach(function(f){Qi(this,f,c)},a)};function Ri(){this.c=z()}q(Ri,Zh);Ri.prototype.b=function(a,b){if(void 0===b.B)return a;this.c.clear();this.a=a;Si(this,this.a,b);this.c.clear();return this.a};function Si(a,b,c){var d=function(f){K(f).forEach(e)}.bind(a),e=function(f){if(!this.c.has(f))if(f instanceof fi){var g=f.I.A(),h=function(l){return Ti(this,l,g)}.bind(this);h=Ui(this,c,f,h);this.c.add(f);h!=f&&(null===h.getParent()&&(this.a=h),e(h));d(f)}else d(f)}.bind(a);e(b)}
function Ui(a,b,c,d){var e=c;if(Vi(b,c))e=ui(c),Ui(a,b,c,d);else if(Wi(c)){var f=[];e=vi(c,d,function(g){g=new fi(g.I);f.push(g);return g});f.forEach(function(g){Ui(this,b,g,d)},a)}return e}function Ti(a,b,c){var d=z();qi(b).forEach(function(e){d.add(e.table)},a);b instanceof gi&&d.add(b.table);return Yc(d,c)}function Wi(a){a=Ue(a,0);return a instanceof hi||a instanceof oi}
function Vi(a,b){var c=Ue(b,0);if(!(c instanceof fi))return!1;if(null==a.b)return!0;b=b.I instanceof Ji;a=a.b.has(c.I.K());return b||!a};function Xi(a,b){Ei.call(this,a);this.Qc=b;this.ra=this.L=this.Ub=this.ha=this.h=this.s=this.Sb=this.l=this.Xb=null}q(Xi,Ei);
Xi.prototype.b=function(){Yi(this);2<=this.a.from.length&&(this.l=new hi);this.Sb=null!=this.a.B?new fi(this.a.B.Oa()):null;this.a.H&&(this.ha=new ji(this.a.H));if(null!=this.a.G&&0<this.a.G||null!=this.a.c)this.Ub=new ni(this.a.G);null!=this.a.M&&(this.L=new mi(this.a.M));null!=this.a.aa&&(this.s=new li(this.a.aa));Zi(this);this.ra=new ii(this.a.a||[],this.a.aa||null);var a=$i(this);return(new Hi(a,this.a,this.Qc)).c()};
function $i(a){for(var b=[a.L,a.Ub,a.ra,a.ha,a.h,a.s,a.Sb,a.l],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.Xb.forEach(function(g){L(b[c],g)});return d}function Yi(a){a.Xb=a.a.from.map(function(b){return new gi(b)},a)}function Zi(a){var b=a.a.a.filter(function(c){return c instanceof D});null!=a.a.H&&a.a.H.forEach(function(c){c.F instanceof D&&b.push(c.F)});0<b.length&&(a.h=new ki(b))};function aj(a){tf.call(this,a)}q(aj,tf);aj.prototype.l=function(){var a=z();a.add(this.from);bj(this,this.from.g(),a);return a};function bj(a,b,c){var d=gd(he(a.S),b,1);gd(he(a.S),b).forEach(c.add.bind(c));d.forEach(function(e){bj(this,e.g(),c)},a)}aj.prototype.clone=function(){var a=new aj(this.S);wf(a,this);a.from=this.from;return a};aj.prototype.bind=function(a){aj.sa.bind.call(this,a);xf(this,a);return this};function cj(a){tf.call(this,a)}q(cj,tf);cj.prototype.l=function(){var a=z();a.add(this.ja);var b=he(this.S);ed(this.ja.g(),b.s).forEach(a.add.bind(a));this.a&&gd(b,this.ja.g()).forEach(a.add.bind(a));return a};cj.prototype.clone=function(){var a=new cj(this.S);wf(a,this);a.ja=this.ja;this.values&&(a.values=this.values instanceof we?this.values:this.values.slice());a.a=this.a;a.b=this.b;return a};
cj.prototype.bind=function(a){cj.sa.bind.call(this,a);this.b&&(this.b instanceof we?this.values=a[this.b.a]:this.values=this.b.map(function(b){return b instanceof we?a[b.a]:b}));return this};function dj(a){tf.call(this,a)}q(dj,tf);dj.prototype.l=function(){var a=z();a.add(this.table);var b=this.set.map(function(d){return d.F.o()}),c=he(this.S);fd(c,b).forEach(a.add.bind(a));hd(c,b).forEach(a.add.bind(a));return a};dj.prototype.clone=function(){var a=new dj(this.S);wf(a,this);a.table=this.table;a.set=this.set?ej(this.set):this.set;return a};dj.prototype.bind=function(a){dj.sa.bind.call(this,a);this.set.forEach(function(b){-1!=b.hb&&(b.value=a[b.hb])});xf(this,a);return this};
function ej(a){return a.map(function(b){var c={},d;for(d in b)c[d]=b[d];return c})};function fj(){this.b=[new yi,new Ci,new Ri,new Pi];this.a=[new yi]}fj.prototype.create=function(a){if(a instanceof cj)var b=new Fi(a);else if(a instanceof aj)b=new Ii(a,this.a);else if(a instanceof yf)b=new Xi(a,this.b);else if(a instanceof dj)b=new Gi(a);else throw new v(513);b=b.c();return new $h(b,a.l())};n("lf.fn.avg",function(a){return new D(a,"AVG")});function gj(a){return new D(a||new od,"COUNT")}n("lf.fn.count",gj);function hj(a){return new D(a,"DISTINCT")}n("lf.fn.distinct",hj);n("lf.fn.max",function(a){return new D(a,"MAX")});n("lf.fn.min",function(a){return new D(a,"MIN")});n("lf.fn.stddev",function(a){return new D(a,"STDDEV")});n("lf.fn.sum",function(a){return new D(a,"SUM")});n("lf.fn.geomean",function(a){return new D(a,"GEOMEAN")});function T(a,b){J.call(this);this.l=b}q(T,J);T.prototype.exec=function(a,b){switch(this.l){case 1:return ij(this,a,b);case 0:return jj(this,a,b);default:return kj(this,a,b)}};T.prototype.toString=function(){return"dummy_node"};T.prototype.gb=function(){return this.toString()};function kj(a,b,c){return new t(function(d){d(this.a([],b,c))}.bind(a))}function ij(a,b,c){return Ue(a,0).exec(b,c).then(function(d){return this.a(d,b,c)}.bind(a))}
function jj(a,b,c){var d=K(a).map(function(e){return e.exec(b,c)});return Pb(d).then(function(e){var f=[];e.forEach(function(g){for(var h=0;h<g.length;++h)f.push(g[h])});return this.a(f,b,c)}.bind(a))};function lj(a){T.call(this,-1,1);this.b=a}q(lj,T);lj.prototype.toString=function(){return"aggregation("+this.b.map(function(a){return a.o()}).toString()+")"};lj.prototype.a=function(a){a.forEach(function(b){mj(new nj(b,this.b))},this);return a};function nj(a,b){this.a=a;this.b=b}
function mj(a){a.b.forEach(function(b){b=nd(b).reverse();for(var c=1;c<b.length;c++){var d=b[c],e=nd(d).slice(-1)[0],f=d.a instanceof D?cf(this.a,d.a):this.a;if(null!==f.a&&f.a.has(d.o()))break;f=oj(d.b,f,e);e=this.a;null===e.a&&(e.a=x());e.a.set(d.o(),f)}},a)}
function oj(a,b,c){var d=null;switch(a){case "MIN":d=pj(b,c,function(e,f){return f<e?f:e});break;case "MAX":d=pj(b,c,function(e,f){return f>e?f:e});break;case "DISTINCT":d=qj(b,c);break;case "COUNT":d=rj(b,c);break;case "SUM":d=sj(b,c);break;case "AVG":a=rj(b,c);0<a&&(d=sj(b,c)/a);break;case "GEOMEAN":d=tj(b,c);break;default:d=uj(b,c)}return d}function pj(a,b,c){return a.entries.reduce(function(d,e){e=N(e,b);return null===e?d:null===d?e:c(d,e)},null)}
function rj(a,b){return b instanceof od?a.entries.length:a.entries.reduce(function(c,d){return c+(null===N(d,b)?0:1)},0)}function sj(a,b){return pj(a,b,function(c,d){return d+c})}function uj(a,b){var c=[];a.entries.forEach(function(d){d=N(d,b);null!==d&&c.push(d)});return 0==c.length?null:yb.apply(null,c)}function tj(a,b){var c=0;a=a.entries.reduce(function(d,e){e=N(e,b);return 0!=e&&null!==e?(c++,d+Math.log(e)):d},0);return 0==c?null:Math.pow(Math.E,a/c)}
function qj(a,b){var c=x();a.entries.forEach(function(d){var e=N(d,b);c.set(e,d)});return new M(y(c),a.A())};function vj(){T.call(this,2,0)}q(vj,T);vj.prototype.toString=function(){return"cross_product"};vj.prototype.a=function(a){var b=a[0],c=a[1];a=[];for(var d=b.A(),e=c.A(),f=0;f<b.entries.length;f++)for(var g=0;g<c.entries.length;g++){var h=nf(b.entries[f],d,c.entries[g],e);a.push(h)}b=b.A().concat(c.A());return[new M(a,b)]};function wj(a){T.call(this,1,1);this.b=a}q(wj,T);wj.prototype.toString=function(){return"delete("+this.b.g()+")"};wj.prototype.a=function(a,b){a=a[0].entries.map(function(c){return c.ba});b.remove(this.b,a);return[ef()]};function xj(a,b){T.call(this,0,-1);this.table=b;this.b=a.j(Kd)}q(xj,T);xj.prototype.toString=function(){return"get_row_count("+this.table.g()+")"};xj.prototype.a=function(){var a=this.b.get(md(this.table)),b=new M([],[this.table.g()]),c=gj();a=a.N().a;null===b.a&&(b.a=x());b.a.set(c.o(),a);return[b]};function yj(a,b){T.call(this,0,-1);this.b=a.j(Jd);this.c=a.j(Kd);this.table=b}q(yj,T);yj.prototype.toString=function(){var a="table_access("+this.table.g();null!==this.table.la&&(a+=" as "+this.table.la);return a+")"};yj.prototype.a=function(){var a=this.c.get(md(this.table)).La();return[hf(Og(this.b,a),[ld(this.table)])]};function zj(a){this.c=a}q(zj,Zh);zj.prototype.b=function(a,b){this.a=a;if(!Aj(b))return a;a=ri(a,function(c){return c instanceof yj})[0];b=new xj(this.c,a.table);wi(a,a,b,b);return this.a};function Aj(a){return 1==a.a.length&&1==a.from.length&&null==a.B&&null==a.M&&null==a.G&&null==a.aa?(a=a.a[0],a instanceof D&&"COUNT"==a.b&&a.a instanceof od):!1};function Bj(a){T.call(this,1,1);this.b=a}q(Bj,T);Bj.prototype.toString=function(){return"groupBy("+this.b.map(function(a){return a.o()}).toString()+")"};Bj.prototype.a=function(a){return Cj(this,a[0])};function Cj(a,b){var c=new Zc,d=function(e){return this.b.map(function(f){return N(e,f)},this).join(",")}.bind(a);b.entries.forEach(function(e){c.set(d(e),e)},a);return c.keys().map(function(e){return new M(c.get(e),b.A())},a)};function Dj(a,b,c){T.call(this,2,0);this.s=a.j(Kd);this.h=a.j(Jd);this.I=b;this.b=c;this.c="eq"==this.I.c?Ej:Fj;this.f=null}q(Dj,T);var Ej=0,Fj=2,Gj=["hash","index_nested_loop","nested_loop"];Dj.prototype.toString=function(){return"join(type: "+(this.b?"outer":"inner")+", impl: "+Gj[this.c]+", "+this.I.toString()+")"};
Dj.prototype.a=function(a){switch(this.c){case Ej:return[Ni(this.I,a[0],a[1],this.b)];case 1:return[Oi(this.I,a[0],a[1],this.f,this.h)];default:var b=this.I,c=a[0];a=a[1];var d=this.b,e=[c,a];d||(e=Ki(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.A(),g=a.A(),h=c.entries.length,l=a.entries.length,m=l+256-1>>8,p=0;p<m;){for(var B=0;B<h;B++){var H=!1,O=N(c.entries[B],b.a);if(null!==O)for(var I=Math.min(p+1<<8,l),E=p<<8;E<I;E++)if(b.f(O,N(a.entries[E],b.b))){H=!0;var ka=nf(c.entries[B],f,a.entries[E],g);e.push(ka)}d&&
!H&&e.push(Mi(b,c.entries[B],f))}p++}b=c.A().concat(a.A());return[new M(e,b)]}};function Hj(a,b){a.c=1;var c=a.s.get(b.bb().o());a.f={tc:b,Dc:b==a.I.a?a.I.b:a.I.a,index:c}};function Ij(a){T.call(this,-1,-1);this.b=a}q(Ij,T);Ij.prototype.toString=function(){return"no_op_step("+this.b[0].A().join(",")+")"};Ij.prototype.a=function(){return this.b};function Jj(){}q(Jj,Zh);Jj.prototype.b=function(a,b){this.a=a;if(!(1<b.from.length))return a;ri(a,function(c){return c instanceof Dj}).forEach(this.c,this);return this.a};Jj.prototype.c=function(a){if("eq"==a.I.c&&!a.b){var b=function(e){if(!(e instanceof yj))return null;e=ld(e.table)==ld(a.I.b.Y())?a.I.b:a.I.a;return null===e.bb()?null:e},c=b(Ue(a,0));b=b(Ue(a,1));if(null!==c||null!==b){b=null!==b?b:c;Hj(a,b);var d=new M([],[ld(b.Y())]);Xe(a,new Ij([d]),b==c?0:1)}}};function Kj(a){Ze.call(this);this.a=a;this.b=!1}q(Kj,Ze);k=Kj.prototype;k.Oa=function(){return pi(this,function(a){if(a instanceof Kj){var b=new Kj(a.a);b.b=a.b;a=a.K();b.O=a;return b}return a.Oa()})};k.va=function(a){var b=a||[];Ye(this,function(c){c!=this&&c.va(b)}.bind(this));a=z(b);return A(a)};k.A=function(a){var b=null!=a?a:z();Ye(this,function(c){c!=this&&c.A(b)}.bind(this));return b};k.ob=function(a){this.b!=a&&(this.b=a,this.a="and"==this.a?"or":"and",K(this).forEach(function(b){return b.ob(a)}))};
k.eval=function(a){var b=K(this).map(function(c){return c.eval(a)});return Lj(this,b)};function Lj(a,b){return"and"==a.a?ff(b):gf(b)}k.toString=function(){return"combined_pred_"+this.a.toString()};k.Eb=function(){if("or"==this.a){var a=new Qe;K(this).forEach(function(b){b=b.Eb().ca();a.add(b)});return a}return new Qe};function Mj(a){var b=null;return K(a).every(function(c){if(!(c instanceof of&&rf(c)))return!1;null===b&&(b=c.F);return b.o()==c.F.o()})};function Nj(a){a=a.map(function(c){return c.ca()});a=Db.apply(null,a);var b=[];Cb(a,function(c){b.push(c)});return b}function Oj(a){this.b=a}Oj.prototype.a=function(){return 1==this.b.a.length?[Me()]:[this.b.a.map(function(){return Me()})]};function Pj(a,b){this.b=a;this.h=b;this.c=this.f=null}function Qj(a,b){var c=x();a.h.keys().forEach(function(d){var e=this.h.get(d).map(function(g){return uf(b,g)},this),f=new Qe([Me()]);e.forEach(function(g){f=Re(f,g.Eb())});c.set(d,f)},a);return c}
Pj.prototype.a=function(a){if(this.f==a)return this.c;for(var b=Qj(this,a),c=this.b.a.length-1;0<=c;c--){var d=this.b.a[c];if(null!==(b.get(d.S.g())||null))break;b.set(d.S.g(),new Qe([Me()]))}this.c=1==this.b.a.length?y(b)[0].ca():Nj(Rj(this,b));this.f=a;return this.c};function Rj(a,b){var c=x(),d=0;a.b.a.forEach(function(e){c.set(e.S.g(),d);d++});return Vc(b).sort(function(e,f){return c.get(e)-c.get(f)}).map(function(e){return b.get(e)})};function Sj(a,b){this.a=b;this.b=a.j(Kd)}function Tj(a){a=a.b.get(md(a.a));return Math.floor(.02*a.N().a)}function Uj(a,b,c){c=c.filter(a.c,a);if(0==c.length)return null;a=Vj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(e,f){var g=Wj(f,b);return g<d?(d=g,f):e},null)}
function Vj(a,b){return a.a.ga().map(function(c){c=new Xj(this.b,c);Yj(c,b);return c},a).filter(function(c){if(null===c.Ma)c=!1;else{for(var d=!1,e=!0,f=0;f<c.pa.a.length;f++){var g=c.Ma.has(c.pa.a[f].S.g());if(d&&g){e=!1;break}g||(d=!0)}c=e}return c})}Sj.prototype.c=function(a){if(a instanceof of)a=!rf(a)||a.F.Y()!=this.a||"in"==a.a&&a.value.length>Tj(this)?!1:!0;else{var b;a instanceof Kj?b="or"==a.a&&Mj(a)&&Ue(a,0).F.Y()==this.a?K(a).length<=Tj(this):!1:b=!1;a=b}return a};
function Xj(a,b){this.c=a;this.pa=b;this.b=z(this.pa.a.map(function(c){return c.S.g()}));this.a=this.Ma=null}function Zj(a){null===a.a&&(a.a=new Pj(a.pa,a.Ma));return a.a}function Yj(a,b){b.forEach(function(c){var d=c.va()[0].g();this.b.has(d)&&(null===this.Ma&&(this.Ma=new Zc),this.Ma.set(d,c.K()))},a)}function Wj(a,b){b=Zj(a).a(b);var c=a.c.get(a.pa.o());return b.reduce(function(d,e){return d+c.ib(e)},0)};function ak(a,b,c,d){T.call(this,0,-1);this.s=a.j(Kd);this.index=b;this.h=c;this.f=d;this.c=this.b=!1}q(ak,T);ak.prototype.toString=function(){return"index_range_scan("+this.index.o()+", ?, "+(this.f?"reverse":"natural")+(this.b?", limit:?":"")+(this.c?", skip:?":"")+")"};ak.prototype.gb=function(a){var b=this.toString(),c=this.h.a(a);b=b.replace("?",c.toString());this.b&&(b=b.replace("?",a.M.toString()));this.c&&(b=b.replace("?",a.G.toString()));return b};
ak.prototype.a=function(a,b,c){a=this.h.a(c);b=this.s.get(this.index.o());c=(1==a.length&&a[0]instanceof He&&Ne(a[0])?Pg(b.get(a[0].from),!1,this.b?c.M:void 0,this.c?c.G:void 0):b.La(a,this.f,this.b?c.M:void 0,this.c?c.G:void 0)).map(function(d){return new Kc(d,{})},this);return[hf(c,[this.index.b])]};function bk(){T.call(this,-1,0)}q(bk,T);bk.prototype.toString=function(){return"multi_index_range_scan()"};
bk.prototype.a=function(a){var b=x();a.forEach(function(d){d.entries.forEach(function(e){b.set(e.ba.id(),e)})});var c=y(b);return[new M(c,a[0].A())]};function ck(a){T.call(this,1,1);this.b=a}q(ck,T);ck.prototype.toString=function(){return"select(?)"};ck.prototype.gb=function(a){a=uf(a,this.b);return this.toString().replace("?",a.toString())};ck.prototype.a=function(a,b,c){return[uf(c,this.b).eval(a[0])]};function dk(a,b){T.call(this,1,1);this.c=a.j(Jd);this.b=b}q(dk,T);dk.prototype.toString=function(){return"table_access_by_row_id("+this.b.g()+")"};dk.prototype.a=function(a){return[hf(Og(this.c,bf(a[0])),[ld(this.b)])]};function ek(a){this.c=a}q(ek,Zh);ek.prototype.b=function(a,b){this.a=a;ri(a,function(c){return c instanceof yj}).forEach(function(c){var d=fk(c);if(0!=d.length){var e=Uj(new Sj(this.c,c.table),b,d.map(function(g){return uf(b,g.b)}));if(null!==e){var f=x();d.forEach(function(g){f.set(g.b,g)},this);this.a=gk(this,e,f,c)}}},this);return this.a};function fk(a){var b=[];for(a=a.getParent();a;){if(a instanceof ck)b.push(a);else if(a instanceof Dj)break;a=a.getParent()}return b}
function gk(a,b,c,d){(null!==b.Ma?b.Ma.values():[]).map(function(e){return c.get(e)}).forEach(si);b=new ak(a.c,b.pa,Zj(b),!1);a=new dk(a.c,d.table);L(a,b);wi(d,d,a,b);return b.oa()};function hk(a,b){T.call(this,0,-1);this.c=a.j(Kd);this.b=b}q(hk,T);hk.prototype.toString=function(){return"insert("+this.b.g()+")"};hk.prototype.a=function(a,b,c){ik(this.b,c.values,this.c);b.Ea(this.b,c.values);return[hf(c.values,[this.b.g()])]};function ik(a,b,c){a=a.a.a;if(null===a?0:a.a[0].autoIncrement){var d=a.a[0].S.g();c=c.get(a.o()).N().b;var e=null===c?0:c;b.forEach(function(f){if(0==f.u[d]||null==f.u[d])e++,f.u[d]=e})}}function jk(a,b){T.call(this,0,-1);this.c=a.j(Kd);this.b=b}q(jk,T);
jk.prototype.toString=function(){return"insert_replace("+this.b.g()+")"};jk.prototype.a=function(a,b,c){ik(this.b,c.values,this.c);b.sb(this.b,c.values);return[hf(c.values,[this.b.g()])]};function kk(){T.call(this,1,1)}q(kk,T);kk.prototype.toString=function(){return"limit(?)"};kk.prototype.gb=function(a){return this.toString().replace("?",a.M.toString())};kk.prototype.a=function(a,b,c){a[0].entries.splice(c.M);return a};function lk(a){T.call(this,-1,1);this.H=a}q(lk,T);lk.prototype.toString=function(){return"order_by("+zf(this.H)+")"};lk.prototype.a=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.H.length;d++){var e=hj(this.H[d].F);if(null!==b.a&&b.a.has(e.o())){c=e;break}}b=c;(null===b?a[0]:cf(a[0],b)).entries.sort(this.b.bind(this))}else a.sort(this.c.bind(this));return a};
function mk(a,b,c){var d=-1;do{d++;var e=a.H[d].F;var f=a.H[d].order;var g=b(e);e=c(e)}while(g==e&&d+1<a.H.length);a=g<e?-1:g>e?1:0;return 1==f?a:-a}lk.prototype.c=function(a,b){return mk(this,function(c){return c instanceof D?cf(a,c):N(a.entries[a.entries.length-1],c)},function(c){return c instanceof D?cf(b,c):N(b.entries[b.entries.length-1],c)})};lk.prototype.b=function(a,b){return mk(this,function(c){return N(a,c)},function(c){return N(b,c)})};function nk(a,b){this.a=a;this.b=b}function ok(a){return a.b.some(function(b){return b instanceof D},a)?pk(a):qk(a)}function pk(a){if(1==a.b.length&&"DISTINCT"==a.b[0].b)return a=cf(a.a,a.b[0]).entries.map(function(c){var d=new jf(new Kc(-1,{}),1<this.a.b.size);mf(d,this.b[0],N(c,this.b[0].a));return d},a),new M(a,[]);var b=new jf(new Kc(-1,{}),1<a.a.b.size);a.b.forEach(function(c){var d=c instanceof D?cf(this.a,c):N(this.a.entries[0],c);mf(b,c,d)},a);return new M([b],a.a.A())}
function qk(a){var b=Array(a.a.entries.length),c=1<a.a.b.size;a.a.entries.forEach(function(d,e){b[e]=new jf(new Kc(d.ba.id(),{}),c);this.b.forEach(function(f){mf(b[e],f,N(d,f))},this)},a);return new M(b,a.a.A())}function rk(a,b){var c=a.map(function(d){return ok(new nk(d,b)).entries[0]});return new M(c,a[0].A())};function sk(a,b){T.call(this,-1,1);this.b=a;this.c=b}q(sk,T);sk.prototype.toString=function(){var a="project("+this.b.toString();if(null!==this.c){var b=this.c.map(function(c){return c.o()}).join(", ");a+=", groupBy("+b+")"}return a+")"};sk.prototype.a=function(a){0==a.length?a=[ef()]:1==a.length?(a=a[0],a=[0==this.b.length?a:ok(new nk(a,this.b))]):a=[rk(a,this.b)];return a};function tk(a){return a.b.some(function(b){return b instanceof D})||null!==a.c};function uk(){T.call(this,1,1)}q(uk,T);uk.prototype.toString=function(){return"skip(?)"};uk.prototype.gb=function(a){return this.toString().replace("?",a.G.toString())};uk.prototype.a=function(a,b,c){return[new M(a[0].entries.slice(c.G),a[0].A())]};function vk(){}q(vk,Zh);vk.prototype.b=function(a,b){if(void 0===b.M&&void 0===b.G)return a;var c=wk(a);if(null===c)return a;ri(a,function(d){return d instanceof kk||d instanceof uk}).forEach(function(d){d instanceof kk?c.b=!0:c.c=!0;si(d)},this);return c.oa()};function wk(a){a=ri(a,function(b){return b instanceof ak},function(b){return b instanceof sk&&tk(b)||b instanceof lk||1!=K(b).length||b instanceof ck});return 0<a.length?a[0]:null};function xk(a){this.c=a}q(xk,Zh);xk.prototype.b=function(a,b){this.a=a;var c=yk(this,b);if(0==c.length)return this.a;var d=0;do{var e=c[d++];a=zk(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.a;b=Ak(this,a[0].pa.b);return null===b?this.a:this.a=Bk(this,e,b,a)};function yk(a,b){return ri(a.a,function(c){if(!(c instanceof ck))return!1;c=uf(b,c.b);return c instanceof Kj&&"or"==c.a})}function Ak(a,b){return ri(a.a,function(c){return c instanceof yj&&c.table.g()==b})[0]||null}
function zk(a,b,c){b=uf(c,b.b);var d=b.A();if(1!=d.size)return null;d=A(d)[0];var e=new Sj(a.c,d),f=null;return K(b).every(function(g){g=Uj(e,c,[g]);null!==g&&(null===f?f=[g]:f.push(g));return null!==g})?f:null}function Bk(a,b,c,d){var e=new dk(a.c,c.table),f=new bk;L(e,f);d.forEach(function(g){g=new ak(this.c,g.pa,Zj(g),!1);L(f,g)},a);si(b);wi(c,c,e,f);return f.oa()};function Ck(a){this.a=a}q(Ck,Zh);Ck.prototype.b=function(a,b){b=Dk(a,b);if(null===b)return a;a:{var c=b;a=Ek(Ue(b,0));if(null!==a){var d=b.H;for(var e=null,f=a.table.ga(),g=0;g<f.length&&null===e;g++)e=Fk(f[g],d);d=e;if(null===d){a=c;break a}c=new ak(this.a,d.pa,new Oj(d.pa),d.Pb);d=new dk(this.a,a.table);L(d,c);si(b);c=wi(a,a,d,c)}a=c}a==b&&(a=b,c=Gk(Ue(b,0)),null!==c&&(d=Fk(c.index,b.H),null!==d&&(c.f=d.Pb,a=si(b).parent)));return a.oa()};
function Gk(a){a=ri(a,function(b){return b instanceof ak},function(b){return 1!=K(b).length});return 0<a.length?a[0]:null}function Ek(a){a=ri(a,function(b){return b instanceof yj},function(b){return 1!=K(b).length});return 0<a.length?a[0]:null}function Dk(a,b){return void 0===b.H?null:ri(a,function(c){return c instanceof lk})[0]}function Fk(a,b){if(a.a.length!=b.length||!b.every(function(c,d){return c.F.g()==a.a[d].S.g()}))return null;b=Hk(b,a);return b[0]||b[1]?{pa:a,Pb:b[1]}:null}
function Hk(a,b){var c=a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0),d=b.a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.a.length))-1]};function Ik(a,b,c){this.a=a;this.b=b;this.c=c}function Jk(a){a.c.forEach(function(b){this.a=b.b(this.a,this.b)},a);return a.a};function Kk(a){T.call(this,1,1);this.b=a}q(Kk,T);Kk.prototype.toString=function(){return"update("+this.b.g()+")"};Kk.prototype.a=function(a,b,c){a=a[0].entries.map(function(d){var e=this.b.ua(d.ba.ia());c.set.forEach(function(f){e.u[f.F.g()]=f.value},this);return e},this);b.update(this.b,a);return[ef()]};function Lk(a){this.a=a;this.c=[new Jj,new ek(this.a),new xk(this.a),new Ck(this.a),new vk,new zj(this.a)];this.b=[new ek(this.a)]}Lk.prototype.create=function(a,b){var c=a.oa();if(c instanceof ci||c instanceof bi)return Mk(this,a,b);if(c instanceof ii||c instanceof mi||c instanceof ni)return Mk(this,a,b,this.c);if(c instanceof di||c instanceof ei)return Mk(this,a,b,this.b);throw new v(8);};function Mk(a,b,c,d){a=pi(b.oa(),a.f.bind(a));null!=d&&(a=Jk(new Ik(a,c,d)));return new ue(a,b.b)}
Lk.prototype.f=function(a){if(a instanceof ii)return new sk(a.b,a.a);if(a instanceof li)return new Bj(a.a);if(a instanceof ki)return new lj(a.a);if(a instanceof ji)return new lk(a.H);if(a instanceof ni)return new uk;if(a instanceof mi)return new kk;if(a instanceof fi)return new ck(a.I.K());if(a instanceof hi)return new vj;if(a instanceof oi)return new Dj(this.a,a.I,a.a);if(a instanceof gi)return new yj(this.a,a.table);if(a instanceof di)return new wj(a.table);if(a instanceof ei)return new Kk(a.table);
if(a instanceof ci)return new jk(this.a,a.table);if(a instanceof bi)return new hk(this.a,a.table);throw new v(514);};function Nk(a){this.a=new fj;this.b=new Lk(a)};function Ok(){this.a=x()}function Pk(a,b){var c=a.a.get(b.g())||null;null===c&&(c=new Qk,a.a.set(b.g(),c));return c}function Rk(a,b,c,d){c.forEach(function(e){e=Pk(this,e);0==d?(e.b=null,e.f=b):3==d?(null===e.c&&(e.c=z()),e.c.add(b),null===e.a&&(e.a=z()),e.a.delete(b)):1==d?(null===e.a&&(e.a=z()),e.a.add(b)):2==d&&(e.b=b)},a)}
function Sk(a,b,c,d){var e=!0;c.forEach(function(f){if(e){f=Pk(this,f);var g=null===f.a||0==f.a.size;e=0==d?(null===f.c||0==f.c.size)&&g&&null===f.f&&null!==f.b&&f.b==b:3==d?null===f.f&&null===f.b&&null!==f.a&&f.a.has(b):1==d?null===f.b:g&&(null===f.b||f.b==b)}},a);return e}function Tk(a,b,c,d){var e=Sk(a,b,c,d);e&&Rk(a,b,c,d);return e}function Uk(a,b,c){c.forEach(function(d){d=Pk(this,d);d.f==b&&(d.f=null);d.b==b&&(d.b=null);null!==d.a&&d.a.delete(b);null!==d.c&&d.c.delete(b)},a)}
function Vk(a,b){b.forEach(function(c){Pk(this,c).b=null},a)}function Qk(){this.c=this.a=this.b=this.f=null};function Wk(){this.b=new Xk;this.a=new Ok}function Gf(a,b){(2>b.xa()||2>b.xa())&&Vk(a.a,b.qa());a.b.Ea(b);Yk(a);return b.Ka().a}function Yk(a){for(var b=a.b.ca(),c=0;c<b.length;c++){var d=b[c];if(0==d.D()?Zk(a,d,1,3):Zk(a,d,2,0)){a.b.remove(d);var e=a;d.exec().then(e.f.bind(e,d),e.c.bind(e,d))}}}function Zk(a,b,c,d){var e=!1;Tk(a.a,b.K(),b.qa(),c)&&(e=Tk(a.a,b.K(),b.qa(),d));return e}Wk.prototype.f=function(a,b){Uk(this.a,a.K(),a.qa());a.Ka().resolve(b);Yk(this)};
Wk.prototype.c=function(a,b){Uk(this.a,a.K(),a.qa());a.Ka().b(b);Yk(this)};function Xk(){this.a=[]}Xk.prototype.Ea=function(a){Sg(this.a,a,function(b,c){var d=b.xa()-c.xa();return 0==d?b.K()-c.K():d})};Xk.prototype.ca=function(){return this.a.slice()};Xk.prototype.remove=function(a){var b=this.a;a=Fa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function $k(a,b){var c=a.j(Od),d=b||{};b=new Mg(c);a.ya(Jd,b);b=null;var e=!1;null==d.storeType?(b=Tc(),b=b.b?0:b.h?4:1):b=d.storeType;switch(b){case 0:b=new hg(a,c);break;case 1:b=new og(c);break;case 5:b=new qg(c);break;case 4:b=new zg(a,c,d.webSqlDbSize);break;case 3:b=new Tf(c,d.firebase);e=!0;break;default:throw new v(300);}a.ya(Id,b);var f=new Yh;a.ya(Kd,f);return b.U(d.onUpgrade).then(function(){var g=new Nk(a);a.ya(Ld,g);g=new Wk;a.ya(Md,g);g=new Ig;a.ya(Nd,g);return f.U(c)}).then(function(){if(e){var g=
new Hf(a);g.a.ab(g.f.bind(g))}d.enableInspector&&(window.top["#lfInspect"]=Sh);return(new Ih(a)).U(c)})};function al(a){return bl("and",Array.prototype.slice.call(arguments))}n("lf.op.and",al);n("lf.op.or",function(a){return bl("or",Array.prototype.slice.call(arguments))});function bl(a,b){var c=new Kj(a);b.forEach(function(d){L(c,d)});return c}n("lf.op.not",function(a){a.ob(!0);return a});function cl(a,b,c){return null===b?new of(a,b,c):void 0!==b.o?new Ji(a,b,c):new of(a,b,c)};function dl(a){this.b=a;this.a=a.j(Od);this.f=z(this.a.X());this.c=Qb()}function el(a){var b=a.b.j(Kd),c=a.b.j(Jd),d={};a.a.X().forEach(function(e){var f=b.get(md(e)).La();f=Og(c,f).map(function(g){return g.u});d[e.g()]=f});return{name:a.a.name(),version:a.a.version(),tables:d}}k=dl.prototype;k.exec=function(){var a=el(this);a=new jf(new Kc(-1,a),!0);return u([new M([a],[])])};k.D=function(){return 0};k.qa=function(){return this.f};k.Ka=function(){return this.c};k.K=function(){return xa(this)};
k.xa=function(){return 0};function fl(a,b){this.s=a;this.b=a.j(Od);this.c=z(this.b.X());this.L=Qb();this.a=b;this.f=a.j(Id);this.l=a.j(Jd);this.h=a.j(Kd)}k=fl.prototype;k.exec=function(){if(!this.f.fb())throw new v(300);a:{var a=this.b.X();for(var b=0;b<a.length;++b)if(0<this.h.get(md(a[b])).N().a){a=!1;break a}a=!0}if(!a)throw new v(110);if(this.b.name()!=this.a.name||this.b.version()!=this.a.version)throw new v(111);if(null==this.a.tables)throw new v(112);return gl(this)};k.D=function(){return 1};k.qa=function(){return this.c};
k.Ka=function(){return this.L};k.K=function(){return xa(this)};k.xa=function(){return 0};function gl(a){var b=new pe(a.s,a.c);b=a.f.Ja(a.D(),A(a.c),b);for(var c in a.a.tables){var d=a.b.table(c),e=a.a.tables[c].map(function(h){return d.Ba(h)}),f=b.a(c,d.ua,0);Ng(a.l,c,e);var g=a.h.a.get(c)||[];e.forEach(function(h){g.forEach(function(l){var m=h.wa(l.g());l.add(m,h.id())})});f.put(e)}return b.V()};function hl(a){this.f=a;this.a=a.j(Od);this.l=z(this.a.X());this.h=Qb();this.b=a.j(Jd);this.c=a.j(Kd)}k=hl.prototype;k.exec=function(){this.c.clear();this.b.clear();this.b.U(this.a);return this.c.U(this.a).then(function(){return(new Ih(this.f)).U(this.a)}.bind(this))};k.D=function(){return 1};k.qa=function(){return this.l};k.Ka=function(){return this.h};k.K=function(){return xa(this)};k.xa=function(){return 0};function il(a,b){this.s=a;this.ha=a.j(Id);this.L=a.j(Md);this.ra=a.j(Nd);this.c=z(b);this.b=new pe(this.s,this.c);this.f=Qb();this.a=Qb();this.l=Qb()}k=il.prototype;k.exec=function(){this.l.resolve();return this.a.a};k.D=function(){return 1};k.qa=function(){return this.c};k.Ka=function(){return this.f};k.K=function(){return xa(this)};k.xa=function(){return 2};function jl(a){Gf(a.L,a);return a.l.a}
function kl(a,b){b=b.Ya();return b.yb.oa().exec(a.b,b.context).then(function(c){return af(c[0])},function(c){this.b.Na();var d=new Tb(c.name);this.a.b(d);throw c;}.bind(a))}k.V=function(){this.h=this.ha.Ja(this.D(),A(this.c),this.b);this.h.V().then(function(){var a=Ff(this.ra,this.c);0!=a.length&&(a=new Cf(this.s,a),Gf(this.L,a));this.a.resolve()}.bind(this),function(a){this.b.Na();this.a.b(a)}.bind(this));return this.f.a};k.Na=function(){this.b.Na();this.a.resolve();return this.f.a};
k.N=function(){var a=null;null!=this.h&&(a=this.h.N());return null===a?new F(!1,0,0,0,0):a};function ll(a,b){Af.call(this,a,b);this.ra=a.j(Md);this.l=a.j(Nd)}q(ll,Af);ll.prototype.xa=function(){return 2};ll.prototype.xb=function(a){0==this.D()?ml(this,a):(a=Ff(this.l,this.qa()),0!=a.length&&(a=new Cf(this.h,a),Gf(this.ra,a)))};function ml(a,b){a.a.forEach(function(c,d){c instanceof yf&&Df(this.l,c,b[d])},a)};function U(a){this.c=a;this.f=a.j(Md);this.a=null;this.b=nl;0==ol.size&&(ol.set(nl,z([1,4])),ol.set(1,z([2])),ol.set(2,z([3,5,6])),ol.set(3,z([2,7])),ol.set(4,z([7])),ol.set(5,z([7])),ol.set(6,z([7])))}n("lf.proc.Transaction",U);var nl=0,ol=x();function pl(a,b){var c=ol.get(a.b)||null;if(null!==c&&c.has(b))a.b=b;else throw new v(107,a.b,b);}
U.prototype.exec=function(a){pl(this,4);var b=[];try{a.forEach(function(c){c.b();b.push(c.Ya())},this)}catch(c){return pl(this,7),Mb(c)}this.a=new ll(this.c,b);return Gf(this.f,this.a).then(function(c){pl(this,7);return c.map(function(d){return af(d)})}.bind(this),function(c){pl(this,7);throw c;}.bind(this))};U.prototype.exec=U.prototype.exec;U.prototype.cc=function(a){pl(this,1);this.a=new il(this.c,a);return jl(this.a).then(function(){pl(this,2)}.bind(this))};U.prototype.begin=U.prototype.cc;
U.prototype.bc=function(a){pl(this,3);try{a.b()}catch(b){return pl(this,7),Mb(b)}return kl(this.a,a).then(function(b){pl(this,2);return b}.bind(this),function(b){pl(this,7);throw b;}.bind(this))};U.prototype.attach=U.prototype.bc;U.prototype.V=function(){pl(this,5);return this.a.V().then(function(){pl(this,7)}.bind(this))};U.prototype.commit=U.prototype.V;U.prototype.Na=function(){pl(this,6);return this.a.Na().then(function(){pl(this,7)}.bind(this))};U.prototype.rollback=U.prototype.Na;
U.prototype.N=function(){if(7!=this.b)throw new v(105);return this.a.N()};U.prototype.stats=U.prototype.N;function ql(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+Oc(b)+"'";default:return"'"+b.toString()+"'"}}function rl(a,b){var c=a.a?"INSERT OR REPLACE":"INSERT",d=a.ja.va();c+=" INTO "+a.ja.g()+"(";c+=d.map(function(e){return e.g()}).join(", ");c+=") VALUES (";return a.values.map(function(e){var f=d.map(function(g){var h=e.u[g.g()];return b?null!=h?"#":"NULL":ql(g.D(),h)});return c+f.join(", ")+");"}).join("\n")}
function sl(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function tl(a,b,c,d){return a instanceof we?"?"+a.a.toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(e){return ql(c,e)}).join(", ")+")":"between"==b?ql(c,a[0])+" AND "+ql(c,a[1]):ql(c,a).toString()}
function ul(a,b){return K(a).map(function(c){return"("+vl(c,b)+")"}).join("and"==a.a?" AND ":" OR ")}function wl(a){return[a.a.o(),sl(a.c),a.b.o()].join(" ")}function vl(a,b){if(a instanceof of){var c=a.F.o(),d=sl(a.a);a=tl(a.value,a.a,a.F.D(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Kj)return ul(a,b);if(a instanceof Ji)return wl(a);throw new v(357,typeof a);}
function xl(a,b){return(a=vl(a,b))?" WHERE "+a:""}function yl(a,b){var c="UPDATE "+a.table.g()+" SET ";c+=a.set.map(function(d){var e=d.F.o()+" = ";return-1!=d.hb?e+"?"+d.hb.toString():e+ql(d.F.D(),d.value).toString()}).join(", ");a.B&&(c+=xl(a.B,b));return c+";"}
function zl(a,b){var c="*";a.a.length&&(c=a.a.map(function(d){return d.Qa()?d.o()+" AS "+d.Qa():d.o()}).join(", "));c="SELECT "+c+" FROM ";null!=a.b&&0!=a.b.size?c+=Al(a,b):(c+=a.from.map(Bl).join(", "),a.B&&(c+=xl(a.B,b)));a.H&&(b=a.H.map(function(d){return d.F.o()+(0==d.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.aa&&(b=a.aa.map(function(d){return d.o()}).join(", "),c+=" GROUP BY "+b);a.M&&(c+=" LIMIT "+a.M.toString());a.G&&(c+=" SKIP "+a.G.toString());return c+";"}
function Bl(a){return ld(a)!=a.g()?a.g()+" AS "+ld(a):a.g()}function Al(a,b){for(var c=ri(a.B,function(h){return h instanceof Ji}),d=c.map(wl),e=Bl(a.from[0]),f=1;f<a.from.length;f++){var g=Bl(a.from[f]);e=a.b.has(c[d.length-f].K())?e+(" LEFT OUTER JOIN "+g):e+(" INNER JOIN "+g);e+=" ON ("+d[d.length-f]+")"}a=a.B;a=0<K(a).length?Ue(a,0):a;a instanceof Ji||(e+=" WHERE "+vl(a,b));return e}
function Cl(a,b){b=b||!1;a=a.a.clone();if(a instanceof cj)return rl(a,b);if(a instanceof aj){var c="DELETE FROM "+a.from.g();a.B&&(c+=xl(a.B,b));return c+";"}if(a instanceof dj)return yl(a,b);if(a instanceof yf)return zl(a,b);throw new v(358,typeof a);};function V(a,b){this.h=a;this.L=a.j(Ld);this.s=a.j(Md);this.a=b}n("lf.query.BaseBuilder",V);V.prototype.exec=function(){try{this.b()}catch(a){return Mb(a)}return new t(function(a,b){var c=new ll(this.h,[this.Ya()]);Gf(this.s,c).then(function(d){a(af(d[0]))},b)},this)};V.prototype.exec=V.prototype.exec;V.prototype.mc=function(){var a=function(b){return b.gb(this.a)+"\n"}.bind(this);return xi(Lg(this).oa(),a)};V.prototype.explain=V.prototype.mc;V.prototype.bind=function(a){this.a.bind(a);return this};
V.prototype.bind=V.prototype.bind;V.prototype.Mc=function(a){return Cl(this,a)};V.prototype.toSql=V.prototype.Mc;V.prototype.b=function(){};function Lg(a){if(null==a.l){var b=a.L;var c=a.a,d=b.a.create(c);b=b.b.create(d,c);a.l=b}return a.l}V.prototype.Ya=function(){return{context:this.a.clone(),yb:Lg(this)}};function Dl(a){V.call(this,a,new aj(a.j(Od)))}q(Dl,V);n("lf.query.DeleteBuilder",Dl);Dl.prototype.from=function(a){if(null!=this.a.from)throw new v(515);this.a.from=a;return this};Dl.prototype.from=Dl.prototype.from;Dl.prototype.B=function(a){if(null==this.a.from)throw new v(548);if(null!=this.a.B)throw new v(516);this.a.B=a;return this};Dl.prototype.where=Dl.prototype.B;Dl.prototype.b=function(){Dl.sa.b.call(this);if(null==this.a.from)throw new v(517);};function El(a,b){V.call(this,a,new cj(a.j(Od)));this.a.a=b||!1}q(El,V);n("lf.query.InsertBuilder",El);El.prototype.b=function(){El.sa.b.call(this);var a=this.a;if(null==a.ja||null==a.values)throw new v(518);if(a.a&&null===a.ja.a.a)throw new v(519);};El.prototype.ja=function(a){if(null!=this.a.ja)throw new v(520);this.a.ja=a;return this};El.prototype.into=El.prototype.ja;
El.prototype.values=function(a){if(null!=this.a.values)throw new v(521);a instanceof we||a.some(function(b){return b instanceof we})?this.a.b=a:this.a.values=a;return this};El.prototype.values=El.prototype.values;function W(a,b){V.call(this,a,new yf(a.j(Od)));this.f=this.c=!1;this.a.a=b;Fl(this);Gl(this)}q(W,V);n("lf.query.SelectBuilder",W);W.prototype.b=function(){W.sa.b.call(this);var a=this.a;if(null==a.from)throw new v(522);if(void 0!==a.f&&void 0===a.M||void 0!==a.c&&void 0===a.G)throw new v(523);null!=this.a.aa?Hl(this):Il(this)};function Fl(a){var b=a.a.a.filter(function(c){return c instanceof D&&"DISTINCT"==c.b},a);if(0!=b.length&&(1!=b.length||1!=a.a.a.length))throw new v(524);}
function Hl(a){if(a.a.aa.some(function(b){b=b.D();return 6==b||0==b}))throw new v(525);}function Il(a){var b=a.a.a.some(function(c){return c instanceof D},a);a=a.a.a.some(function(c){return!(c instanceof D)},a)||0==a.a.a.length;if(b&&a)throw new v(526);}function Gl(a){a.a.a.forEach(function(b){if(b instanceof D&&!Jl(b.b,b.D()))throw new v(527,b.o());},a)}function Kl(a,b){if(null==a.a.from)throw new v(b);}
W.prototype.from=function(a){if(this.f)throw new v(515);this.f=!0;null==this.a.from&&(this.a.from=[]);this.a.from.push.apply(this.a.from,Array.prototype.slice.call(arguments));return this};W.prototype.from=W.prototype.from;W.prototype.B=function(a){Kl(this,548);if(this.c)throw new v(516);this.c=!0;Ll(this,a);return this};W.prototype.where=W.prototype.B;function Ll(a,b){null!=a.a.B?(b=al(b,a.a.B),a.a.B=b):a.a.B=b}
W.prototype.vc=function(a,b){Kl(this,542);if(this.c)throw new v(547);this.a.from.push(a);Ll(this,b);return this};W.prototype.innerJoin=W.prototype.vc;W.prototype.zc=function(a,b){Kl(this,542);if(!(b instanceof Ji))throw new v(541);if(this.c)throw new v(547);this.a.from.push(a);null==this.a.b&&(this.a.b=z());var c=b;ld(a)!=ld(b.b.Y())&&(c=b.reverse());this.a.b.add(c.K());Ll(this,c);return this};W.prototype.leftOuterJoin=W.prototype.zc;
W.prototype.M=function(a){if(null!=(this.a.M||this.a.f))throw new v(528);if(a instanceof we)this.a.f=a;else{if(0>a)throw new v(531);this.a.M=a}return this};W.prototype.limit=W.prototype.M;W.prototype.G=function(a){if(null!=(this.a.G||this.a.c))throw new v(529);if(a instanceof we)this.a.c=a;else{if(0>a)throw new v(531);this.a.G=a}return this};W.prototype.skip=W.prototype.G;W.prototype.H=function(a,b){Kl(this,549);null==this.a.H&&(this.a.H=[]);this.a.H.push({F:a,order:null!=b?b:1});return this};
W.prototype.orderBy=W.prototype.H;W.prototype.aa=function(a){Kl(this,549);if(null!=this.a.aa)throw new v(530);null==this.a.aa&&(this.a.aa=[]);this.a.aa.push.apply(this.a.aa,Array.prototype.slice.call(arguments));return this};W.prototype.groupBy=W.prototype.aa;function Jl(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}
W.prototype.clone=function(){var a=new W(this.h,this.a.a);a.a=this.a.clone();a.a.h=null;return a};W.prototype.clone=W.prototype.clone;function Ml(a,b){V.call(this,a,new dj(a.j(Od)));this.a.table=b}q(Ml,V);n("lf.query.UpdateBuilder",Ml);Ml.prototype.set=function(a,b){a={hb:b instanceof we?b.a:-1,F:a,value:b};null!=this.a.set?this.a.set.push(a):this.a.set=[a];return this};Ml.prototype.set=Ml.prototype.set;Ml.prototype.B=function(a){if(null!=this.a.B)throw new v(516);this.a.B=a;return this};Ml.prototype.where=Ml.prototype.B;
Ml.prototype.b=function(){Ml.sa.b.call(this);if(null==this.a.set)throw new v(532);if(this.a.set.some(function(a){return a.value instanceof we}))throw new v(501);};function X(a){this.a=a;this.f=a.j(Od);this.b=!1}n("lf.proc.Database",X);X.prototype.U=function(a){this.a.ya(Od,this.f);return $k(this.a,a).then(function(){this.b=!0;this.c=this.a.j(Md);return this}.bind(this))};X.prototype.init=X.prototype.U;X.prototype.Da=function(){return this.f};X.prototype.getSchema=X.prototype.Da;function Nl(a){if(!a.b)throw new v(2);}X.prototype.select=function(a){Nl(this);return new W(this.a,1==arguments.length&&null==arguments[0]?[]:Array.prototype.slice.call(arguments))};
X.prototype.select=X.prototype.select;X.prototype.Ea=function(){Nl(this);return new El(this.a)};X.prototype.insert=X.prototype.Ea;X.prototype.sb=function(){Nl(this);return new El(this.a,!0)};X.prototype.insertOrReplace=X.prototype.sb;X.prototype.update=function(a){Nl(this);return new Ml(this.a,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){Nl(this);return new Dl(this.a)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){Nl(this);this.a.j(Nd).pb(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){Nl(this);this.a.j(Nd).zb(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.ic=function(){Nl(this);return new U(this.a)};X.prototype.createTransaction=X.prototype.ic;X.prototype.close=function(){try{this.a.j(Id).close()}catch(a){}this.a.clear();this.b=!1};X.prototype.close=X.prototype.close;
X.prototype.nc=function(){Nl(this);var a=new dl(this.a);return Gf(this.c,a).then(function(b){return af(b[0])[0]})};X.prototype["export"]=X.prototype.nc;X.prototype.import=function(a){Nl(this);a=new fl(this.a,a);return Gf(this.c,a).then(function(){return null})};X.prototype["import"]=X.prototype.import;X.prototype.Jc=function(){var a=new hl(this.a);return Gf(this.a.j(Md),a).then(function(){return null})};X.prototype.resetCache=X.prototype.Jc;t.prototype.catch=t.prototype.Db;t.prototype["catch"]=t.prototype.catch;function Y(a,b,c,d,e,f){this.f=a;this.a=b;this.l=c;this.h=d;this.s=e;this.la=f||null}n("lf.schema.BaseColumn",Y);k=Y.prototype;k.g=function(){return this.a};k.o=function(){return ld(this.f)+"."+this.a};k.toString=function(){return this.o()};k.Y=function(){return this.f};k.D=function(){return this.s};Y.prototype.getType=Y.prototype.D;Y.prototype.Qa=function(){return this.la};
Y.prototype.ga=function(){null==this.c&&(this.c=[],this.Y().ga().forEach(function(a){-1!=a.a.map(function(b){return b.S.g()}).indexOf(this.a)&&this.c.push(a)},this));return this.c};Y.prototype.bb=function(){if(void 0===this.b){var a=this.ga().filter(function(b){return 1!=b.a.length?!1:b.a[0].S.g()==this.g()},this);0<a.length?this.b=a[0]:this.b=null}return this.b};Y.prototype.Pa=function(){return this.h};Y.prototype.isNullable=Y.prototype.Pa;Y.prototype.$a=function(){return this.l};
Y.prototype.ma=function(a){return cl(this,a,"eq")};Y.prototype.eq=Y.prototype.ma;Y.prototype.Rb=function(a){return cl(this,a,"neq")};Y.prototype.neq=Y.prototype.Rb;Y.prototype.Bc=function(a){return cl(this,a,"lt")};Y.prototype.lt=Y.prototype.Bc;Y.prototype.Cc=function(a){return cl(this,a,"lte")};Y.prototype.lte=Y.prototype.Cc;Y.prototype.qc=function(a){return cl(this,a,"gt")};Y.prototype.gt=Y.prototype.qc;Y.prototype.rc=function(a){return cl(this,a,"gte")};Y.prototype.gte=Y.prototype.rc;
Y.prototype.match=function(a){return cl(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.dc=function(a,b){return cl(this,[a,b],"between")};Y.prototype.between=Y.prototype.dc;Y.prototype.sc=function(a){return cl(this,a,"in")};Y.prototype["in"]=Y.prototype.sc;Y.prototype.yc=function(){return this.ma(null)};Y.prototype.isNull=Y.prototype.yc;Y.prototype.xc=function(){return this.Rb(null)};Y.prototype.isNotNull=Y.prototype.xc;
Y.prototype.as=function(a){return new Y(this.f,this.a,this.l,this.h,this.s,a)};Y.prototype.as=Y.prototype.as;function Z(a){Ol(a);this.ha=Fe();this.b=a;this.f=x();this.s=z();this.h=z();this.l=z();this.a=null;this.c=x();this.L=!1;this.Ca=[]}n("lf.schema.TableBuilder",Z);function Pl(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Ql=z([0,6]);function Ol(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new v(502,a);}function Rl(a,b){if(b==a.b)throw new v(546,b);if(a.f.has(b)||a.c.has(b)||a.h.has(b))throw new v(503,a.b+"."+b);}
function Sl(a,b){var c=!1;b.forEach(function(d){var e=this.f.get(d.name);c=c||d.autoIncrement;if(d.autoIncrement&&3!=e)throw new v(504);},a);if(c&&1<b.length)throw new v(505);}function Tl(a){if(null!==a.a){var b=a.c.get(a.a).map(function(d){return d.name}),c=0;if(a.Ca.some(function(d,e){c=e;return-1!=b.indexOf(d.za)},a))throw new v(543,a.Ca[c].name);}}
function Ul(a){if(null!==a.a){var b=function(d){return d.name},c=JSON.stringify(a.c.get(a.a).map(b));a.c.forEach(function(d,e){if(e!=this.a&&(d=d.map(b),JSON.stringify(d)==c))throw new v(544,this.b+"."+e);},a)}}function Vl(a){null!==a.a&&a.c.get(a.a).forEach(function(b){if(this.l.has(b.name))throw new v(545,this.b+"."+b.name);},a)}Z.prototype.Yb=function(a,b){Ol(a);Rl(this,a);this.f.set(a,b);Ql.has(b)&&this.Hb([a]);return this};Z.prototype.addColumn=Z.prototype.Yb;
Z.prototype.$b=function(a,b){var c=this.b;this.a="pk"+(c[0].toUpperCase()+c.substring(1));Ol(this.a);Rl(this,this.a);a=Wl(this,a,!0,void 0,b);Sl(this,a);1==a.length&&this.s.add(a[0].name);this.h.add(this.a);this.c.set(this.a,a);return this};Z.prototype.addPrimaryKey=Z.prototype.$b;
Z.prototype.Zb=function(a,b){Ol(a);Rl(this,a);b=new Pc(b,this.b,a);void 0===b.c&&(b.c=0);void 0===b.a&&(b.a=0);if(1==b.c&&1==b.a)throw new v(506);if(!this.f.has(b.za))throw new v(540,a);this.Ca.push(b);this.Gb(a,[b.za],this.s.has(b.za));return this};Z.prototype.addForeignKey=Z.prototype.Zb;Z.prototype.ac=function(a,b){Ol(a);Rl(this,a);b=Wl(this,b,!0);1==b.length&&(this.s.add(b[0].name),Xl(this,b[0].name));this.c.set(a,b);this.h.add(a);return this};Z.prototype.addUnique=Z.prototype.ac;
function Xl(a,b){a.Ca.forEach(function(c){c.za==b&&this.h.add(c.name.split(".")[1])},a)}Z.prototype.Hb=function(a){Wl(this,a,!1).forEach(function(b){this.l.add(b.name)},this);return this};Z.prototype.addNullable=Z.prototype.Hb;Z.prototype.Gb=function(a,b,c,d){Ol(a);Rl(this,a);b=Wl(this,b,!0,d);c&&this.h.add(a);this.c.set(a,b);return this};Z.prototype.addIndex=Z.prototype.Gb;Z.prototype.Ha=function(a){this.L=a};Z.prototype.persistentIndex=Z.prototype.Ha;
Z.prototype.Da=function(){Tl(this);Ul(this);Vl(this);return new (Yl(this))};Z.prototype.getSchema=Z.prototype.Da;function Wl(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(g){return new Pl({name:g,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(g){return new Pl(g)});f.forEach(function(g){if(!this.f.has(g.name))throw new v(508,this.b,g.name);if(c){var h=this.f.get(g.name);if(0==h||6==h)throw new v(509,this.b,g.name);}},a);return f}
function Yl(a){function b(){function c(h){return a.c.get(h).map(function(l){return{S:this[l.name],order:l.order,autoIncrement:l.autoIncrement}},this)}var d=Vc(a.f).map(function(h){this[h]=new Y(this,h,a.s.has(h),a.l.has(h),a.f.get(h));return this[h]},this),e=Vc(a.c).map(function(h){return new jd(a.b,h,a.h.has(h),c.call(this,h))},this);C.call(this,a.b,d,e,a.L);var f=null!==a.a?new jd(a.b,a.a,!0,c.call(this,a.a)):null,g=d.filter(function(h){return!a.l.has(h.g())});this.a=new Qc(f,g,a.Ca);this.c=Zl(a,
d,e)}q(b,C);b.prototype.Ba=function(c){return new this.c(Lc++,c)};b.prototype.createRow=b.prototype.Ba;b.prototype.ua=function(c){var d={};this.va().forEach(function(e){var f=e.g();e=e.D();var g=c.value[f];if(0==e)if(e=g,null==e||""==e)e=null;else{0!=e.length%2&&(e="0"+e);g=new ArrayBuffer(e.length/2);for(var h=new Uint8Array(g),l=0,m=0;l<e.length;l+=2)h[m++]=parseInt(e.substr(l,2),16);e=g}else e=2==e?null!=g?new Date(g):null:g;d[f]=e},this);return new this.c(c.id,d)};b.prototype.deserializeRow=b.prototype.ua;
b.prototype.Lb=function(){return this.a};b.prototype.getConstraint=b.prototype.Lb;return b}
function Zl(a,b,c){function d(h,l){this.a=b;Kc.call(this,h,l)}q(d,Kc);d.prototype.Jb=function(){var h={};this.a.forEach(function(l){h[l.g()]=l.Pa()?null:Jc[l.D()]});return h};d.prototype.Wb=function(){var h={};this.a.forEach(function(l){var m=l.g();l=l.D();var p=this.u[m];h[m]=0==l?null!=p?Oc(p):null:2==l?null!=p?p.getTime():null:6==l?null!=p?p:null:p},this);return h};var e=function(h){var l=this.f.get(h.g()),m=this.ha.b.get(l)||null;return function(p){return m(p[h.g()])}}.bind(a),f=function(h){var l=
h.map(function(m){return e(m.S)});return function(m){return l.map(function(p){return p(m)})}}.bind(a),g={};c.forEach(function(h){var l=h.o();h=1==h.a.length?e(h.a[0].S):f(h.a);g[l]=h});d.prototype.wa=function(h){return-1!=h.indexOf("#")?this.id():g.hasOwnProperty(h)?g[h](this.u):null};return d};function $l(a,b){this.f=new am(a,b);this.a=x();this.c=!1;this.b=null;this.h=!1}n("lf.schema.Builder",$l);function bm(a,b){b.Ca.forEach(function(c){var d=c.na;if(!this.a.has(d))throw new v(536,c.name);d=this.a.get(d).Da();var e=c.b;if(!d.hasOwnProperty(e))throw new v(537,c.name);if(b.Da()[c.za].D()!=d[e].D())throw new v(538,c.name);if(!d[e].$a())throw new v(539,c.name);},a)}
$l.prototype.l=function(a){a.Ca.forEach(function(b){this.a.get(b.na).Ca.forEach(function(c){if(c.za==b.b)throw new v(534,b.name);},this)},this)};function cm(a){a.c||(a.a.forEach(function(b){bm(this,b);b=b.Da();this.f.a.set(b.g(),b)},a),y(a.a).forEach(a.l,a),dm(a),a.a.clear(),a.c=!0)}function em(a,b,c){b.Fb||(b.Fb=!0,b.wb=!0,b.Kb.forEach(function(d){d=c.get(d);if(!d.Fb)em(this,d,c);else if(d.wb&&b!=d)throw new v(533);},a));b.wb=!1}
function dm(a){var b=x();a.f.a.forEach(function(c,d){b.set(d,new fm)},a);a.a.forEach(function(c,d){c.Ca.forEach(function(e){b.get(e.na).Kb.add(d)})});y(b).forEach(function(c){em(this,c,b)},a)}function fm(){this.wb=this.Fb=!1;this.Kb=z()}$l.prototype.Da=function(){this.c||cm(this);return this.f};$l.prototype.getSchema=$l.prototype.Da;$l.prototype.Ob=function(){var a=new Hd("ns_"+this.f.name()),b=Qh();if(b.mb(a))var c=b.j(a);else c=new Oh,b.ya(a,c);return c};$l.prototype.getGlobal=$l.prototype.Ob;
$l.prototype.connect=function(a){if(this.h||null!==this.b&&this.b.b)throw new v(113);this.h=!0;if(null===this.b){var b=this.Ob();b.mb(Od)||b.ya(Od,this.Da());this.b=new X(b)}return this.b.U(a).then(function(c){this.h=!1;return c}.bind(this),function(c){this.h=!1;this.b.close();throw c;}.bind(this))};$l.prototype.connect=$l.prototype.connect;$l.prototype.hc=function(a){if(this.a.has(a))throw new v(503,a);if(this.c)throw new v(535);this.a.set(a,new Z(a));return this.a.get(a)};
$l.prototype.createTable=$l.prototype.hc;$l.prototype.Ab=function(a){if(this.c)throw new v(535);this.f.Ab(a);return this};$l.prototype.setPragma=$l.prototype.Ab;function am(a,b){this.f=a;this.h=b;this.a=x();this.b={kc:!1}}n("lf.schema.DatabaseSchema",am);am.prototype.name=function(){return this.f};am.prototype.name=am.prototype.name;am.prototype.version=function(){return this.h};am.prototype.version=am.prototype.version;am.prototype.X=function(){return y(this.a)};am.prototype.tables=am.prototype.X;
am.prototype.table=function(a){if(!this.a.has(a))throw new v(101,a);return this.a.get(a)};am.prototype.table=am.prototype.table;function he(a){a.c||(a.c=new bd(a));return a.c}am.prototype.Hc=function(){return this.b};am.prototype.pragma=am.prototype.Hc;am.prototype.Ab=function(a){this.b=a};n("lf.schema.create",function(a,b){return new $l(a,b)});try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
